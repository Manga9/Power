(self.webpackChunkpower=self.webpackChunkpower||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},3018:(t,e,n)=>{"use strict";n.d(e,{deG:()=>sn,tb:()=>fu,AFp:()=>uu,ip1:()=>su,CZH:()=>au,hGG:()=>sc,z2F:()=>Yu,sBO:()=>ia,Sil:()=>Su,_Vd:()=>Es,EJc:()=>mu,SBq:()=>Ns,qLn:()=>br,vpe:()=>Za,gxx:()=>to,tBr:()=>xn,XFs:()=>P,OlP:()=>on,zs3:()=>mo,IIB:()=>ou,ZZ4:()=>Ks,aQg:()=>Xs,soG:()=>gu,YKP:()=>pa,v3s:()=>Wu,h0i:()=>fa,PXZ:()=>Hu,R0b:()=>Iu,FiY:()=>An,Lbi:()=>du,g9A:()=>hu,Qsj:()=>Ms,FYo:()=>Ds,JOm:()=>Tr,Tiy:()=>Us,q3G:()=>fr,tp0:()=>In,EAV:()=>ec,Rgc:()=>ca,dDg:()=>Du,DyG:()=>an,q4F:()=>Fs,GfV:()=>qs,s_b:()=>ma,ifc:()=>U,eFA:()=>zu,G48:()=>Bu,Gpc:()=>g,X6Q:()=>ju,_c5:()=>ic,VLi:()=>Uu,c2e:()=>pu,zSh:()=>no,wAp:()=>ps,vHH:()=>y,EiD:()=>hr,mCW:()=>Jn,qzn:()=>Un,JVY:()=>Fn,pB0:()=>Bn,eBb:()=>Vn,L6k:()=>Zn,LAX:()=>jn,cg1:()=>hs,Tjo:()=>rc,kL8:()=>ds,yhl:()=>qn,dqk:()=>j,sIi:()=>Ao,CqO:()=>Go,QGY:()=>jo,F4k:()=>Bo,RDi:()=>At,AaK:()=>d,z3N:()=>Ln,qOj:()=>yo,TTD:()=>_t,_Bn:()=>xs,xp6:()=>oi,uIk:()=>ko,ekj:()=>Wo,Suo:()=>tu,Xpm:()=>X,lG2:()=>st,Yz7:()=>T,cJS:()=>C,oAB:()=>rt,Yjl:()=>at,Y36:()=>Ro,_UZ:()=>qo,BQk:()=>Zo,ynx:()=>Fo,qZA:()=>Uo,TgZ:()=>Lo,EpF:()=>Vo,n5z:()=>Ye,Ikx:()=>as,LFG:()=>Tn,$8M:()=>We,NdJ:()=>Ho,CRH:()=>eu,oxw:()=>Jo,ALo:()=>Da,lcZ:()=>Ma,xi3:()=>La,Q6J:()=>Do,WLB:()=>Pa,iGM:()=>Wa,MAs:()=>No,CHM:()=>Gt,LSH:()=>pr,kYT:()=>it,Udp:()=>Ko,YNc:()=>Po,_uU:()=>is,Oqu:()=>os,hij:()=>ss,Gf:()=>Xa});var r=n(9765),i=n(5319),o=n(7574),s=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return d(this())},t}function m(t){return v(t)?t():t}function v(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${_(t)} found${n}`)}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return x(t,I)||x(t,O)}function x(t,e){return t.hasOwnProperty(e)?t[e]:null}function A(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(k))?t[E]:null}const I=l({"\u0275prov":l}),E=l({"\u0275inj":l}),O=l({ngInjectableDef:l}),k=l({ngInjectorDef:l});var P=(()=>((P=P||{})[P.Default=0]="Default",P[P.Host=1]="Host",P[P.Self=2]="Self",P[P.SkipSelf=4]="SkipSelf",P[P.Optional=8]="Optional",P))();let N;function R(t){const e=N;return N=t,e}function D(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&P.Optional?null:void 0!==e?e:void w(d(t),"Injector")}function M(t){return{toString:t}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),U=(()=>((U=U||{})[U.Emulated=0]="Emulated",U[U.None=2]="None",U[U.ShadowDom=3]="ShadowDom",U))();const q="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,Z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,j=q||V||F||Z,B={},G=[],H=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),J=l({"\u0275mod":l}),Q=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),K=l({__NG_ELEMENT_ID__:l});let W=0;function X(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||U.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=W++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[z]||null}(t)}function et(t){return function(t){return t[$]||null}(t)}const nt={};function rt(t){return M(()=>{const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return M(()=>{const n=ct(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[J]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),Tt}function Tt(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===B),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let xt;function At(t){xt=t}function It(t){return!!t.listen}_t.ngInherit=!0;const Et={createRenderer:(t,e)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function Ot(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return Ot(e[t])}function Pt(t,e){return Ot(e[t.index])}function Nt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ut(t,e){return null==e?null:t[e]}function qt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Zt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return Zt.bindingsEnabled}function jt(){return Zt.lFrame.lView}function Bt(){return Zt.lFrame.tView}function Gt(t){return Zt.lFrame.contextLView=t,t[8]}function Ht(){let t=zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function zt(){return Zt.lFrame.currentTNode}function $t(t,e){const n=Zt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Zt.lFrame.isParent}function Qt(){Zt.lFrame.isParent=!1}function Yt(){return Zt.isInCheckNoChangesMode}function Kt(t){Zt.isInCheckNoChangesMode=t}function Wt(){const t=Zt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Xt(){return Zt.lFrame.bindingIndex++}function te(t,e){const n=Zt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ee(e)}function ee(t){Zt.lFrame.currentDirectiveIndex=t}function ne(){return Zt.lFrame.currentQueryIndex}function re(t){Zt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&P.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&P.Host||(r=ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Zt.lFrame=ae();return r.currentTNode=e,r.lView=t,!0}function se(t){const e=ae(),n=t[1];Zt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ae(){const t=Zt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ce(){const t=Zt.lFrame;return Zt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ce;function he(){const t=ce();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function de(){return Zt.lFrame.selectedIndex}function fe(t){Zt.lFrame.selectedIndex=t}function pe(){const t=Zt.lFrame;return Nt(t.tView,t.selectedIndex)}function ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){be(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(_e(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function _e(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const we=-1;class Te{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Se(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==we}function Oe(t){return 32767&t}function ke(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Pe=!0;function Ne(t){const e=Pe;return Pe=t,e}let Re=0;function De(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Me(r.data,t),Me(e,null),Me(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(Ee(i)){const t=Oe(i),n=ke(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Me(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return we;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return we}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(r=n[K]),null==r&&(r=n[K]=Re++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&P.Optional)return t;w(e,"NodeInjector")}function Ze(t,e,n,r){if(n&P.Optional&&void 0===r&&(r=null),0==(n&(P.Self|P.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&P.Optional):D(e,r,n&P.Optional)}finally{R(o)}}return Fe(r,e,n)}function Ve(t,e,n,r=P.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(K)?t[K]:void 0;return"number"==typeof e?e>=0?255&e:Be:e}(n);if("function"==typeof o){if(!oe(e,t,r))return r&P.Host?Fe(i,n,r):Ze(e,n,r,i);try{const t=o(r);if(null!=t||r&P.Optional)return t;w(n)}finally{le()}}else if("number"==typeof o){let i=null,s=Le(t,e),a=we,u=r&P.Host?e[16][6]:null;for((-1===s||r&P.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==we&&Je(r,!1)?(i=e[1],s=Oe(a),e=ke(a,e)):s=-1);-1!==s;){const t=e[1];if($e(o,s,t.data)){const t=Ge(s,e,n,i,r,u);if(t!==je)return t}a=e[s+8],a!==we&&Je(r,e[1].data[s+8]===u)&&$e(o,s,e)?(i=t,s=Oe(a),e=ke(a,e)):s=-1}}}return Ze(e,n,r,i)}const je={};function Be(){return new Qe(Ht(),jt())}function Ge(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=He(a,s,n,null==r?gt(a)&&Pe:r!=s&&0!=(3&a.type),i&P.Host&&o===a);return null!==u?ze(e,s,u,a):je}function He(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Te){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(_(o[n]));const a=Ne(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?R(s.injectImpl):null;oe(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&R(u),Ne(a),s.resolving=!1,le()}}return i}function $e(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&P.Self||t&P.Host&&e)}class Qe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function Ye(t){return M(()=>{const e=t.prototype.constructor,n=e[Y]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return v(t)?()=>{const e=Ke(m(t));return e&&e()}:yt(t)}function We(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Se(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const Xe="__parameters__",tn="__prop__metadata__";function en(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function nn(t,e,n){return M(()=>{const r=en(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Xe)?t[Xe]:Object.defineProperty(t,Xe,{value:[]})[Xe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function rn(t,e,n,r){return M(()=>{const i=en(e);function o(...t){if(this instanceof o)return i.apply(this,t),this;const e=new o(...t);return function(n,i){const o=n.constructor,s=o.hasOwnProperty(tn)?o[tn]:Object.defineProperty(o,tn,{value:{}})[tn];s[i]=s.hasOwnProperty(i)&&s[i]||[],s[i].unshift(e),r&&r(n,i,...t)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=T({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function un(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),un(r,e)):e!==t&&e.push(r)}return e}function cn(t,e){t.forEach(t=>Array.isArray(t)?cn(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},mn=/\n/gm,vn="__source",yn=l({provide:String,useValue:l});let bn;function _n(t){const e=bn;return bn=t,e}function wn(t,e=P.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?D(t,void 0,e):bn.get(t,e&P.Optional?null:void 0,e)}function Tn(t,e=P.Default){return(N||wn)(m(t),e)}function Cn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=P.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const xn=Sn(nn("Inject",t=>({token:t})),-1),An=Sn(nn("Optional"),8),In=Sn(nn("SkipSelf"),4);let En;function On(t){var e;return(null===(e=function(){if(void 0===En&&(En=null,j.trustedTypes))try{En=j.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return En}())||void 0===e?void 0:e.createHTML(t))||t}class kn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pn extends kn{getTypeName(){return"HTML"}}class Nn extends kn{getTypeName(){return"Style"}}class Rn extends kn{getTypeName(){return"Script"}}class Dn extends kn{getTypeName(){return"URL"}}class Mn extends kn{getTypeName(){return"ResourceURL"}}function Ln(t){return t instanceof kn?t.changingThisBreaksApplicationSecurity:t}function Un(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof kn&&t.getTypeName()||null}function Fn(t){return new Pn(t)}function Zn(t){return new Nn(t)}function Vn(t){return new Rn(t)}function jn(t){return new Dn(t)}function Bn(t){return new Mn(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(On(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Hn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=On(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=On(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match(zn)||t.match($n)?t:"unsafe:"+t}function Qn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Kn=Qn("area,br,col,hr,img,wbr"),Wn=Qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=Qn("rp,rt"),tr=Yn(Xn,Wn),er=Yn(Kn,Yn(Wn,Qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Xn,Qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Qn("srcset"),ir=Yn(nr,rr,Qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Qn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Jn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Jn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Kn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Hn(t);return function(){try{return!!(new window.DOMParser).parseFromString(On(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return On((new sr).sanitizeChildren(dr(n)||n))}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function pr(t){const e=function(){const t=jt();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Un(t,"URL")?Ln(t):Jn(b(t))}function gr(t,e){t.__ngContext__=e}function mr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function vr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class br{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t&&t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(vr(t)):null}_findOriginalError(t){let e=t&&vr(t);for(;e&&vr(e);)e=vr(e);return e||null}}const _r=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function wr(t){return t instanceof Function?t():t}var Tr=(()=>((Tr=Tr||{})[Tr.Important=1]="Important",Tr[Tr.DashCase=2]="DashCase",Tr))();function Cr(t,e){return(void 0)(t,e)}function Sr(t){const e=t[3];return ft(e)?e[3]:e}function xr(t){return Ir(t[13])}function Ar(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Ot(r);0===t&&null!==n?null==i?Mr(e,n,a):Dr(e,n,a,i||null,!0):1===t&&null!==n?Dr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ur(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ot(n)&&Er(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];Br(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Or(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function kr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Pr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&kr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,ht+e);Br(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Nr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Br(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Rr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Rr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Rr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Rr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Te)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Ot(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&kr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Mr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function Lr(t,e,n,r,i){null!==r?Dr(t,e,n,r,i):Mr(t,e,n)}function Ur(t,e){return It(t)?t.parentNode(e):e.parentNode}function qr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===U.None||e===U.Emulated)return null}return Pt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Pt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Lr(o,i,n[a],s,!1);else Lr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return Pt(e,t);if(4&n)return Vr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return ft(n)?Vr(-1,n):Ot(n)}}if(32&n)return Cr(e,t)()||Ot(t[e.index]);{const n=Zr(t,e);return null!==n?Array.isArray(n)?n[0]:Fr(Sr(t[16]),n):Fr(t,e.next)}}return null}function Zr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Vr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function jr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&gr(Ot(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)jr(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(32&u){const s=Cr(n,r);let u;for(;u=s();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else 16&u?Gr(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Br(t,e,n,r,i,o){jr(n,r,t.firstChild,e,i,o,!1)}function Gr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],o);else jr(t,e,a,s[3],i,o,!0)}function Hr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Jr="ng-template";function Qr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Yr(t){return 4===t.type&&t.value!==Jr}function Kr(t,e,n){return e===(4!==t.type||n?t.value:Jr)}function Wr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Se(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Kr(t,u,n)||""===u&&1===e.length){if(Xr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Qr(t.attrs,c,n)){if(Xr(r))return!1;s=!0}continue}const l=ti(8&r?"class":u,i,Yr(t),n);if(-1===l){if(Xr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(Xr(r))return!1;s=!0}}}}else{if(!s&&!Xr(r)&&!Xr(u))return!1;if(s&&Xr(u))continue;s=!1,r=u|1&r}}return Xr(r)||s}function Xr(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wr(t,e[r],n))return!0;return!1}function ni(t,e){return t?":not("+e.trim()+")":e}function ri(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Xr(s)||(e+=ni(o,i),i=""),r=s,o=o||!Xr(r);n++}return""!==i&&(e+=ni(o,i)),e}const ii={};function oi(t){si(Bt(),jt(),de()+t,Yt())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&me(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}fe(n)}function ai(t,e){return t<<17|e<<2}function ui(t){return t>>17&32767}function ci(t){return 2|t}function li(t){return(131068&t)>>2}function hi(t,e){return-131069&t|e<<2}function di(t){return 1|t}function fi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];re(i),n.contentQueries(2,e[o],o)}}}function pi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function gi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=zt(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Zt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Zt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function mi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vi(t,e,n){se(e);try{const r=t.viewQuery;null!==r&&$i(1,r,n);const i=t.template;null!==i&&_i(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fi(t,e),t.staticViewQueries&&$i(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ji(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,he()}}function yi(t,e,n,r){const i=e[2];if(256==(256&i))return;se(e);const o=Yt();try{qt(e),Zt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&_i(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),ye(e,0)}if(function(t){for(let e=xr(t);null!==e;e=Ar(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=Ar(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&yi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&fi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)fe(~r);else{const i=r,o=n[++t],s=n[++t];te(o,i),s(2,e[i])}}}finally{fe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&$i(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{he()}}function bi(t,e,n,r){const i=e[10],o=!Yt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&vi(t,e,r),yi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function _i(t,e,n,r,i){const o=de(),s=2&r;try{fe(-1),s&&e.length>lt&&si(t,e,lt,Yt()),n(r,i)}finally{fe(o)}}function wi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ti(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||De(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Li(e,n,r);const u=ze(e,t,a,n);gr(u,e),null!==s&&Ui(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Pt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Zt.lFrame.currentDirectiveIndex;try{fe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pi(r,i)}}finally{fe(-1),ee(s)}}(t,e,n))}function Ci(t,e,n=Pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Si(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=xi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function xi(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ii);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ai(t,e,n,r){const i=Qi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Yi(t).push(r,i.length-1))}function Ii(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ei(t,e,n,r,i,o,s,a){const u=Pt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),gt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Oi(t,e,n,r){let i=!1;if(Vt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ei(n,s.selectors,!1)&&(i||(i=[]),qe(De(n,e),t,s.type),vt(s)?(Ni(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Di(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=mi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Mi(t,n,e,u,c),Ri(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Yr(e)?null:qi(n,i);o.push(c),s=Ii(n,u,s),a=Ii(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function ki(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ni(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ri(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Di(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new Te(o,vt(i),null);t.blueprint[r]=s,n[r]=s,ki(t,e,0,r,mi(t,n,i.hostVars,ii),i)}function Li(t,e,n){const r=Pt(e,t),i=Si(n),o=t[10],s=Bi(t,pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ui(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function qi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Fi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Zi(t,e){const n=Dt(e,t);if(Lt(n)){const t=n[1];80&n[2]?yi(t,n,t.template,n[8]):n[5]>0&&Vi(n)}}function Vi(t){for(let n=xr(t);null!==n;n=Ar(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];yi(t,e,t.template,e[8])}else e[5]>0&&Vi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Lt(r)&&r[5]>0&&Vi(r)}}function ji(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),vi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Gi(t){for(;t;){t[2]|=64;const e=Sr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Hi(t,e,n){const r=e[10];r.begin&&r.begin();try{yi(t,e,t.template,n)}catch(i){throw Ki(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=mr(n),i=r[1];bi(i,r,i.template,n)}}(t[8])}function $i(t,e,n){re(0),e(t,n)}const Ji=(()=>Promise.resolve(null))();function Qi(t){return t[7]||(t[7]=[])}function Yi(t){return t.cleanup||(t.cleanup=[])}function Ki(t,e){const n=t[9],r=n?n.get(br,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=f(i,t):2==o&&(r=f(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const to=new on("INJECTOR",-1);class eo{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const no=new on("Set Injector scope."),ro={},io={};let oo;function so(){return void 0===oo&&(oo=new eo),oo}function ao(t,e=null,n=null,r){return new uo(t,n,e||so(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&cn(e,n=>this.processProvider(n,t,e)),cn([t],t=>this.processInjectorType(t,[],i)),this.records.set(to,ho(void 0,this));const o=this.records.get(no);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=P.Default){this.assertNotDestroyed();const r=_n(this),i=R(void 0);try{if(!(n&P.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof on)&&S(t);e=n&&this.injectableDefInScope(n)?ho(co(t),ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&P.Self?so():this.parent).get(t,e=n&P.Optional&&e===gn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[vn]&&i.unshift(e[vn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{R(i),_n(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=A(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=A(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{cn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];cn(r,t=>this.processProvider(t,n,r||G))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,ho(a,ro));const u=r.providers;if(null!=u&&!s){const e=t;cn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=po(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return fo(t)?ho(void 0,t.useValue):ho(lo(t),ro)}(t);if(po(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ho(void 0,ro,!0),e.factory=()=>Cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ro&&(e.value=io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function co(t){const e=S(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[O]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function lo(t,e,n){let r;if(po(t)){const e=m(t);return yt(e)||co(e)}if(fo(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||co(e);r=()=>new e(...Cn(t.deps))}var i;return r}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fo(t){return null!==t&&"object"==typeof t&&yn in t}function po(t){return"function"==typeof t}const go=function(t,e,n){return function(t,e=null,n=null,r){const i=ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class mo{static create(t,e){return Array.isArray(t)?go(t,e,""):go(t.providers,t.parent,t.name||"")}}function vo(t,e){ge(mr(t)[1],Ht())}function yo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bo(t.inputs),e.declaredInputs=bo(t.declaredInputs),e.outputs=bo(t.outputs);const n=i.hostBindings;n&&To(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&_o(t,o),s&&wo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===yo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function bo(t){return t===B?{}:t===G?[]:t}function _o(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function To(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}mo.THROW_IF_NOT_FOUND=gn,mo.NULL=new eo,mo.\u0275prov=T({token:mo,providedIn:"any",factory:()=>Tn(to)}),mo.__NG_ELEMENT_ID__=-1;let Co=null;function So(){if(!Co){const t=j.Symbol;if(t&&t.iterator)Co=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Co=n)}}}return Co}class xo{constructor(t){this.wrapped=t}static wrap(t){return new xo(t)}static unwrap(t){return xo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof xo}}function Ao(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&So()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Eo(t,e,n){return t[e]=n}function Oo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ko(t,e,n,r){const i=jt();return Oo(i,Xt(),e)&&(Bt(),function(t,e,n,r,i,o){const s=Pt(t,e);!function(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(pe(),i,t,e,n,r)),ko}function Po(t,e,n,r,i,o,s,a){const u=jt(),c=Bt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=gi(e,t,4,s||null,Ut(c,a));Oi(e,n,l,Ut(c,u)),ge(e,l);const h=l.tViews=xi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");qr(c,u,d,h),gr(d,u),Bi(u,u[l]=Fi(d,u,d,h)),mt(h)&&Ti(c,u,h),null!=s&&Ci(u,h,a)}function No(t){return Rt(Zt.lFrame.contextLView,lt+t)}function Ro(t,e=P.Default){const n=jt();return null===n?Tn(t,e):Ve(Ht(),n,m(t),e)}function Do(t,e,n){const r=jt();return Oo(r,Xt(),e)&&Ei(Bt(),pe(),r,t,e,r[11],n,!1),Do}function Mo(t,e,n,r,i){const o=i?"class":"style";Wi(t,n,e.inputs[o],o,r)}function Lo(t,e,n,r){const i=jt(),o=Bt(),s=lt+t,a=i[11],u=i[s]=Or(a,e,Zt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=gi(e,t,2,i,Ut(a,o));return Oi(e,n,u,Ut(a,s)),null!==u.attrs&&Xi(u,u.attrs,!1),null!==u.mergedAttrs&&Xi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&zr(a,u,h);const d=c.styles;null!==d&&Hr(a,u,d),64!=(64&c.flags)&&qr(o,i,u,c),0===Zt.lFrame.elementDepthCount&&gr(u,i),Zt.lFrame.elementDepthCount++,mt(c)&&(Ti(o,i,c),wi(o,c,i)),null!==r&&Ci(i,c)}function Uo(){let t=Ht();Jt()?Qt():(t=t.parent,$t(t,!1));const e=t;Zt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(ge(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Mo(n,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Mo(n,e,jt(),e.stylesWithoutHost,!1)}function qo(t,e,n,r){Lo(t,e,n,r),Uo()}function Fo(t,e,n){const r=jt(),i=Bt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ut(o,r),a=gi(e,t,8,"ng-container",s);return null!==s&&Xi(a,s,!0),Oi(e,n,a,Ut(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");qr(i,r,a,s),gr(a,r),mt(s)&&(Ti(i,r,s),wi(i,s,r)),null!=n&&Ci(r,s)}function Zo(){let t=Ht();const e=Bt();Jt()?Qt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(ge(e,t),pt(t)&&e.queries.elementEnd(t))}function Vo(){return jt()}function jo(t){return!!t&&"function"==typeof t.then}function Bo(t){return!!t&&"function"==typeof t.subscribe}const Go=Bo;function Ho(t,e,n,r){const i=jt(),o=Bt(),s=Ht();return function(t,e,n,r,i,o,s,a){const u=mt(r),c=t.firstCreatePass&&Yi(t),l=Qi(e);let h=!0;if(3&r.type||a){const d=Pt(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(Ot(t[r.index])):r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=$o(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=$o(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=$o(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Ho}function zo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ki(t,i),!1}}function $o(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Gi(s);let a=zo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=zo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Jo(t=1){return function(t){return(Zt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Zt.lFrame.contextLView))[8]}(t)}function Qo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ui(o):li(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Yo(t[a],e)&&(u=!0,t[a+1]=r?di(n):ci(n)),a=r?ui(n):li(n)}u&&(t[n+1]=r?ci(o):di(o))}function Yo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}function Ko(t,e,n){return Xo(t,e,n,!1),Ko}function Wo(t,e){return Xo(t,e,null,!0),Wo}function Xo(t,e,n,r){const i=jt(),o=Bt(),s=function(t){const e=Zt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[de()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Zt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=es(n=ts(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ts(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==li(r))return t[ui(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ts(null,t,e,n[1],r),n=es(n,e.attrs,r),function(t,e,n,r){t[ui(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=es(r,t[o].hostAttrs,n);return es(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ui(s),u=li(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ui(t[a+1]);t[r+1]=ai(e,a),0!==e&&(t[e+1]=hi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ai(a,0),0!==a&&(t[a+1]=hi(t[a+1],r)),a=r;else t[r+1]=ai(u,0),0===a?a=r:t[u+1]=hi(t[u+1],r),u=r;l&&(t[r+1]=ci(t[r+1])),Qo(t,c,r,!0),Qo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=di(n[r+1]))}(e,c,t,r,o),s=ai(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ii&&Oo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];rs(1==(1&c)?ns(u,e,n,i,li(c),s):void 0)||(rs(o)||function(t){return 2==(2&t)}(c)&&(o=ns(u,null,n,i,a,s)),function(t,e,n,r,i){const o=It(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Tr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(de(),n),i,o))}(o,o.data[de()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=d(Ln(t)))),t}(e,n),r,s)}function ts(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=es(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function es(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ns(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ii&&(l=c?G:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!rs(h)&&(h=fn(e,r)),rs(h)&&(a=h,s))return a;const d=t[i+1];i=s?ui(d):li(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function rs(t){return void 0!==t}function is(t,e=""){const n=jt(),r=Bt(),i=t+lt,o=r.firstCreatePass?gi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);qr(r,n,s,o),$t(o,!1)}function os(t){return ss("",t,""),os}function ss(t,e,n){const r=jt(),i=function(t,e,n,r){return Oo(t,Xt(),n)?e+b(n)+r:ii}(r,t,e,n);return i!==ii&&function(t,e,n){const r=kt(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,de(),i),ss}function as(t,e,n){const r=jt();return Oo(r,Xt(),e)&&Ei(Bt(),pe(),r,t,e,r[11],n,!0),as}const us=void 0;var cs=["en",[["a","p"],["AM","PM"],us],[["AM","PM"],us,us],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],us,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],us,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",us,"{1} 'at' {0}",us],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ls={};function hs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=fs(e);if(n)return n;const r=e.split("-")[0];if(n=fs(r),n)return n;if("en"===r)return cs;throw new Error(`Missing locale data for the locale "${t}".`)}function ds(t){return hs(t)[ps.PluralCase]}function fs(t){return t in ls||(ls[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),ls[t]}var ps=(()=>((ps=ps||{})[ps.LocaleId=0]="LocaleId",ps[ps.DayPeriodsFormat=1]="DayPeriodsFormat",ps[ps.DayPeriodsStandalone=2]="DayPeriodsStandalone",ps[ps.DaysFormat=3]="DaysFormat",ps[ps.DaysStandalone=4]="DaysStandalone",ps[ps.MonthsFormat=5]="MonthsFormat",ps[ps.MonthsStandalone=6]="MonthsStandalone",ps[ps.Eras=7]="Eras",ps[ps.FirstDayOfWeek=8]="FirstDayOfWeek",ps[ps.WeekendRange=9]="WeekendRange",ps[ps.DateFormat=10]="DateFormat",ps[ps.TimeFormat=11]="TimeFormat",ps[ps.DateTimeFormat=12]="DateTimeFormat",ps[ps.NumberSymbols=13]="NumberSymbols",ps[ps.NumberFormats=14]="NumberFormats",ps[ps.CurrencyCode=15]="CurrencyCode",ps[ps.CurrencySymbol=16]="CurrencySymbol",ps[ps.CurrencyName=17]="CurrencyName",ps[ps.Currencies=18]="Currencies",ps[ps.Directionality=19]="Directionality",ps[ps.PluralCase=20]="PluralCase",ps[ps.ExtraData=21]="ExtraData",ps))();const gs="en-US";let ms=gs;function vs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ms=t.toLowerCase().replace(/_/g,"-"))}function ys(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)ys(t[o],e,n,r,i);else{const o=Bt(),s=jt();let a=po(t)?t:m(t.provide),u=lo(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(po(t)||!t.multi){const r=new Te(u,i,Ro),f=ws(a,e,i?l:l+d,h);-1===f?(qe(De(c,s),o,a),bs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ws(a,e,l+d,h),p=ws(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){qe(De(c,s),o,a);const l=function(t,e,n,r,i){const o=new Te(t,n,Ro);return o.multi=[],o.index=e,o.componentProviders=0,_s(o,i,r&&!n),o}(i?Cs:Ts,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),bs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else bs(o,t,f>-1?f:p,_s(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function bs(t,e,n,r){const i=po(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function _s(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ws(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ts(t,e,n,r){return Ss(this.multi,[])}function Cs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ss(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ss(i,o);return o}function Ss(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function xs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=vt(t);ys(n,r.data,r.blueprint,i,!0),ys(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class As{}class Is{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Es{}function Os(...t){}function ks(t,e){return new Ns(Pt(t,e))}Es.NULL=new Is;const Ps=function(){return ks(Ht(),jt())};let Ns=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ps,t})();function Rs(t){return t instanceof Ns?t.nativeElement:t}class Ds{}let Ms=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ls(),t})();const Ls=function(){const t=jt(),e=Dt(Ht().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Us=(()=>{class t{}return t.\u0275prov=T({token:t,providedIn:"root",factory:()=>null}),t})();class qs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Fs=new qs("12.1.4");class Zs{constructor(){}supports(t){return Ao(t)}create(t){return new js(t)}}const Vs=(t,e)=>e;class js{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Vs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<zs(n,r,i)?e:n,s=zs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ao(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[So()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Bs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Hs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Bs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Hs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Gs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class $s{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new Js}}class Js{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Qs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Qs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ys(){return new Ks([new Zs])}let Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ys()),deps:[[t,new In,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=T({token:t,providedIn:"root",factory:Ys}),t})();function Ws(){return new Xs([new $s])}let Xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ws()),deps:[[t,new In,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=T({token:t,providedIn:"root",factory:Ws}),t})();function ta(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ot(o)),ft(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ta(e[1],e,n,r)}const s=n.type;if(8&s)ta(t,e,n.child,r);else if(32&s){const t=Cr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Zr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Sr(e[16]);ta(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ea{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ta(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Pr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Nr(this._lView[1],this._lView)}onDestroy(t){Ai(this._lView[1],this._lView,null,t)}markForCheck(){Gi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{Hi(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Br(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class na extends ea{constructor(t){super(t),this._view=t}detectChanges(){zi(this._view)}checkNoChanges(){!function(t){Kt(!0);try{zi(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const ra=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Dt(t.index,e);return new ea(n,n)}return 47&t.type?new ea(e[16],e):null}(Ht(),jt(),16==(16&t))};let ia=(()=>{class t{}return t.__NG_ELEMENT_ID__=ra,t})();const oa=[new $s],sa=new Ks([new Zs]),aa=new Xs(oa),ua=function(){return da(Ht(),jt())};let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=ua,t})();const la=ca,ha=class extends la{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),vi(e,n,t),new ea(n)}};function da(t,e){return 4&t.type?new ha(e,t,ks(t,e)):null}class fa{}class pa{}const ga=function(){return wa(Ht(),jt())};let ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=ga,t})();const va=ma,ya=class extends va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ks(this._hostTNode,this._hostLView)}get injector(){return new Qe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(Ee(t)){const e=ke(t,this._hostLView),n=Oe(t);return new Qe(e[1].data[n+8],e)}return new Qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ba(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(fa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ya(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],ln(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Vr(i,o),a=n[11],u=Ur(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Br(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),ln(_a(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ba(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);n&&(hn(_a(this._lContainer),e),Nr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);return n&&null!=hn(_a(this._lContainer),e)?new ea(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ba(t){return t[8]}function _a(t){return t[8]||(t[8]=[])}function wa(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Ot(r);else{const n=e[11];i=n.createComment("");const r=Pt(t,e);Dr(n,Ur(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Fi(r,e,i,t),Bi(e,n)}return new ya(n,t,e)}const Ta={};class Ca extends Es{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Aa(e,this.ngModule)}}function Sa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const xa=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_r});class Aa extends As{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ri).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Sa(this.componentDef.inputs)}get outputs(){return Sa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ta,i);return o!==Ta||r===Ta?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ds,Et),s=i.get(Us,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===U.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Or(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:_r,clean:Ji,playerHandler:null,flags:0},d=xi(0,null,null,1,0,null,null,null,null,null),f=pi(null,d,h,l,null,null,o,a,s,i);let p,g;se(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=gi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Xi(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&zr(i,t,a.classes),null!==a.styles&&Hr(i,t,a.styles)));const c=r.createRenderer(t,e),l=pi(n,Si(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(De(a,n),s,e.type),Ni(s,a),Di(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Ce(a,c,["ng-version",Fs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Xr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&zr(a,c,e.join(" "))}if(g=Nt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Mi(t,r,e,mi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);gr(i,e);const o=Pt(r,e);return o&&gr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fe(a.index),ki(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pi(e,s)),s}(t,this.componentDef,f,h,[vo]),vi(d,f,null)}finally{he()}return new Ia(this.componentType,p,ks(g,f),f,g)}}class Ia extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new na(r),this.componentType=t}get injector(){return new Qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ea=new Map;class Oa extends fa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ca(this);const n=ct(t),r=t[Q]||null;r&&vs(r),this._bootstrapComponents=wr(n.bootstrap),this._r3Injector=ao(t,e,[{provide:fa,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=mo.THROW_IF_NOT_FOUND,n=P.Default){return t===mo||t===fa||t===to?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ka extends pa{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,Ea.get(i),n),Ea.set(i,n));const o=wr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Oa(this.moduleType,t)}}function Pa(t,e,n,r,i){return Ra(jt(),Wt(),t,e,n,r,i)}function Na(t,e){const n=t[e];return n===ii?void 0:n}function Ra(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=Oo(t,e,n);return Oo(t,e+1,r)||i}(t,a,i,o)?Eo(t,a+2,s?r.call(s,i,o):r(i,o)):Na(t,a+2)}function Da(t,e){const n=Bt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new y("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=yt(r.type)),s=R(Ro);try{const t=Ne(!1),e=o();return Ne(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,jt(),i,e),e}finally{R(s)}}function Ma(t,e,n){const r=t+lt,i=jt(),o=Rt(i,r);return qa(i,Ua(i,r)?function(t,e,n,r,i,o){const s=e+n;return Oo(t,s,i)?Eo(t,s+1,o?r.call(o,i):r(i)):Na(t,s+1)}(i,Wt(),e,o.transform,n,o):o.transform(n))}function La(t,e,n,r){const i=t+lt,o=jt(),s=Rt(o,i);return qa(o,Ua(o,i)?Ra(o,Wt(),e,s.transform,n,r,s):s.transform(n,r))}function Ua(t,e){return t[1].data[e].pure}function qa(t,e){return xo.isWrapped(e)&&(e=xo.unwrap(e),t[Zt.lFrame.bindingIndex]=ii),e}function Fa(t){return e=>{setTimeout(t,void 0,e)}}const Za=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Fa(u),a&&(a=Fa(a)),c&&(c=Fa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Va(){return this._results[So()]()}class ja{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=So(),n=ja.prototype;n[e]||(n[e]=Va)}get changes(){return this._changes||(this._changes=new Za)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=un(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ba{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ba(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ga{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ga(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==iu(t,e).matches&&this.queries[e].setDirty()}}class Ha{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class za{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new za(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class $a{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new $a(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ja(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===ca?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ns||r===ma||r===ca&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ja(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Qa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ks(t,e):4&t.type?da(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ns?ks(e,t):n===ca?da(e,t):n===ma?wa(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Ya(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Qa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ka(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ya(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ka(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ka(n[1],n,i,r)}}}}}return r}function Wa(t){const e=jt(),n=Bt(),r=ne();re(r+1);const i=iu(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ka(n,e,r,[]):Ya(n,e,i,r);t.reset(o,Rs),t.notifyOnChanges()}return!0}return!1}function Xa(t,e,n){const r=Bt();r.firstCreatePass&&(ru(r,new Ha(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),nu(r,jt(),e)}function tu(t,e,n,r){const i=Bt();if(i.firstCreatePass){const o=Ht();ru(i,new Ha(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}nu(i,jt(),n)}function eu(){return t=jt(),e=ne(),t[19].queries[e].queryList;var t,e}function nu(t,e,n){const r=new ja(4==(4&n));Ai(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ga),e[19].queries.push(new Ba(r))}function ru(t,e,n){null===t.queries&&(t.queries=new za),t.queries.track(new $a(e,n))}function iu(t,e){return t.queries.getByIndex(e)}const ou=rn("Input",t=>({bindingPropertyName:t})),su=new on("Application Initializer");let au=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Os,this.reject=Os,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(jo(e))t.push(e);else if(Go(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(su,8))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();const uu=new on("AppId"),cu={provide:uu,useFactory:function(){return`${lu()}${lu()}${lu()}`},deps:[]};function lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hu=new on("Platform Initializer"),du=new on("Platform ID"),fu=new on("appBootstrapListener");let pu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();const gu=new on("LocaleId"),mu=new on("DefaultCurrencyCode");class vu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const yu=function(t){return new ka(t)},bu=yu,_u=function(t){return Promise.resolve(yu(t))},wu=function(t){const e=yu(t),n=wr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Aa(n)),t},[]);return new vu(e,n)},Tu=wu,Cu=function(t){return Promise.resolve(wu(t))};let Su=(()=>{class t{constructor(){this.compileModuleSync=bu,this.compileModuleAsync=_u,this.compileModuleAndAllComponentsSync=Tu,this.compileModuleAndAllComponentsAsync=Cu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();const xu=(()=>Promise.resolve(0))();function Au(t){"undefined"==typeof Zone?xu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Iu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Za(!1),this.onMicrotaskEmpty=new Za(!1),this.onStable=new Za(!1),this.onError=new Za(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ku(t),t.isCheckStableRunning=!0,Ou(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ku(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Pu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Nu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Pu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ku(t),Ou(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Iu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Iu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Eu,Os,Os);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Eu={};function Ou(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ku(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Pu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nu(t){t._nesting--,Ou(t)}class Ru{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Za,this.onMicrotaskEmpty=new Za,this.onStable=new Za,this.onError=new Za}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Du=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Iu.assertNotInAngularZone(),Au(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Au(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(Iu))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})(),Mu=(()=>{class t{constructor(){this._applications=new Map,Fu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Fu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();class Lu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Uu(t){Fu=t}let qu,Fu=new Lu,Zu=!0,Vu=!1;function ju(){return Vu=!0,Zu}function Bu(){if(Vu)throw new Error("Cannot enable prod mode after platform setup.");Zu=!1}const Gu=new on("AllowMultipleToken");class Hu{constructor(t,e){this.name=t,this.token=e}}function zu(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let o=$u();if(!o||o.injector.get(Gu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:no,useValue:"platform"});!function(t){if(qu&&!qu.destroyed&&!qu.injector.get(Gu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");qu=t.get(Ju);const e=t.get(hu,null);e&&e.forEach(t=>t())}(mo.create({providers:t,name:r}))}return function(t){const e=$u();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function $u(){return qu&&!qu.destroyed?qu:null}let Ju=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ru:("zone.js"===t?void 0:t)||new Iu({enableLongStackTrace:ju(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Iu,useValue:n}];return n.run(()=>{const e=mo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(br,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ku(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return jo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(au);return t.runInitializers(),t.donePromise.then(()=>(vs(i.injector.get(gu,gs)||gs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Qu({},e);return function(t,e,n){const r=new ka(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Yu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(mo))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();function Qu(t,e){return Array.isArray(e)?e.reduce(Qu,t):Object.assign(Object.assign({},t),e)}let Yu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Iu.assertNotInAngularZone(),Au(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Iu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof As?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(fa),i=n.create(mo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Du,null),a=s&&i.injector.get(Mu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ku(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ku(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(Iu),Tn(mo),Tn(br),Tn(Es),Tn(au))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wu{}class Xu{}const tc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ec=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||tc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>nc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>nc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(Su),Tn(Xu,8))},t.\u0275prov=T({token:t,factory:t.\u0275fac}),t})();function nc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const rc=function(t){return null},ic=zu(null,"core",[{provide:du,useValue:"unknown"},{provide:Ju,deps:[mo]},{provide:Mu,deps:[]},{provide:pu,deps:[]}]),oc=[{provide:Yu,useClass:Yu,deps:[Iu,mo,br,Es,au]},{provide:xa,deps:[Iu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:au,useClass:au,deps:[[new An,su]]},{provide:Su,useClass:Su,deps:[]},cu,{provide:Ks,useFactory:function(){return sa},deps:[]},{provide:Xs,useFactory:function(){return aa},deps:[]},{provide:gu,useFactory:function(t){return vs(t=t||"undefined"!=typeof $localize&&$localize.locale||gs),t},deps:[[new xn(gu),new An,new In]]},{provide:mu,useValue:"USD"}];let sc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(Yu))},t.\u0275mod=rt({type:t}),t.\u0275inj=C({providers:oc}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>A,xv:()=>b,Dh:()=>y,HU:()=>f,GT:()=>v,sI:()=>S,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>T});var r=n(7771),i=n(3637),o=n(3342),s=n(2639),a=n(309),u=n(3018),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},y=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),_=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const T=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const x={provide:class{},useFactory:w,deps:[y,u.R0b,[new u.FiY,b]]};let A=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:y,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[x]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=n(4762),s=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.29",void 0),t.registerVersion("fire-js","")}(_);const w=_},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(4762),i=n(4685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>_,ZR:()=>b,r3:()=>C,Sg:()=>u,ne:()=>S,p$:()=>o,ZB:()=>s,m9:()=>I,z$:()=>c,jU:()=>d,ru:()=>f,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>y,Mn:()=>v});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function d(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return c().indexOf("MSAppHost/")>=0}function y(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,_.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a,r);return u},t}();function w(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){var n=new x(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function A(){}function I(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.8.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(7574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(7574),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2639:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(6561);class f extends r.y{constructor(t,e=0,n=h){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(0,d.k)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(7574),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(6465);const i=new(n(6102).v)(r.o),o=i},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},6561:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var r=n(9796);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},8264:(t,e,n)=>{"use strict";var r=n(3018);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=(0,r.LFG)(s).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const y=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(y,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(y,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:T,token:t,providedIn:"root"}),t})();function T(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function C(t){return t.replace(/\/index.html$/,"")}const S={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var x=(()=>((x=x||{})[x.Decimal=0]="Decimal",x[x.Percent=1]="Percent",x[x.Currency=2]="Currency",x[x.Scientific=3]="Scientific",x))(),A=(()=>((A=A||{})[A.Zero=0]="Zero",A[A.One=1]="One",A[A.Two=2]="Two",A[A.Few=3]="Few",A[A.Many=4]="Many",A[A.Other=5]="Other",A))(),I=(()=>((I=I||{})[I.Decimal=0]="Decimal",I[I.Group=1]="Group",I[I.List=2]="List",I[I.PercentSign=3]="PercentSign",I[I.PlusSign=4]="PlusSign",I[I.MinusSign=5]="MinusSign",I[I.Exponential=6]="Exponential",I[I.SuperscriptingExponent=7]="SuperscriptingExponent",I[I.PerMille=8]="PerMille",I[I[1/0]=9]="Infinity",I[I.NaN=10]="NaN",I[I.TimeSeparator=11]="TimeSeparator",I[I.CurrencyDecimal=12]="CurrencyDecimal",I[I.CurrencyGroup=13]="CurrencyGroup",I))();function E(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===I.CurrencyDecimal)return n[r.wAp.NumberSymbols][I.Decimal];if(e===I.CurrencyGroup)return n[r.wAp.NumberSymbols][I.Group]}return i}const O=r.kL8,k=/^(\d+)?\.((\d+)(-(\d+))?)?$/,P=".",N="0";function R(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class D{}let M=(()=>{class t extends D{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(O(e||this.locale)(t)){case A.Zero:return"zero";case A.One:return"one";case A.Two:return"two";case A.Few:return"few";case A.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function L(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class U{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let q=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Gp){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new U(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new F(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new F(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class F{constructor(t,e){this.record=t,this.view=e}}let Z=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new V,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){j("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){j("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class V{constructor(){this.$implicit=null,this.ngIf=null}}function j(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}function B(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class G{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class H{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const z=new H,$=new G;let J=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return z;if((0,r.F4k)(e))return $;throw B(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),Q=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n=this._defaultCurrencyCode,i="symbol",o,s){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;s=s||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return(0,r.cg1)(t)[r.wAp.Currencies]}(n)[t]||S[t]||[],o=i[1];return"narrow"===e&&"string"==typeof o?o:i[0]||t}(a,"symbol"===i?"wide":"narrow",s):i);try{return function(t,e,n,i,o){const s=function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(P)?i.split(P):[i.substring(0,i.lastIndexOf(N)+1),i.substring(i.lastIndexOf(N)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===N?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return(0,r.cg1)(t)[r.wAp.NumberFormats][e]}(e,x.Currency),E(e,I.MinusSign));return s.minFrac=function(t){let e;const n=S[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),s.maxFrac=s.minFrac,function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(P))>-1&&(s=s.replace(P,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===N;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===N;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(k);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=R(e)),null!=n&&(h=R(n)),null!=r?d=R(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const v=[];for(f.length>=e.lgSize&&v.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)v.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&v.unshift(f.join("")),a=v.join(E(n,r)),m.length&&(a+=E(n,i)+m.join("")),g&&(a+=E(n,I.Exponential)+"+"+g)}else a=E(n,I.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,s,e,I.CurrencyGroup,I.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),s,a,n,o)}catch(u){throw B(t,u.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16),r.Y36(r.EJc,16))},t.\u0275pipe=r.Yjl({name:"currency",type:t,pure:!0}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:D,useClass:M}]}),t})();function K(t){return"server"===t}let W=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new X((0,r.LFG)(s),window)}),t})();class X{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=tt(this.window.history)||tt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Gp){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Gp){return!1}}}function tt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class et{}class nt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new nt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(it=it||document.querySelector("base"),it?it.getAttribute("href"):null);return null==e?null:function(t){rt=rt||document.createElement("a"),rt.setAttribute("href",t);const e=rt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){it=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return L(document.cookie,t)}}let rt,it=null;const ot=new r.OlP("TRANSITION_ID"),st=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ot,s,r.zs3],multi:!0}];class at{static init(){(0,r.VLi)(new at)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let ut=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ct=new r.OlP("EventManagerPlugins");let lt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ct),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ht{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let dt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t extends dt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(pt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pt))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function pt(t){o().remove(t)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mt=/%COMP%/g;function vt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?vt(t,i,n):(i=i.replace(mt,t),n.push(i))}return n}function yt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let bt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new _t(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new wt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new Tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=vt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(lt),r.LFG(ft),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class _t{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(gt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=gt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=gt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,yt(n)):this.eventManager.addEventListener(t,e,yt(n))}}class wt extends _t{constructor(t,e,n,r){super(t),this.component=n;const i=vt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(mt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(mt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Tt extends _t{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=vt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ct=(()=>{class t extends ht{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const St=["alt","control","meta","shift"],xt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},At={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},It={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Et=(()=>{class t extends ht{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(St.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&At.hasOwnProperty(e)&&(e=At[e]))}return xt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),St.forEach(r=>{r!=n&&(0,It[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ot=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){nt.makeCurrent(),at.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),kt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:ct,useClass:Ct,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:ct,useClass:Et,multi:!0,deps:[s]},[],{provide:bt,useClass:bt,deps:[lt,ft,r.AFp]},{provide:r.FYo,useExisting:bt},{provide:dt,useExisting:ft},{provide:ft,useClass:ft,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:lt,useClass:lt,deps:[ct,r.R0b]},{provide:et,useClass:ut,deps:[]},[]];let Pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:ot,useExisting:r.AFp},st]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:kt,imports:[Y,r.hGG]}),t})();"undefined"!=typeof window&&window;var Nt=n(57),Rt=n(9765),Dt=n(5917),Mt=n(7574),Lt=n(4402),Ut=n(6682),qt=n(309),Ft=n(8002),Zt=n(5345);function Vt(t,e){return"function"==typeof e?n=>n.pipe(Vt((n,r)=>(0,Lt.D)(t(n,r)).pipe((0,Ft.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new jt(t))}class jt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Bt(t,this.project))}}class Bt extends Zt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Zt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Zt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Gt=n(7771),Ht=n(5319),zt=n(7971),$t=n(8858);class Jt extends Rt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Qt(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new zt.N;if(this.isStopped||this.hasError?o=Ht.w.EMPTY:(this.observers.push(t),o=new $t.W(this,t)),r&&t.add(t=new qt.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Gt.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Qt{constructor(t,e){this.time=t,this.value=e}}function Yt(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Jt(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Kt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Wt=n(7393);function Xt(t,e){return function(n){return n.lift(new te(t,e))}}class te{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ee(t,this.predicate,this.thisArg))}}class ee extends Wt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ne=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var re=n(9193);function ie(t){return e=>0===t?(0,re.c)():e.lift(new oe(t))}class oe{constructor(t){if(this.total=t,this.total<0)throw new ne}call(t,e){return e.subscribe(new se(t,this.total))}}class se extends Wt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ae(t=null){return e=>e.lift(new ue(t))}class ue{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ce(t,this.defaultValue))}}class ce extends Wt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function le(t=fe){return e=>e.lift(new he(t))}class he{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new de(t,this.errorFactory))}}class de extends Wt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(sm){t=sm}this.destination.error(t)}}}function fe(){return new Kt}var pe=n(4487);function ge(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):pe.y,ie(1),n?ae(e):le(()=>new Kt))}function me(t,e){return e?Vt(()=>t,e):Vt(()=>t)}var ve=n(2639);const ye=new r.OlP("angularfire2.auth.use-emulator"),be=new r.OlP("angularfire2.auth.settings"),_e=new r.OlP("angularfire2.auth.tenant-id"),we=new r.OlP("angularfire2.auth.langugage-code"),Te=new r.OlP("angularfire2.auth.use-device-language"),Ce=new r.OlP("angularfire.auth.persistence");let Se=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Nt.HU(i),d=(0,Nt.ss)(h),f=new Rt.xQ,p=(0,Dt.of)(void 0).pipe((0,qt.QV)(h.outsideAngular),Vt(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,1336)))),(0,Ft.U)(()=>(0,Nt.on)(t,i,e)),(0,Ft.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,Nt.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Yt({bufferSize:1,refCount:!1}));if(K(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Dt.of)(null);else{p.pipe(ge()).subscribe();const t=p.pipe(Vt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Yt({bufferSize:1,refCount:!1})),e=t=>new Mt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Vt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Vt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(me(n),(0,ve.R)(h.outsideAngular),(0,qt.QV)(h.insideAngular)),this.user=t.pipe(me(r),(0,ve.R)(h.outsideAngular),(0,qt.QV)(h.insideAngular)),this.idToken=this.user.pipe(Vt(t=>t?(0,Lt.D)(t.getIdToken()):(0,Dt.of)(null))),this.idTokenResult=this.user.pipe(Vt(t=>t?(0,Lt.D)(t.getIdTokenResult()):(0,Dt.of)(null))),this.credential=(0,Ut.T)(t,f,this.authState.pipe(Xt(t=>!t))).pipe((0,Ft.U)(t=>(null==t?void 0:t.user)?t:null),(0,ve.R)(h.outsideAngular),(0,qt.QV)(h.insideAngular))}return(0,Nt.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ye,8),r.LFG(be,8),r.LFG(_e,8),r.LFG(we,8),r.LFG(Te,8),r.LFG(Ce,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ye,8),r.LFG(be,8),r.LFG(_e,8),r.LFG(we,8),r.LFG(Te,8),r.LFG(Ce,8))},token:t,providedIn:"any"}),t})(),xe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Se]}),t})();var Ae=n(3637),Ie=n(3282);function Ee(...t){return(0,Ie.J)(1)((0,Dt.of)(...t))}var Oe=n(4869);function ke(...t){const e=t[t.length-1];return(0,Oe.K)(e)?(t.pop(),n=>Ee(t,n,e)):e=>Ee(t,e)}function Pe(){return t=>t.lift(new Ne)}class Ne{call(t,e){return e.subscribe(new Re(t))}}class Re extends Wt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function De(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Me(t,e,n))}}class Me{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Le(t,this.accumulator,this.seed,this.hasSeed))}}class Le extends Wt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Ue{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new qe(t,this.compare,this.keySelector))}}class qe extends Wt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Fe=n(2329),Ze=n(9759),Ve=n(4762),je=n(4685),Be=n(300),Ge=function(t,e){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function He(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ze,$e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Je=Je||{},Qe=$e||self;function Ye(){}function Ke(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function We(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Xe="closure_uid_"+(1e9*Math.random()>>>0),tn=0;function en(t,e,n){return t.call.apply(t.bind,arguments)}function nn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function rn(t,e,n){return(rn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?en:nn).apply(null,arguments)}function on(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function sn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function an(){this.s=this.s,this.o=this.o}var un={};an.prototype.s=!1,an.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Xe)&&t[Xe]||(t[Xe]=++tn)}(this);delete un[t]}},an.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ln=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function hn(t){return Array.prototype.concat.apply([],arguments)}function dn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function fn(t){return/^[\s\xa0]*$/.test(t)}var pn,gn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function mn(t,e){return-1!=t.indexOf(e)}function vn(t,e){return t<e?-1:t>e?1:0}t:{var yn=Qe.navigator;if(yn){var bn=yn.userAgent;if(bn){pn=bn;break t}}pn=""}function _n(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function wn(t){var e={};for(var n in t)e[n]=t[n];return e}var Tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Tn.length;o++)n=Tn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Sn(t){return Sn[" "](t),t}Sn[" "]=Ye;var xn,An,In=mn(pn,"Opera"),En=mn(pn,"Trident")||mn(pn,"MSIE"),On=mn(pn,"Edge"),kn=On||En,Pn=mn(pn,"Gecko")&&!(mn(pn.toLowerCase(),"webkit")&&!mn(pn,"Edge"))&&!(mn(pn,"Trident")||mn(pn,"MSIE"))&&!mn(pn,"Edge"),Nn=mn(pn.toLowerCase(),"webkit")&&!mn(pn,"Edge");function Rn(){var t=Qe.document;return t?t.documentMode:void 0}t:{var Dn="",Mn=(An=pn,Pn?/rv:([^\);]+)(\)|;)/.exec(An):On?/Edge\/([\d\.]+)/.exec(An):En?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(An):Nn?/WebKit\/(\S+)/.exec(An):In?/(?:Version)[ \/]?(\S+)/.exec(An):void 0);if(Mn&&(Dn=Mn?Mn[1]:""),En){var Ln=Rn();if(null!=Ln&&Ln>parseFloat(Dn)){xn=String(Ln);break t}}xn=Dn}var Un={};var qn=Qe.document&&En&&(Rn()||parseInt(xn,10))||void 0,Fn=function(){if(!Qe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Qe.addEventListener("test",Ye,e),Qe.removeEventListener("test",Ye,e)}catch(n){}return t}();function Zn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Vn(t,e){if(Zn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Pn){t:{try{Sn(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:jn[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vn.Z.h.call(this)}}Zn.prototype.h=function(){this.defaultPrevented=!0},sn(Vn,Zn);var jn={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Bn="closure_listenable_"+(1e6*Math.random()|0),Gn=0;function Hn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Gn,this.ca=this.fa=!1}function zn(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function $n(t){this.src=t,this.g={},this.h=0}function Jn(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=cn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(zn(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Qn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}$n.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Qn(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Hn(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Yn="closure_lm_"+(1e6*Math.random()|0),Kn={};function Wn(t,e,n,r,i){if(r&&r.once)return tr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wn(t,e[o],n,r,i);return null}return n=ar(n),t&&t[Bn]?t.N(e,n,We(r)?!!r.capture:!!r,i):Xn(t,e,n,!1,r,i)}function Xn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=We(i)?!!i.capture:!!i,a=or(t);if(a||(t[Yn]=a=new $n(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ir;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Fn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)tr(t,e[o],n,r,i);return null}return n=ar(n),t&&t[Bn]?t.O(e,n,We(r)?!!r.capture:!!r,i):Xn(t,e,n,!0,r,i)}function er(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)er(t,e[o],n,r,i);else r=We(r)?!!r.capture:!!r,n=ar(n),t&&t[Bn]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Qn(o=t.g[e],n,r,i))&&(zn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=or(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Qn(e,n,r,i)),(n=-1<t?e[t]:null)&&nr(n))}function nr(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Bn])Jn(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=or(e))?(Jn(n,t),0==n.h&&(n.src=null,e[Yn]=null)):zn(t)}}}function rr(t){return t in Kn?Kn[t]:Kn[t]="on"+t}function ir(t,e){if(t.ca)t=!0;else{e=new Vn(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&nr(t),t=n.call(r,e)}return t}function or(t){return(t=t[Yn])instanceof $n?t:null}var sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ar(t){return"function"==typeof t?t:(t[sr]||(t[sr]=function(e){return t.handleEvent(e)}),t[sr])}function ur(){an.call(this),this.i=new $n(this),this.P=this,this.I=null}function cr(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Zn(e,t);else if(e instanceof Zn)e.target=e.target||t;else{var i=e;Cn(e=new Zn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=lr(s,r,!0,e)&&i}if(i=lr(s=e.g=t,r,!0,e)&&i,i=lr(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=lr(s=e.g=n[o],r,!1,e)&&i}function lr(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Jn(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}sn(ur,an),ur.prototype[Bn]=!0,ur.prototype.removeEventListener=function(t,e,n,r){er(this,t,e,n,r)},ur.prototype.M=function(){if(ur.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)zn(n[r]);delete e.g[t],e.h--}}this.I=null},ur.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ur.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var hr=Qe.JSON.stringify;function dr(){var t=_r,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fr,pr=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=gr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),gr=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new mr},function(t){return t.reset()}),mr=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function vr(t){Qe.setTimeout(function(){throw t},0)}function yr(t,e){fr||function(){var t=Qe.Promise.resolve(void 0);fr=function(){t.then(wr)}}(),br||(fr(),br=!0),_r.add(t,e)}var br=!1,_r=new pr;function wr(){for(var t;t=dr();){try{t.h.call(t.g)}catch(n){vr(n)}var e=gr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}br=!1}function Tr(t,e){ur.call(this),this.h=t||1,this.g=e||Qe,this.j=rn(this.kb,this),this.l=Date.now()}function Cr(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Sr(t,e,n){if("function"==typeof t)n&&(t=rn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=rn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Qe.setTimeout(t,e||0)}function xr(t){t.g=Sr(function(){t.g=null,t.i&&(t.i=!1,xr(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}sn(Tr,ur),(ze=Tr.prototype).da=!1,ze.S=null,ze.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cr(this,"tick"),this.da&&(Cr(this),this.start()))}},ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ze.M=function(){Tr.Z.M.call(this),Cr(this),delete this.g};var Ar=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ge(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:xr(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Qe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(an);function Ir(t){an.call(this),this.h=t,this.g={}}sn(Ir,an);var Er=[];function Or(t,e,n,r){Array.isArray(n)||(n&&(Er[0]=n.toString()),n=Er);for(var i=0;i<n.length;i++){var o=Wn(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function kr(t){_n(t.g,function(t,e){this.g.hasOwnProperty(e)&&nr(t)},t),t.g={}}function Pr(){this.g=!0}function Nr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return hr(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ir.prototype.M=function(){Ir.Z.M.call(this),kr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pr.prototype.Aa=function(){this.g=!1},Pr.prototype.info=function(){};var Rr={},Dr=null;function Mr(){return Dr=Dr||new ur}function Lr(t){Zn.call(this,Rr.Ma,t)}function Ur(t){var e=Mr();cr(e,new Lr(e,t))}function qr(t,e){Zn.call(this,Rr.STAT_EVENT,t),this.stat=e}function Fr(t){var e=Mr();cr(e,new qr(e,t))}function Zr(t,e){Zn.call(this,Rr.Na,t),this.size=e}function Vr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Qe.setTimeout(function(){t()},e)}Rr.Ma="serverreachability",sn(Lr,Zn),Rr.STAT_EVENT="statevent",sn(qr,Zn),Rr.Na="timingevent",sn(Zr,Zn);var jr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Br={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gr(){}function Hr(){}Gr.prototype.h=null;var zr,$r={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jr(){Zn.call(this,"d")}function Qr(){Zn.call(this,"c")}function Yr(){}function Kr(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ir(this),this.P=Xr,this.W=new Tr(t=kn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wr}function Wr(){this.i=null,this.g="",this.h=!1}sn(Jr,Zn),sn(Qr,Zn),sn(Yr,Gr),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},zr=new Yr;var Xr=45e3,ti={},ei={};function ni(t,e,n){t.K=1,t.v=xi(bi(e)),t.s=n,t.U=!0,ri(t,null)}function ri(t,e){t.F=Date.now(),ai(t),t.A=bi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),qi(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Wr,t.g=Zo(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ar(rn(t.Ia,t,t.g),t.O)),Or(t.V,t.g,"readystatechange",t.gb),e=t.H?wn(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ur(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function ii(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function oi(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=si(t,n))==ei){4==e&&(t.o=4,Fr(14),i=!1),Nr(t.j,t.m,null,"[Incomplete Response]");break}if(r==ti){t.o=4,Fr(15),Nr(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Nr(t.j,t.m,r,null),di(t,r)}ii(t)&&r!=ei&&r!=ti&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Fr(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),No(e),e.L=!0,Fr(11))):(Nr(t.j,t.m,n,"[Invalid Chunked Response]"),hi(t),li(t))}function si(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ei:(n=Number(e.substring(n,r)),isNaN(n)?ti:(r+=1)+n>e.length?ei:(e=e.substr(r,n),t.C=r+n,e))}function ai(t){t.Y=Date.now()+t.P,ui(t,t.P)}function ui(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Vr(rn(t.eb,t),e)}function ci(t){t.B&&(Qe.clearTimeout(t.B),t.B=null)}function li(t){0==t.l.G||t.I||Mo(t.l,t)}function hi(t){ci(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Cr(t.W),kr(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function di(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Hi(n.i,t)))if(n.I=t.N,!t.J&&Hi(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Do(n),Co(n)}Po(n),Fr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Vr(rn(n.ab,n),6e3));if(1>=Gi(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Uo(n,11)}else if((t.J||n.g==t)&&Do(n),!fn(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(mn(l,"spdy")||mn(l,"quic")||mn(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(zi(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Si(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Fo(r,r.H?r.la:null,r.W),f.J){$i(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(ci(p),ai(p)),r.g=f}else ko(r);0<n.l.length&&Ao(n)}else"stop"!=o[0]&&"close"!=o[0]||Uo(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Uo(n,7):To(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ur(4)}catch(o){}}function fi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ke(t)||"string"==typeof t)ln(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Ke(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Ke(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function pi(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pi)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gi(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];mi(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)mi(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ze=Kr.prototype).setTimeout=function(t){this.P=t},ze.gb=function(t){t=t.target;var e=this.L;e&&3==vo(t)?e.l():this.Ia(t)},ze.Ia=function(t){try{if(t==this.g)t:{var e=vo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||kn||this.g&&(this.h.h||this.g.ga()||yo(this.g)))){this.I||4!=e||7==n||Ur(8==n||0>=r?3:2),ci(this);var i=this.g.ba();this.N=i;e:if(ii(this)){var o=yo(this.g);t="";var s=o.length,a=4==vo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hi(this),li(this);var u="";break e}this.h.i=new Qe.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fn(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Fr(12),hi(this),li(this);break t}Nr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,di(this,i)}this.U?(oi(this,e,u),kn&&this.i&&3==e&&(Or(this.V,this.W,"tick",this.fb),this.W.start())):(Nr(this.j,this.m,u,null),di(this,u)),4==e&&hi(this),this.i&&!this.I&&(4==e?Mo(this.l,this):(this.i=!1,ai(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),hi(this),li(this)}}}catch(e){}},ze.fb=function(){if(this.g){var t=vo(this.g),e=this.g.ga();this.C<e.length&&(ci(this),oi(this,t,e),this.i&&4!=t&&ai(this))}},ze.cancel=function(){this.I=!0,hi(this)},ze.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ur(3),Fr(17)),hi(this),this.o=2,li(this)):ui(this,this.Y-t)},(ze=pi.prototype).R=function(){gi(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ze.T=function(){return gi(this),this.g.concat()},ze.get=function(t,e){return mi(this.h,t)?this.h[t]:e},ze.set=function(t,e){mi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ze.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var vi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof yi){this.g=void 0!==e?e:t.g,_i(this,t.j),this.s=t.s,wi(this,t.i),Ti(this,t.m),this.l=t.l,e=t.h;var n=new Di;n.i=e.i,e.g&&(n.g=new pi(e.g),n.h=e.h),Ci(this,n),this.o=t.o}else t&&(n=String(t).match(vi))?(this.g=!!e,_i(this,n[1]||"",!0),this.s=Ai(n[2]||""),wi(this,n[3]||"",!0),Ti(this,n[4]),this.l=Ai(n[5]||"",!0),Ci(this,n[6]||"",!0),this.o=Ai(n[7]||"")):(this.g=!!e,this.h=new Di(null,this.g))}function bi(t){return new yi(t)}function _i(t,e,n){t.j=n?Ai(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wi(t,e,n){t.i=n?Ai(e,!0):e}function Ti(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ci(t,e,n){e instanceof Di?(t.h=e,function(t,e){e&&!t.j&&(Mi(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Li(this,e),qi(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Ii(e,Ni)),t.h=new Di(e,t.g))}function Si(t,e,n){t.h.set(e,n)}function xi(t){return Si(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ai(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ii(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ei),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ei(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ii(e,Oi,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ii(e,Oi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ii(n,"/"==n.charAt(0)?Pi:ki,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ii(n,Ri)),t.join("")};var Oi=/[#\/\?@]/g,ki=/[#\?:]/g,Pi=/[#\?]/g,Ni=/[#\?@]/g,Ri=/#/g;function Di(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Mi(t){t.g||(t.g=new pi,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Li(t,e){Mi(t),e=Fi(t,e),mi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,mi((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gi(t)))}function Ui(t,e){return Mi(t),e=Fi(t,e),mi(t.g.h,e)}function qi(t,e,n){Li(t,e),0<n.length&&(t.i=null,t.g.set(Fi(t,e),dn(n)),t.h+=n.length)}function Fi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ze=Di.prototype).add=function(t,e){Mi(this),this.i=null,t=Fi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ze.forEach=function(t,e){Mi(this),this.g.forEach(function(n,r){ln(n,function(n){t.call(e,n,r,this)},this)},this)},ze.T=function(){Mi(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ze.R=function(t){Mi(this);var e=[];if("string"==typeof t)Ui(this,t)&&(e=hn(e,this.g.get(Fi(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=hn(e,t[n])}return e},ze.set=function(t,e){return Mi(this),this.i=null,Ui(this,t=Fi(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ze.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Zi=function(t,e){this.h=t,this.g=e};function Vi(t){this.l=t||ji,t=Qe.PerformanceNavigationTiming?0<(t=Qe.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Qe.g&&Qe.g.Ea&&Qe.g.Ea()&&Qe.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ji=10;function Bi(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Gi(t){return t.h?1:t.g?t.g.size:0}function Hi(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zi(t,e){t.g?t.g.add(e):t.h=e}function $i(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ji(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=He(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return dn(t.i)}function Qi(){}function Yi(){this.g=new Qi}function Ki(t,e,n){var r=n||"";try{fi(t,function(t,n){var i=t;We(t)&&(i=hr(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(sm){throw e.push(r+"type="+encodeURIComponent("_badmap")),sm}}function Wi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Xi(t){this.l=t.$b||null,this.j=t.ib||!1}function to(t,e){ur.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=eo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vi.prototype.cancel=function(){var t,e;if(this.i=Ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=He(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Qi.prototype.stringify=function(t){return Qe.JSON.stringify(t,void 0)},Qi.prototype.parse=function(t){return Qe.JSON.parse(t,void 0)},sn(Xi,Gr),Xi.prototype.g=function(){return new to(this.l,this.j)},Xi.prototype.i=function(t){return function(){return t}}({}),sn(to,ur);var eo=0;function no(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ro(t){t.readyState=4,t.l=null,t.j=null,t.A=null,io(t)}function io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ze=to.prototype).open=function(t,e){if(this.readyState!=eo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,io(this)},ze.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Qe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ro(this)),this.readyState=eo},ze.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Qe.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;no(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ze.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ro(this):io(this),3==this.readyState&&no(this)}},ze.Ua=function(t){this.g&&(this.response=this.responseText=t,ro(this))},ze.Ta=function(t){this.g&&(this.response=t,ro(this))},ze.ha=function(){this.g&&ro(this)},ze.setRequestHeader=function(t,e){this.v.append(t,e)},ze.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ze.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(to.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var oo=Qe.JSON.parse;function so(t){ur.call(this),this.headers=new pi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ao,this.K=this.L=!1}sn(so,ur);var ao="",uo=/^https?$/i,co=["POST","PUT"];function lo(t){return"content-type"==t.toLowerCase()}function ho(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fo(t),go(t)}function fo(t){t.D||(t.D=!0,cr(t,"complete"),cr(t,"error"))}function po(t){if(t.h&&void 0!==Je&&(!t.C[1]||4!=vo(t)||2!=t.ba()))if(t.v&&4==vo(t))Sr(t.Fa,0,t);else if(cr(t,"readystatechange"),4==vo(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(vi)[1]||null;if(!o&&Qe.self&&Qe.self.location){var s=Qe.self.location.protocol;o=s.substr(0,s.length-1)}i=!uo.test(o?o.toLowerCase():"")}e=i}if(e)cr(t,"complete"),cr(t,"success");else{t.m=6;try{var a=2<vo(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",fo(t)}}finally{go(t)}}}function go(t,e){if(t.g){mo(t);var n=t.g,r=t.C[0]?Ye:null;t.g=null,t.C=null,e||cr(t,"ready");try{n.onreadystatechange=r}catch(sm){}}}function mo(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Qe.clearTimeout(t.A),t.A=null)}function vo(t){return t.g?t.g.readyState:0}function yo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ao:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return _n(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Si(t,e,n))}function _o(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wo(t){this.za=0,this.l=[],this.h=new Pr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_o("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_o("baseRetryDelayMs",5e3,t),this.$a=_o("retryDelaySeedMs",1e4,t),this.Ya=_o("forwardChannelMaxRetries",2,t),this.ra=_o("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Vi(t&&t.concurrentRequestLimit),this.Ca=new Yi,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function To(t){if(So(t),3==t.G){var e=t.V++,n=bi(t.F);Si(n,"SID",t.J),Si(n,"RID",e),Si(n,"TYPE","terminate"),Eo(t,n),(e=new Kr(t,t.h,e,void 0)).K=2,e.v=xi(bi(n)),n=!1,Qe.navigator&&Qe.navigator.sendBeacon&&(n=Qe.navigator.sendBeacon(e.v.toString(),"")),!n&&Qe.Image&&((new Image).src=e.v,n=!0),n||(e.g=Zo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ai(e)}qo(t)}function Co(t){t.g&&(No(t),t.g.cancel(),t.g=null)}function So(t){Co(t),t.u&&(Qe.clearTimeout(t.u),t.u=null),Do(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Qe.clearTimeout(t.m),t.m=null)}function xo(t,e){t.l.push(new Zi(t.Za++,e)),3==t.G&&Ao(t)}function Ao(t){Bi(t.i)||t.m||(t.m=!0,yr(t.Ha,t),t.C=0)}function Io(t,e){var n;n=e?e.m:t.V++;var r=bi(t.F);Si(r,"SID",t.J),Si(r,"RID",n),Si(r,"AID",t.U),Eo(t,r),t.o&&t.s&&bo(r,t.o,t.s),n=new Kr(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Oo(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zi(t.i,n),ni(n,r,e)}function Eo(t,e){t.j&&fi({},function(t,n){Si(e,n,t)})}function Oo(t,e,n){n=Math.min(t.l.length,n);var r=t.j?rn(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Ki(l,s,"req"+c+"_")}catch(bs){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ko(t){t.g||t.u||(t.Y=1,yr(t.Ga,t),t.A=0)}function Po(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Vr(rn(t.Ga,t),Lo(t,t.A)),t.A++,0))}function No(t){null!=t.B&&(Qe.clearTimeout(t.B),t.B=null)}function Ro(t){t.g=new Kr(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=bi(t.oa);Si(e,"RID","rpc"),Si(e,"SID",t.J),Si(e,"CI",t.N?"0":"1"),Si(e,"AID",t.U),Eo(t,e),Si(e,"TYPE","xmlhttp"),t.o&&t.s&&bo(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=xi(bi(e)),n.s=null,n.U=!0,ri(n,t)}function Do(t){null!=t.v&&(Qe.clearTimeout(t.v),t.v=null)}function Mo(t,e){var n=null;if(t.g==e){Do(t),No(t),t.g=null;var r=2}else{if(!Hi(t.i,e))return;n=e.D,$i(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;cr(r=Mr(),new Zr(r,n,e,i)),Ao(t)}else ko(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Gi(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Vr(rn(t.Ha,t,e),Lo(t,t.C)),t.C++,0)))}(t,e)||2==r&&Po(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Uo(t,5);break;case 4:Uo(t,10);break;case 3:Uo(t,6);break;default:Uo(t,2)}}function Lo(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Uo(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=rn(t.jb,t);n||(n=new yi("//www.google.com/images/cleardot.gif"),Qe.location&&"http"==Qe.location.protocol||_i(n,"https"),xi(n)),function(t,e){var n=new Pr;if(Qe.Image){var r=new Image;r.onload=on(Wi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=on(Wi,n,r,"TestLoadImage: error",!1,e),r.onabort=on(Wi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=on(Wi,n,r,"TestLoadImage: timeout",!1,e),Qe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Fr(2);t.G=0,t.j&&t.j.va(e),qo(t),So(t)}function qo(t){t.G=0,t.I=-1,t.j&&(0==Ji(t.i).length&&0==t.l.length||(t.i.i.length=0,dn(t.l),t.l.length=0),t.j.ua())}function Fo(t,e,n){var r=function(t){return t instanceof yi?bi(t):new yi(t,void 0)}(n);if(""!=r.i)e&&wi(r,e+"."+r.i),Ti(r,r.m);else{var i=Qe.location;r=function(t,e,n,r){var i=new yi(null,void 0);return t&&_i(i,t),e&&wi(i,e),n&&Ti(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&_n(t.aa,function(t,e){Si(r,e,t)}),n=t.sa,(e=t.D)&&n&&Si(r,e,n),Si(r,"VER",t.ma),Eo(t,r),r}function Zo(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new so(n&&t.Ba&&!t.qa?new Xi({ib:!0}):t.qa)).L=t.H,e}function Vo(){}function jo(){if(En&&!(10<=Number(qn)))throw Error("Environmental error: no available transport.")}function Bo(t,e){ur.call(this),this.g=new wo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!fn(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fn(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new zo(this)}function Go(t){Jr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ho(){Qr.call(this),this.status=1}function zo(t){this.g=t}(ze=so.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zr.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:zr),this.g.onreadystatechange=rn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void ho(this,o)}t=n||"";var i=new pi(this.headers);r&&fi(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=lo,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Qe.FormData&&t instanceof Qe.FormData,!(0<=cn(co,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mo(this),0<this.B&&((this.K=function(t){return En&&function(){return t=Un,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=gn(String(xn)).split("."),n=gn("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=vn(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||vn(0==o[2].length,0==s[2].length)||vn(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rn(this.pa,this)):this.A=Sr(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ho(this,o)}},ze.pa=function(){void 0!==Je&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},ze.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,cr(this,"complete"),cr(this,"abort"),go(this))},ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),go(this,!0)),so.Z.M.call(this)},ze.Fa=function(){this.s||(this.F||this.v||this.l?po(this):this.cb())},ze.cb=function(){po(this)},ze.ba=function(){try{return 2<vo(this)?this.g.status:-1}catch(An){return-1}},ze.ga=function(){try{return this.g?this.g.responseText:""}catch(An){return""}},ze.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oo(e)}},ze.Da=function(){return this.m},ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ze=wo.prototype).ma=8,ze.G=1,ze.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},ze.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Kr(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Cn(n=wn(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Oo(this,e,r),Si(i=bi(this.F),"RID",t),Si(i,"CVER",22),this.D&&Si(i,"X-HTTP-Session-Id",this.D),Eo(this,i),this.o&&n&&bo(i,this.o,n),zi(this.i,e),this.Ra&&Si(i,"TYPE","init"),this.ja?(Si(i,"$req",r),Si(i,"SID","null"),e.$=!0,ni(e,i,null)):ni(e,i,r),this.G=2}}else 3==this.G&&(t?Io(this,t):0==this.l.length||Bi(this.i)||Io(this))},ze.Ga=function(){if(this.u=null,Ro(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Vr(rn(this.bb,this),t)}},ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fr(10),Co(this),Ro(this))},ze.ab=function(){null!=this.v&&(this.v=null,Co(this),Po(this),Fr(19))},ze.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Fr(2)):(this.h.info("Failed to ping google.com"),Fr(1))},(ze=Vo.prototype).xa=function(){},ze.wa=function(){},ze.va=function(){},ze.ua=function(){},ze.Oa=function(){},jo.prototype.g=function(t,e){return new Bo(t,e)},sn(Bo,ur),Bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),yr(rn(t.hb,t,e))),Fr(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Fo(t,null,t.W),Ao(t)},Bo.prototype.close=function(){To(this.g)},Bo.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,xo(this.g,e)}else this.v?((e={}).__data__=hr(t),xo(this.g,e)):xo(this.g,t)},Bo.prototype.M=function(){this.g.j=null,delete this.j,To(this.g),delete this.g,Bo.Z.M.call(this)},sn(Go,Jr),sn(Ho,Qr),sn(zo,Vo),zo.prototype.xa=function(){cr(this.g,"a")},zo.prototype.wa=function(t){cr(this.g,new Go(t))},zo.prototype.va=function(t){cr(this.g,new Ho(t))},zo.prototype.ua=function(){cr(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,Bo.prototype.send=Bo.prototype.u,Bo.prototype.open=Bo.prototype.m,Bo.prototype.close=Bo.prototype.close,jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,Br.COMPLETE="complete",Hr.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",ur.prototype.listen=ur.prototype.N,so.prototype.listenOnce=so.prototype.O,so.prototype.getLastError=so.prototype.La,so.prototype.getLastErrorCode=so.prototype.Da,so.prototype.getStatus=so.prototype.ba,so.prototype.getResponseJson=so.prototype.Qa,so.prototype.getResponseText=so.prototype.ga,so.prototype.send=so.prototype.ea;var $o=jr,Jo=Br,Qo=Rr,Yo=Xi,Ko=Hr,Wo=so,Xo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Xo.o=-1;var ts={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},es=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Ve.ZT)(e,t),e}(Error),ns=new Be.Yd("@firebase/firestore");function rs(){return ns.logLevel}function is(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ns.logLevel<=Be.in.DEBUG){var r=e.map(as);ns.debug.apply(ns,(0,Ve.ev)(["Firestore (8.8.1): "+t],r))}}function os(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ns.logLevel<=Be.in.ERROR){var r=e.map(as);ns.error.apply(ns,(0,Ve.ev)(["Firestore (8.8.1): "+t],r))}}function ss(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ns.logLevel<=Be.in.WARN){var r=e.map(as);ns.warn.apply(ns,(0,Ve.ev)(["Firestore (8.8.1): "+t],r))}}function as(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(sm){return t}}function us(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw os(e),new Error(e)}function cs(t,e){t||us()}function ls(t,e){return t}function hs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ds=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=hs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function fs(t,e){return t<e?-1:t>e?1:0}function ps(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function gs(t){return t+"\0"}var ms=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new es(ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new es(ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new es(ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new es(ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?fs(this.nanoseconds,t.nanoseconds):fs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),vs=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ms(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ys(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _s(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ws=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&us(),void 0===n?n=t.length-e:n>t.length-e&&us(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new es(ts.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ws),Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Cs.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new es(ts.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new es(ts.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new es(ts.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new es(ts.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ws),xs=function(){function t(t){this.fields=t,t.sort(Ss.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ps(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),As=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return fs(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();As.EMPTY_BYTE_STRING=new As("");var Is=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(cs(!!t),"string"==typeof t){var e=0,n=Is.exec(t);if(cs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Os(t.seconds),nanos:Os(t.nanos)}}function Os(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ks(t){return"string"==typeof t?As.fromBase64String(t):As.fromUint8Array(t)}function Ps(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ns(t){var e=t.mapValue.fields.__previous_value__;return Ps(e)?Ns(e):e}function Rs(t){var e=Es(t.mapValue.fields.__local_write_time__.timestampValue);return new ms(e.seconds,e.nanos)}function Ds(t){return null==t}function Ms(t){return 0===t&&1/t==-1/0}function Ls(t){return"number"==typeof t&&Number.isInteger(t)&&!Ms(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Us=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ts.fromString(e))},t.fromName=function(e){return new t(Ts.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ts.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ts.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ts(e.slice()))},t}();function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ps(t)?4:10:us()}function Fs(t,e){var n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rs(t).isEqual(Rs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Es(t.timestampValue),r=Es(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ks(t.bytesValue).isEqual(ks(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Os(t.geoPointValue.latitude)===Os(e.geoPointValue.latitude)&&Os(t.geoPointValue.longitude)===Os(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Os(t.integerValue)===Os(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Os(t.doubleValue),r=Os(e.doubleValue);return n===r?Ms(n)===Ms(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ys(n)!==ys(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fs(n[i],r[i])))return!1;return!0}(t,e);default:return us()}}function Zs(t,e){return void 0!==(t.values||[]).find(function(t){return Fs(t,e)})}function Vs(t,e){var n=qs(t),r=qs(e);if(n!==r)return fs(n,r);switch(n){case 0:return 0;case 1:return fs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Os(t.integerValue||t.doubleValue),r=Os(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return js(t.timestampValue,e.timestampValue);case 4:return js(Rs(t),Rs(e));case 5:return fs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ks(t),r=ks(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=fs(n[i],r[i]);if(0!==o)return o}return fs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=fs(Os(t.latitude),Os(e.latitude));return 0!==n?n:fs(Os(t.longitude),Os(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Vs(n[i],r[i]);if(o)return o}return fs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=fs(r[s],o[s]);if(0!==a)return a;var u=Vs(n[r[s]],i[o[s]]);if(0!==u)return u}return fs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw us()}}function js(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fs(t,e);var n=Es(t),r=Es(e),i=fs(n.seconds,r.seconds);return 0!==i?i:fs(n.nanos,r.nanos)}function Bs(t){return Gs(t)}function Gs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Es(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ks(t.bytesValue).toBase64():"referenceValue"in t?Us.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Gs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Gs(t.fields[o])}return e+"}"}(t.mapValue):us();var e}function Hs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function zs(t){return!!t&&"integerValue"in t}function $s(t){return!!t&&"arrayValue"in t}function Js(t){return!!t&&"nullValue"in t}function Qs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ys(t){return!!t&&"mapValue"in t}function Ks(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return bs(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Ks(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ks(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ws=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Ys(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ks(e)},t.prototype.setAll=function(t){var e=this,n=Ss.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ks(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Ys(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Fs(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Ys(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){bs(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Ks(this.value))},t}();function Xs(t){var e=[];return bs(t.fields,function(t,n){var r=new Ss([t]);if(Ys(n)){var i=Xs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new xs(e)}var ta=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,vs.min(),Ws.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ws.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ws.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ws.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ws.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ea=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function na(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ea(t,e,n,r,i,o,s)}function ra(t){var e=ls(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Bs(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Ds(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ma(e.startAt)),e.endAt&&(n+="|ub:",n+=ma(e.endAt)),e.h=n}return e.h}function ia(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ya(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Fs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_a(t.startAt,e.startAt)&&_a(t.endAt,e.endAt)}function oa(t){return Us.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var sa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Ve.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new aa(t,n,r):"array-contains"===n?new ha(t,r):"in"===n?new da(t,r):"not-in"===n?new fa(t,r):"array-contains-any"===n?new pa(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ua(t,n):new ca(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Vs(e,this.value)):null!==e&&qs(this.value)===qs(e)&&this.m(Vs(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return us()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Us.fromName(r.referenceValue),i}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){var e=Us.comparator(t.key,this.key);return this.m(e)},e}(sa),ua=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=la(0,n),r}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(sa),ca=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=la(0,n),r}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(sa);function la(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Us.fromName(t.referenceValue)})}var ha=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return $s(e)&&Zs(e.arrayValue,this.value)},e}(sa),da=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Zs(this.value.arrayValue,e)},e}(sa),fa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){if(Zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Zs(this.value.arrayValue,e)},e}(sa),pa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Ve.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!$s(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Zs(e.value.arrayValue,t)})},e}(sa),ga=function(t,e){this.position=t,this.before=e};function ma(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Bs(t)}).join(",")}var va=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ya(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ba(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Us.comparator(Us.fromName(s.referenceValue),n.key):Vs(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function _a(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Fs(t.position[n],e.position[n]))return!1;return!0}var wa=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Ta(t,e,n,r,i,o,s,a){return new wa(t,e,n,r,i,o,s,a)}function Ca(t){return new wa(t)}function Sa(t){return!Ds(t.limit)&&"F"===t.limitType}function xa(t){return!Ds(t.limit)&&"L"===t.limitType}function Aa(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ia(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ea(t){return null!==t.collectionGroup}function Oa(t){var e=ls(t);if(null===e.p){e.p=[];var n=Ia(e),r=Aa(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new va(n)),e.p.push(new va(Ss.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new va(Ss.keyField(),u))}}}return e.p}function ka(t){var e=ls(t);if(!e.T)if("F"===e.limitType)e.T=na(e.path,e.collectionGroup,Oa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Oa(e);r<i.length;r++){var o=i[r];n.push(new va(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ga(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ga(e.startAt.position,!e.startAt.before):null;e.T=na(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Pa(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Na(t,e){return ia(ka(t),ka(e))&&t.limitType===e.limitType}function Ra(t){return ra(ka(t))+"|lt:"+t.limitType}function Da(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Bs(e.value);var e}).join(", ")+"]"),Ds(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ma(t.startAt)),t.endAt&&(e+=", endAt: "+ma(t.endAt)),"Target("+e+")"}(ka(t))+"; limitType="+t.limitType+")"}function Ma(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Us.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ba(t.startAt,Oa(t),e)||t.endAt&&ba(t.endAt,Oa(t),e))}(t,e)}function La(t){return function(e,n){for(var r=!1,i=0,o=Oa(t);i<o.length;i++){var s=o[i],a=Ua(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ua(t,e,n){var r=t.field.isKeyField()?Us.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Vs(r,i):us()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return us()}}function qa(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ms(e)?"-0":e}}function Fa(t){return{integerValue:""+t}}function Za(t,e){return Ls(e)?Fa(e):qa(t,e)}var Va=function(){this._=void 0};function ja(t,e,n){return t instanceof Ha?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof za?$a(t,e):t instanceof Ja?Qa(t,e):function(t,e){var n=Ga(t,e),r=Ka(n)+Ka(t.A);return zs(n)&&zs(t.A)?Fa(r):qa(t.R,r)}(t,e)}function Ba(t,e,n){return t instanceof za?$a(t,e):t instanceof Ja?Qa(t,e):n}function Ga(t,e){return t instanceof Ya?zs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e}(Va),za=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ve.ZT)(e,t),e}(Va);function $a(t,e){for(var n=Wa(e),r=function(t){n.some(function(e){return Fs(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ja=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ve.ZT)(e,t),e}(Va);function Qa(t,e){for(var n=Wa(e),r=function(t){n=n.filter(function(e){return!Fs(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ya=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Ve.ZT)(e,t),e}(Va);function Ka(t){return Os(t.integerValue||t.doubleValue)}function Wa(t){return $s(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Xa=function(t,e){this.field=t,this.transform=e},tu=function(t,e){this.version=t,this.transformResults=e},eu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function nu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ru=function(){};function iu(t,e,n){t instanceof cu?function(t,e,n){var r=t.value.clone(),i=du(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof lu?function(t,e,n){if(nu(t.precondition,e)){var r=du(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(hu(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ou(t,e,n){t instanceof cu?function(t,e,n){if(nu(t.precondition,e)){var r=t.value.clone(),i=fu(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(uu(e),r).setHasLocalMutations()}}(t,e,n):t instanceof lu?function(t,e,n){if(nu(t.precondition,e)){var r=fu(t.fieldTransforms,n,e),i=e.data;i.setAll(hu(t)),i.setAll(r),e.convertToFoundDocument(uu(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){nu(t.precondition,e)&&e.convertToNoDocument(vs.min())}(t,e)}function su(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ga(o.transform,s||null);null!=a&&(null==n&&(n=Ws.empty()),n.set(o.field,a))}return n||null}function au(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ps(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof za&&e instanceof za||t instanceof Ja&&e instanceof Ja?ps(t.elements,e.elements,Fs):t instanceof Ya&&e instanceof Ya?Fs(t.A,e.A):t instanceof Ha&&e instanceof Ha}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function uu(t){return t.isFoundDocument()?t.version:vs.min()}var cu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Ve.ZT)(e,t),e}(ru),lu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Ve.ZT)(e,t),e}(ru);function hu(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function du(t,e,n){var r=new Map;cs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ba(s,a,n[i]))}return r}function fu(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ja(a,u,e))}return r}var pu,gu,mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Ve.ZT)(e,t),e}(ru),vu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Ve.ZT)(e,t),e}(ru),yu=function(t){this.count=t};function bu(t){switch(t){case ts.OK:return us();case ts.CANCELLED:case ts.UNKNOWN:case ts.DEADLINE_EXCEEDED:case ts.RESOURCE_EXHAUSTED:case ts.INTERNAL:case ts.UNAVAILABLE:case ts.UNAUTHENTICATED:return!1;case ts.INVALID_ARGUMENT:case ts.NOT_FOUND:case ts.ALREADY_EXISTS:case ts.PERMISSION_DENIED:case ts.FAILED_PRECONDITION:case ts.ABORTED:case ts.OUT_OF_RANGE:case ts.UNIMPLEMENTED:case ts.DATA_LOSS:return!0;default:return us()}}function _u(t){if(void 0===t)return os("GRPC error has no .code"),ts.UNKNOWN;switch(t){case pu.OK:return ts.OK;case pu.CANCELLED:return ts.CANCELLED;case pu.UNKNOWN:return ts.UNKNOWN;case pu.DEADLINE_EXCEEDED:return ts.DEADLINE_EXCEEDED;case pu.RESOURCE_EXHAUSTED:return ts.RESOURCE_EXHAUSTED;case pu.INTERNAL:return ts.INTERNAL;case pu.UNAVAILABLE:return ts.UNAVAILABLE;case pu.UNAUTHENTICATED:return ts.UNAUTHENTICATED;case pu.INVALID_ARGUMENT:return ts.INVALID_ARGUMENT;case pu.NOT_FOUND:return ts.NOT_FOUND;case pu.ALREADY_EXISTS:return ts.ALREADY_EXISTS;case pu.PERMISSION_DENIED:return ts.PERMISSION_DENIED;case pu.FAILED_PRECONDITION:return ts.FAILED_PRECONDITION;case pu.ABORTED:return ts.ABORTED;case pu.OUT_OF_RANGE:return ts.OUT_OF_RANGE;case pu.UNIMPLEMENTED:return ts.UNIMPLEMENTED;case pu.DATA_LOSS:return ts.DATA_LOSS;default:return us()}}(gu=pu||(pu={}))[gu.OK=0]="OK",gu[gu.CANCELLED=1]="CANCELLED",gu[gu.UNKNOWN=2]="UNKNOWN",gu[gu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gu[gu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gu[gu.NOT_FOUND=5]="NOT_FOUND",gu[gu.ALREADY_EXISTS=6]="ALREADY_EXISTS",gu[gu.PERMISSION_DENIED=7]="PERMISSION_DENIED",gu[gu.UNAUTHENTICATED=16]="UNAUTHENTICATED",gu[gu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gu[gu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gu[gu.ABORTED=10]="ABORTED",gu[gu.OUT_OF_RANGE=11]="OUT_OF_RANGE",gu[gu.UNIMPLEMENTED=12]="UNIMPLEMENTED",gu[gu.INTERNAL=13]="INTERNAL",gu[gu.UNAVAILABLE=14]="UNAVAILABLE",gu[gu.DATA_LOSS=15]="DATA_LOSS";var wu=function(){function t(t,e){this.comparator=t,this.root=e||Cu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Tu(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Tu(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Tu(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Tu(this.root,t,this.comparator,!0)},t}(),Tu=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Cu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw us();if(this.right.isRed())throw us();var t=this.left.check();if(t!==this.right.check())throw us();return t+(this.isRed()?0:1)},t}();Cu.EMPTY=null,Cu.RED=!0,Cu.BLACK=!1,Cu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw us()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Cu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Su=function(){function t(t){this.comparator=t,this.data=new wu(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new xu(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new xu(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),xu=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Au=new wu(Us.comparator);function Iu(){return Au}var Eu=new wu(Us.comparator);function Ou(){return Eu}var ku=new wu(Us.comparator);function Pu(){return ku}var Nu=new Su(Us.comparator);function Ru(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Nu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Du=new Su(fs);function Mu(){return Du}var Lu=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(vs.min(),r,Mu(),Iu(),Ru())},t}(),Uu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(As.EMPTY_BYTE_STRING,n,Ru(),Ru(),Ru())},t}(),qu=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Fu=function(t,e){this.targetId=t,this.V=e},Zu=function(t,e,n,r){void 0===n&&(n=As.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Vu=function(){function t(){this.S=0,this.D=Gu(),this.C=As.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ru(),e=Ru(),n=Ru();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:us()}}),new Uu(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Gu()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ju=function(){function t(t){this.W=t,this.G=new Map,this.H=Iu(),this.J=Bu(),this.Y=new Su(fs)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:us()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(oa(i))if(0===n){var o=new Us(i.path);this.tt(e,o,ta.newNoDocument(o,vs.min()))}else cs(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&oa(o.target)){var s=new Us(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ta.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Ru();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Lu(t,n,this.Y,this.H,r);return this.H=Iu(),this.J=Bu(),this.Y=new Su(fs),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Vu,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Su(fs),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||is("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Vu),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Bu(){return new wu(Us.comparator)}function Gu(){return new wu(Us.comparator)}var Hu={asc:"ASCENDING",desc:"DESCENDING"},zu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$u=function(t,e){this.databaseId=t,this.I=e};function Ju(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qu(t,e){return t.I?e.toBase64():e.toUint8Array()}function Yu(t,e){return Ju(t,e.toTimestamp())}function Ku(t){return cs(!!t),vs.fromTimestamp(function(t){var e=Es(t);return new ms(e.seconds,e.nanos)}(t))}function Wu(t,e){return function(t){return new Ts(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Xu(t){var e=Ts.fromString(t);return cs(Cc(e)),e}function tc(t,e){return Wu(t.databaseId,e.path)}function ec(t,e){var n=Xu(e);if(n.get(1)!==t.databaseId.projectId)throw new es(ts.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new es(ts.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Us(oc(n))}function nc(t,e){return Wu(t.databaseId,e)}function rc(t){var e=Xu(t);return 4===e.length?Ts.emptyPath():oc(e)}function ic(t){return new Ts(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oc(t){return cs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function sc(t,e,n){return{name:tc(t,e),fields:n.value.mapValue.fields}}function ac(t,e,n){var r=ec(t,e.name),i=Ku(e.updateTime),o=new Ws({mapValue:{fields:e.fields}}),s=ta.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function uc(t,e){var n;if(e instanceof cu)n={update:sc(t,e.key,e.value)};else if(e instanceof mu)n={delete:tc(t,e.key)};else if(e instanceof lu)n={update:sc(t,e.key,e.data),updateMask:Tc(e.fieldMask)};else{if(!(e instanceof vu))return us();n={verify:tc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ha)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof za)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ja)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ya)return{fieldPath:e.field.canonicalString(),increment:n.A};throw us()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Yu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:us()}(t,e.precondition)),n}function cc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?eu.updateTime(Ku(t.updateTime)):void 0!==t.exists?eu.exists(t.exists):eu.none()}(e.currentDocument):eu.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(cs("REQUEST_TIME"===e.setToServerValue),n=new Ha):"appendMissingElements"in e?n=new za(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ja(e.removeAllFromArray.values||[]):"increment"in e?n=new Ya(t,e.increment):us();var r=Ss.fromServerFormat(e.fieldPath);return new Xa(r,n)}(t,e)}):[];if(e.update){var i=ec(t,e.update.name),o=new Ws({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new xs((t.fieldPaths||[]).map(function(t){return Ss.fromServerFormat(t)}))}(e.updateMask);return new lu(i,o,s,n,r)}return new cu(i,o,n,r)}if(e.delete){var a=ec(t,e.delete);return new mu(a,n)}if(e.verify){var u=ec(t,e.verify);return new vu(u,n)}return us()}function lc(t,e){return{documents:[nc(t,e.path)]}}function hc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=nc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=nc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Qs(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NAN"}};if(Js(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Qs(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NAN"}};if(Js(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yc(t.field),op:vc(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:yc(t.field),direction:mc(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Ds(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=pc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=pc(e.endAt)),n}function dc(t){var e=rc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){cs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=fc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new va(bc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ds(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=gc(n.startAt));var l=null;return n.endAt&&(l=gc(n.endAt)),Ta(e,i,a,s,u,"F",c,l)}function fc(t){return t?void 0!==t.unaryFilter?[wc(t)]:void 0!==t.fieldFilter?[_c(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return fc(t)}).reduce(function(t,e){return t.concat(e)}):us():[]}function pc(t){return{before:t.before,values:t.position}}function gc(t){return new ga(t.values||[],!!t.before)}function mc(t){return Hu[t]}function vc(t){return zu[t]}function yc(t){return{fieldPath:t.canonicalString()}}function bc(t){return Ss.fromServerFormat(t.fieldPath)}function _c(t){return sa.create(bc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return us()}}(t.fieldFilter.op),t.fieldFilter.value)}function wc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=bc(t.unaryFilter.field);return sa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=bc(t.unaryFilter.field);return sa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bc(t.unaryFilter.field);return sa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bc(t.unaryFilter.field);return sa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return us()}}function Tc(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Cc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Sc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ac(e)),e=xc(t.get(n),e);return Ac(e)}function xc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ac(t){return t+"\x01\x01"}function Ic(t){var e=t.length;if(cs(e>=2),2===e)return cs("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ts.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&us(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:us()}o=s+2}return new Ts(r)}var Ec=function(t,e){this.seconds=t,this.nanoseconds=e},Oc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Oc.store="owner",Oc.key="owner";var kc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};kc.store="mutationQueues",kc.keyPath="userId";var Pc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Pc.store="mutations",Pc.keyPath="batchId",Pc.userMutationsIndex="userMutationsIndex",Pc.userMutationsKeyPath=["userId","batchId"];var Nc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Sc(e)]},t.key=function(t,e,n){return[t,Sc(e),n]},t}();Nc.store="documentMutations",Nc.PLACEHOLDER=new Nc;var Rc=function(t,e){this.path=t,this.readTime=e},Dc=function(t,e){this.path=t,this.version=e},Mc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Mc.store="remoteDocuments",Mc.readTimeIndex="readTimeIndex",Mc.readTimeIndexPath="readTime",Mc.collectionReadTimeIndex="collectionReadTimeIndex",Mc.collectionReadTimeIndexPath=["parentPath","readTime"];var Lc=function(t){this.byteSize=t};Lc.store="remoteDocumentGlobal",Lc.key="remoteDocumentGlobalKey";var Uc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Uc.store="targets",Uc.keyPath="targetId",Uc.queryTargetsIndexName="queryTargetsIndex",Uc.queryTargetsKeyPath=["canonicalId","targetId"];var qc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};qc.store="targetDocuments",qc.keyPath=["targetId","path"],qc.documentTargetsIndex="documentTargetsIndex",qc.documentTargetsKeyPath=["path","targetId"];var Fc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Fc.key="targetGlobalKey",Fc.store="targetGlobal";var Zc=function(t,e){this.collectionId=t,this.parent=e};Zc.store="collectionParents",Zc.keyPath=["collectionId","parent"];var Vc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Vc.store="clientMetadata",Vc.keyPath="clientId";var jc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};jc.store="bundles",jc.keyPath="bundleId";var Bc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Bc.store="namedQueries",Bc.keyPath="name";var Gc=(0,Ve.ev)((0,Ve.ev)([],(0,Ve.ev)((0,Ve.ev)([],(0,Ve.ev)((0,Ve.ev)([],(0,Ve.ev)((0,Ve.ev)([],[kc.store,Pc.store,Nc.store,Mc.store,Uc.store,Oc.store,Fc.store,qc.store]),[Vc.store])),[Lc.store])),[Zc.store])),[jc.store,Bc.store]),Hc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zc=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),$c=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Jc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&us(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Qc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new $c,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Wc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=rl(e.target.error);n.ft.reject(new Wc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Wc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(is("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new tl(e)},t}(),Yc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,je.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return is("SimpleDb","Removing database:",t),el(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,je.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(is("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Wc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new es(ts.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Wc(t,n))},i.onupgradeneeded=function(t){is("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){is("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ve.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Ve.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Qc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Jc.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return is("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Kc=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return el(this.Pt.delete())},t}(),Wc=function(t){function e(e,n){var r=this;return(r=t.call(this,ts.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Ve.ZT)(e,t),e}(es);function Xc(t){return"IndexedDbTransactionError"===t.name}var tl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(is("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(is("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),el(n)},t.prototype.add=function(t){return is("SimpleDb","ADD",this.store.name,t,t),el(this.store.add(t))},t.prototype.get=function(t){var e=this;return el(this.store.get(t)).next(function(n){return void 0===n&&(n=null),is("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return is("SimpleDb","DELETE",this.store.name,t),el(this.store.delete(t))},t.prototype.count=function(){return is("SimpleDb","COUNT",this.store.name),el(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){is("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Jc(function(n,r){e.onerror=function(t){var e=rl(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Jc(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Kc(i),s=e(i.primaryKey,i.value,o);if(s instanceof Jc){var a=s.catch(function(t){return o.done(),Jc.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Jc.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function el(t){return new Jc(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=rl(t.target.error);n(e)}})}var nl=!1;function rl(t){var e=Yc._t((0,je.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new es("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return nl||(nl=!0,setTimeout(function(){throw r},0)),r}}return t}var il=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Ve.ZT)(e,t),e}(zc);function ol(t,e){var n=ls(t);return Yc.It(n.Mt,e)}var sl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&iu(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ou(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ou(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vs.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ru())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ps(this.mutations,t.mutations,function(t,e){return au(t,e)})&&ps(this.baseMutations,t.baseMutations,function(t,e){return au(t,e)})},t}(),al=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){cs(e.mutations.length===r.length);for(var i=Pu(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ul=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=vs.min()),void 0===o&&(o=vs.min()),void 0===s&&(s=As.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),cl=function(t){this.Lt=t};function ll(t,e){if(e.document)return ac(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Us.fromSegments(e.noDocument.path),r=gl(e.noDocument.readTime),i=ta.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Us.fromSegments(e.unknownDocument.path);return r=gl(e.unknownDocument.version),ta.newUnknownDocument(o,r)}return us()}function hl(t,e,n){var r=dl(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:tc(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ju(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Mc(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=pl(e.version);return s=e.hasCommittedMutations,new Mc(null,new Rc(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=pl(e.version);return new Mc(new Dc(c,l),null,null,!0,r,i)}return us()}function dl(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fl(t){var e=new ms(t[0],t[1]);return vs.fromTimestamp(e)}function pl(t){var e=t.toTimestamp();return new Ec(e.seconds,e.nanoseconds)}function gl(t){var e=new ms(t.seconds,t.nanoseconds);return vs.fromTimestamp(e)}function ml(t,e){for(var n=(e.baseMutations||[]).map(function(e){return cc(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return cc(t.Lt,e)}),o=ms.fromMillis(e.localWriteTimeMs);return new sl(e.batchId,o,n,i)}function vl(t){var e,n,r=gl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?gl(t.lastLimboFreeSnapshotVersion):vs.min();return void 0!==t.query.documents?(cs(1===(n=t.query).documents.length),e=ka(Ca(rc(n.documents[0])))):e=function(t){return ka(dc(t))}(t.query),new ul(e,t.targetId,0,t.lastListenSequenceNumber,r,i,As.fromBase64String(t.resumeToken))}function yl(t,e){var n,r=pl(e.snapshotVersion),i=pl(e.lastLimboFreeSnapshotVersion);n=oa(e.target)?lc(t.Lt,e.target):hc(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Uc(e.targetId,ra(e.target),r,o,e.sequenceNumber,i,n)}function bl(t){var e=dc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Pa(e,e.limit,"L"):e}var _l=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return wl(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:gl(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return wl(t).put({bundleId:(n=e).id,createTime:pl(Ku(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Tl(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:bl(e.bundledQuery),readTime:gl(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Tl(t).put(function(t){return{name:t.name,readTime:pl(Ku(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function wl(t){return ol(t,jc.store)}function Tl(t){return ol(t,Bc.store)}var Cl=function(){function t(){this.Bt=new Sl}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Jc.resolve()},t.prototype.getCollectionParents=function(t,e){return Jc.resolve(this.Bt.getEntries(e))},t}(),Sl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Su(Ts.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Su(Ts.comparator)).toArray()},t}(),xl=function(){function t(){this.qt=new Sl}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Sc(i)};return Al(t).put(o)}return Jc.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[gs(e),""],!1,!0);return Al(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ic(o.parent))}return n})},t}();function Al(t){return ol(t,Zc.store)}var Il={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},El=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ol(t,e,n){var r=t.store(Pc.store),i=t.store(Nc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){cs(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Nc.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Jc.waitFor(o).next(function(){return c})}function kl(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw us();e=t.noDocument}return JSON.stringify(e).length}El.DEFAULT_COLLECTION_PERCENTILE=10,El.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,El.DEFAULT=new El(41943040,El.DEFAULT_COLLECTION_PERCENTILE,El.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),El.DISABLED=new El(-1,0,0);var Pl=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return cs(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rl(t).$t({index:Pc.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Dl(t),s=Rl(t);return s.add({}).next(function(a){cs("number"==typeof a);for(var u=new sl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return uc(t.Lt,e)}),i=n.mutations.map(function(e){return uc(t.Lt,e)});return new Pc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Su(function(t,e){return fs(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Nc.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Nc.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Jc.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Rl(t).get(e).next(function(t){return t?(cs(t.userId===n.userId),ml(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Jc.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Rl(t).$t({index:Pc.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(cs(e.batchId>=r),o=ml(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rl(t).$t({index:Pc.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rl(t).Nt(Pc.userMutationsIndex,n).next(function(t){return t.map(function(t){return ml(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Nc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Dl(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=Ic(r[1]);if(a===n.userId&&e.path.isEqual(c))return Rl(t).get(u).next(function(t){if(!t)throw us();cs(t.userId===n.userId),o.push(ml(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Su(fs),i=[];return e.forEach(function(e){var o=Nc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Dl(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=Ic(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Jc.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Nc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Su(fs);return Dl(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=Ic(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Rl(t).get(e).next(function(t){if(null===t)throw us();cs(t.userId===n.userId),r.push(ml(n.R,t))}))}),Jc.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ol(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Jc.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Jc.resolve();var r=IDBKeyRange.lowerBound(Nc.prefixForUser(e.userId)),i=[];return Dl(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=Ic(t[1]);i.push(o)}else r.done()}).next(function(){cs(0===i.length)})})},t.prototype.containsKey=function(t,e){return Nl(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Ml(t).get(this.userId).next(function(t){return t||new kc(e.userId,-1,"")})},t}();function Nl(t,e,n){var r=Nc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Dl(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Rl(t){return ol(t,Pc.store)}function Dl(t){return ol(t,Nc.store)}function Ml(t){return ol(t,kc.store)}var Ll=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ul=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ll(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return vs.fromTimestamp(new ms(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ql(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return cs(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ql(t).$t(function(s,a){var u=vl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Jc.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return ql(t).$t(function(t,n){var r=vl(n);e(r)})},t.prototype.Xt=function(t){return Fl(t).get(Fc.key).next(function(t){return cs(null!==t),t})},t.prototype.Zt=function(t,e){return Fl(t).put(Fc.key,e)},t.prototype.te=function(t,e){return ql(t).put(yl(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ra(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ql(t).$t({range:r,index:Uc.queryTargetsIndexName},function(t,n,r){var o=vl(n);ia(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Zl(t);return e.forEach(function(e){var s=Sc(e.path);i.push(o.put(new qc(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Jc.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Zl(t);return Jc.forEach(e,function(e){var o=Sc(e.path);return Jc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Zl(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Zl(t),i=Ru();return r.$t({range:n,kt:!0},function(t,e,n){var r=Ic(t[1]),o=new Us(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Sc(e.path),r=IDBKeyRange.bound([n],[gs(n)],!1,!0),i=0;return Zl(t).$t({index:qc.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return ql(t).get(e).next(function(t){return t?vl(t):null})},t}();function ql(t){return ol(t,Uc.store)}function Fl(t){return ol(t,Fc.store)}function Zl(t){return ol(t,qc.store)}function Vl(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){if(t.code!==ts.FAILED_PRECONDITION||t.message!==Hc)throw t;return is("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jl(t,e){var n=t[1],r=e[1],i=fs(t[0],e[0]);return 0===i?fs(n,r):i}var Bl=function(){function t(t){this.ne=t,this.buffer=new Su(jl),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();jl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Gl=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;is("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Ve.mG)(e,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Xc(e=n.sent())?(is("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Vl(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Hl=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Jc.resolve(Xo.o);var r=new Bl(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(is("LruGarbageCollector","Garbage collection skipped; disabled"),Jc.resolve(Il)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(is("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Il):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(is("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),rs()<=Be.in.DEBUG&&is("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Jc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),zl=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Hl(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return $l(t,n)},t.prototype.removeReference=function(t,e,n){return $l(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return $l(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Ml(t).Ot(function(r){return Nl(t,r,e).next(function(t){return t&&(n=!0),Jc.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Zl(t).delete([0,Sc(s.path)])})});i.push(u)}}).next(function(){return Jc.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return $l(t,e)},t.prototype.we=function(t,e){var n,r=Zl(t),i=Xo.o;return r.$t({index:qc.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Xo.o&&e(new Us(Ic(n)),i),i=s,n=o):i=Xo.o}).next(function(){i!==Xo.o&&e(new Us(Ic(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function $l(t,e){return Zl(t).put(function(t,e){return new qc(0,Sc(t.path),e)}(e,t.currentSequenceNumber))}var Jl=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){bs(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return _s(this.inner)},t}(),Ql=function(){function t(){this.changes=new Jl(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:vs.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ta.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Jc.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Yl=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Xl(t).put(th(e),n)},t.prototype.removeEntry=function(t,e){var n=Xl(t),r=th(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Xl(t).get(th(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Xl(t).get(th(e)).next(function(t){return{document:n.ye(e,t),size:kl(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Iu();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Iu(),i=new wu(Us.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,kl(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Jc.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Xl(t).$t({range:r},function(t,e,r){for(var s=Us.fromSegments(t);o&&Us.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Iu(),o=e.path.length+1,s={};if(n.isEqual(vs.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=dl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Mc.collectionReadTimeIndex}return Xl(t).$t(s,function(t,n,s){if(t.length===o){var a=ll(r.R,n);e.path.isPrefixOf(a.key.path)?Ma(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Kl(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Wl(t).get(Lc.key).next(function(t){return cs(!!t),t})},t.prototype.me=function(t,e){return Wl(t).put(Lc.key,e)},t.prototype.ye=function(t,e){if(e){var n=ll(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(vs.min()))return n}return ta.newInvalidDocument(t)},t}(),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Jl(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Ve.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Su(function(t,e){return fs(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=hl(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=kl(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=hl(e.Ie.R,ta.newNoDocument(o,vs.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Jc.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ql);function Wl(t){return ol(t,Lc.store)}function Xl(t){return ol(t,Mc.store)}function th(t){return t.path.toArray()}var eh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;cs(n<r&&n>=0&&r<=11);var o=new Qc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Oc.store)}(t),function(t){t.createObjectStore(kc.store,{keyPath:kc.keyPath}),t.createObjectStore(Pc.store,{keyPath:Pc.keyPath,autoIncrement:!0}).createIndex(Pc.userMutationsIndex,Pc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Nc.store)}(t),nh(t),function(t){t.createObjectStore(Mc.store)}(t));var s=Jc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(qc.store),t.deleteObjectStore(Uc.store),t.deleteObjectStore(Fc.store)}(t),nh(t)),s=s.next(function(){return function(t){var e=t.store(Fc.store),n=new Fc(0,0,vs.min().toTimestamp(),0);return e.put(Fc.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Pc.store).Nt().next(function(n){t.deleteObjectStore(Pc.store),t.createObjectStore(Pc.store,{keyPath:Pc.keyPath,autoIncrement:!0}).createIndex(Pc.userMutationsIndex,Pc.userMutationsKeyPath,{unique:!0});var r=e.store(Pc.store),i=n.map(function(t){return r.put(t)});return Jc.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Vc.store,{keyPath:Vc.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Lc.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Mc.store);e.createIndex(Mc.readTimeIndex,Mc.readTimeIndexPath,{unique:!1}),e.createIndex(Mc.collectionReadTimeIndex,Mc.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(jc.store,{keyPath:jc.keyPath})}(t),function(t){t.createObjectStore(Bc.store,{keyPath:Bc.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Mc.store).$t(function(t,n){e+=kl(n)}).next(function(){var n=new Lc(e);return t.store(Lc.store).put(Lc.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(kc.store),r=t.store(Pc.store);return n.Nt().next(function(n){return Jc.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Pc.userMutationsIndex,i).next(function(r){return Jc.forEach(r,function(r){cs(r.userId===n.userId);var i=ml(e.R,r);return Ol(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(qc.store),n=t.store(Mc.store);return t.store(Fc.store).get(Fc.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Ts(n),s=function(t){return[0,Sc(t)]}(o);r.push(e.get(s).next(function(n){return n?Jc.resolve():function(n){return e.put(new qc(0,Sc(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Jc.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Zc.store,{keyPath:Zc.keyPath});var n=e.store(Zc.store),r=new Sl,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Sc(i)})}};return e.store(Mc.store).$t({kt:!0},function(t,e){var n=new Ts(t);return i(n.popLast())}).next(function(){return e.store(Nc.store).$t({kt:!0},function(t,e){var n=Ic(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Uc.store);return n.$t(function(t,r){var i=vl(r),o=yl(e.R,i);return n.put(o)})},t}();function nh(t){t.createObjectStore(qc.store,{keyPath:qc.keyPath}).createIndex(qc.documentTargetsIndex,qc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Uc.store,{keyPath:Uc.keyPath}).createIndex(Uc.queryTargetsIndexName,Uc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Fc.store)}var rh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ih=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new es(ts.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zl(this,i),this.Le=n+"main",this.R=new cl(u),this.Be=new Yc(this.Le,11,new eh(this.R)),this.qe=new Ul(this.referenceDelegate,this.R),this.Ut=new xl,this.Ue=function(t,e){return new Yl(t,e)}(this.R,this.Ut),this.Ke=new _l,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new es(ts.FAILED_PRECONDITION,rh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Xo(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Ve.mG)(e,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Ve.mG)(e,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Ve.mG)(e,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return sh(e).put(new Vc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Xc(e))return is("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return is("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return oh(t).get(Oc.key).next(function(t){return Jc.resolve(e.tn(t))})},t.prototype.en=function(t){return sh(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ol(t,Vc.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Jc.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Jc.resolve(!0):oh(t).get(Oc.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new es(ts.FAILED_PRECONDITION,rh);return!1}}return!(!e.networkEnabled||!e.inForeground)||sh(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&is("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t=this;return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Oc.store,Vc.store],function(e){var n=new il(e,Xo.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return sh(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Pl.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return is("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Gc,function(o){return r=new il(o,i.Ne?i.Ne.next():Xo.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw os("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new es(ts.FAILED_PRECONDITION,Hc);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return oh(t).get(Oc.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new es(ts.FAILED_PRECONDITION,rh)})},t.prototype.Ze=function(t){var e=new Oc(this.clientId,this.allowTabSynchronization,Date.now());return oh(t).put(Oc.key,e)},t.yt=function(){return Yc.yt()},t.prototype.Xe=function(t){var e=this,n=oh(t);return n.get(Oc.key).next(function(t){return e.tn(t)?(is("IndexedDbPersistence","Releasing primary lease."),n.delete(Oc.key)):Jc.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(os("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,je.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return is("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return os("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){os("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function oh(t){return ol(t,Oc.store)}function sh(t){return ol(t,Vc.store)}function ah(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var uh=function(t,e){this.progress=t,this.wn=e},ch=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Us.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Ea(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Us(e)).next(function(t){var e=Ou();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ou();return this.Ut.getCollectionParents(t,i).next(function(s){return Jc.forEach(s,function(s){var a=function(t,e){return new wa(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=ta.newInvalidDocument(c),r=r.insert(c,l)),ou(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ma(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Ru(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof lu&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),lh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ru(),i=Ru(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),hh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(vs.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Sa(e)||xa(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(rs()<=Be.in.DEBUG&&is("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Da(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Su(La(t));return e.forEach(function(e,r){Ma(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return rs()<=Be.in.DEBUG&&is("QueryEngine","Using full collection scan to execute query:",Da(e)),this.Sn.getDocumentsMatchingQuery(t,e,vs.min())},t}(),dh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new wu(fs),this.kn=new Jl(function(t){return ra(t)},ia),this.$n=vs.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ch(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function fh(t,e,n,r){return new dh(t,e,n,r)}function ph(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:return n=ls(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new ch(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Ru(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function gh(t,e){var n=ls(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Jc.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);cs(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function mh(t){var e=ls(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function vh(t,e){var n=ls(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return cs(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Iu();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(yh(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(vs.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Jc.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function yh(t,e,n,r,i){var o=Ru();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Iu();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(vs.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):is("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function bh(t,e){var n=ls(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function _h(t,e){var n=ls(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Jc.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new ul(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function wh(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:r=ls(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Xc(s=a.sent()))throw s;return is("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Th(t,e,n){var r=ls(t),i=vs.min(),o=Ru();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ls(t),i=r.kn.get(n);return void 0!==i?Jc.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ka(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:vs.min(),n?o:Ru())}).next(function(t){return{documents:t,Bn:o}})})}function Ch(t,e){var n=ls(t),r=ls(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Sh(t){var e=ls(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ls(t),i=Iu(),o=dl(n),s=Xl(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Mc.readTimeIndex,range:a},function(t,e){var n=ll(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:fl(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function xh(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){return[2,(e=ls(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Xl(t),n=vs.min();return e.$t({index:Mc.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=fl(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Ah(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return(0,Ve.Jh)(this,function(p){switch(p.label){case 0:for(i=ls(t),o=Ru(),s=Iu(),a=Pu(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,_h(i,function(t){return ka(Ca(Ts.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return yh(t,d,s,vs.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Ih(t,e,n){return void 0===n&&(n=Ru()),(0,Ve.mG)(this,void 0,void 0,function(){var r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return[4,_h(t,ka(bl(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ls(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ku(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(As.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Eh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Jc.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ku(n.createTime)}),Jc.resolve()},t.prototype.getNamedQuery=function(t,e){return Jc.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:bl(t.bundledQuery),readTime:Ku(t.readTime)}}(e)),Jc.resolve()},t}(),Oh=function(){function t(){this.Wn=new Su(kh.Gn),this.zn=new Su(kh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new kh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new kh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Us(new Ts([])),r=new kh(n,t),i=new kh(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Us(new Ts([])),n=new kh(e,t),r=new kh(e,t+1),i=Ru();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new kh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),kh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Us.comparator(t.key,e.key)||fs(t.ns,e.ns)},t.Hn=function(t,e){return fs(t.ns,e.ns)||Us.comparator(t.key,e.key)},t}(),Ph=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Su(kh.Gn)}return t.prototype.checkEmpty=function(t){return Jc.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new sl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new kh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Jc.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Jc.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Jc.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Jc.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Jc.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new kh(e,0),i=new kh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Jc.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Su(fs);return e.forEach(function(t){var e=new kh(t,0),i=new kh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Jc.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Us.isDocumentKey(i)||(i=i.child(""));var o=new kh(new Us(i),0),s=new Su(fs);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Jc.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;cs(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Jc.forEach(e.mutations,function(i){var o=new kh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new kh(e,0),r=this.rs.firstAfterOrEqual(n);return Jc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Jc.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Nh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new wu(Us.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Jc.resolve(n?n.document.clone():ta.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Iu();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ta.newInvalidDocument(t))}),Jc.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Iu(),i=new Us(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ma(e,u)&&(r=r.insert(u.key,u.clone()))}return Jc.resolve(r)},t.prototype.fs=function(t,e){return Jc.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Rh(this)},t.prototype.getSize=function(t){return Jc.resolve(this.size)},t}(),Rh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Ve.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Jc.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ql),Dh=function(){function t(t){this.persistence=t,this.ds=new Jl(function(t){return ra(t)},ia),this.lastRemoteSnapshotVersion=vs.min(),this.highestTargetId=0,this.ws=0,this._s=new Oh,this.targetCount=0,this.ys=Ll.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Jc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Jc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Jc.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Jc.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Jc.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ll(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Jc.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Jc.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Jc.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Jc.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Jc.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Jc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Jc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Jc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Jc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Jc.resolve(n)},t.prototype.containsKey=function(t,e){return Jc.resolve(this._s.containsKey(e))},t}(),Mh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Xo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Dh(this),this.Ut=new Cl,this.Ue=function(t,e){return new Nh(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new cl(e),this.Ke=new Eh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ph(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;is("MemoryPersistence","Starting transaction:",t);var i=new Lh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Jc.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Ve.ZT)(e,t),e}(zc),Uh=function(){function t(t){this.persistence=t,this.As=new Oh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw us()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Jc.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Jc.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Jc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Jc.forEach(this.vs,function(r){var i=Us.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Jc.or([function(){return Jc.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Fh(t,e){return"firestore_clients_"+t+"_"+e}function Zh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Vh(t,e){return"firestore_targets_"+t+"_"+e}qh.UNAUTHENTICATED=new qh(null),qh.GOOGLE_CREDENTIALS=new qh("google-credentials-uid"),qh.FIRST_PARTY=new qh("first-party-uid");var jh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new es(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(os("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new es(i.error.code,i.error.message)),o?new t(e,i.state,r):(os("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Mu(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ls(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(os("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Hh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(os("SharedClientState","Failed to parse online state: "+e),null)},t}(),zh=function(){function t(){this.activeTargetIds=Mu()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$h=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new wu(fs),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Fh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new zh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Ve.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Fh(this.persistenceKey,r)))&&(o=Gh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Vh(this.persistenceKey,t));if(n){var r=Bh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Vh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return is("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){is("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){is("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(is("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Ve.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Ve.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Xo.o;if(null!=t)try{var n=JSON.parse(t);cs("number"==typeof n),e=n}catch(t){os("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Xo.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new jh(this.currentUser,t,e,n),i=Zh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Zh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Vh(this.persistenceKey,t),i=new Bh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Gh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return jh.Vs(new qh(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Bh.Vs(r,e)},t.prototype.js=function(t){return Hh.Vs(t)},t.prototype.ii=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(is("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Mu();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Jh=function(){function t(){this.li=new zh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new zh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Qh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Yh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){is("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){is("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Wh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Xh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Ve.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Wo;s.listenOnce(Jo.COMPLETE,function(){try{switch(s.getLastErrorCode()){case $o.NO_ERROR:var e=s.getResponseJson();is("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $o.TIMEOUT:is("Connection",'RPC "'+t+'" timed out'),o(new es(ts.DEADLINE_EXCEEDED,"Request time out"));break;case $o.HTTP_ERROR:var n=s.getStatus();if(is("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ts).indexOf(e)>=0?e:ts.UNKNOWN}(r.status);o(new es(a,r.message))}else o(new es(ts.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new es(ts.UNAVAILABLE,"Connection failed."));break;default:us()}}finally{is("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new jo,i=Mr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Yo({})),this.Fi(o.initMessageHeaders,e),(0,je.uI)()||(0,je.b$)()||(0,je.d)()||(0,je.w1)()||(0,je.Mn)()||(0,je.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");is("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Wh({Ei:function(t){c?is("Connection","Not sending because WebChannel is closed:",t):(u||(is("Connection","Opening WebChannel transport."),a.open(),u=!0),is("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ko.EventType.OPEN,function(){c||is("Connection","WebChannel transport opened.")}),h(a,Ko.EventType.CLOSE,function(){c||(c=!0,is("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ko.EventType.ERROR,function(t){c||(c=!0,ss("Connection","WebChannel transport errored:",t),l.Vi(new es(ts.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ko.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];cs(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){is("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=pu[t];if(void 0!==e)return _u(e)}(i),s=r.message;void 0===o&&(o=ts.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new es(o,s)),a.close()}else is("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Qo.STAT_EVENT,function(t){10===t.stat?is("Connection","Detected buffering proxy"):11===t.stat&&is("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);is("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return is("RestConnection","Received: ",t),t},function(e){throw ss("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Kh[t]},t}());function td(){return"undefined"!=typeof window?window:null}function ed(){return"undefined"!=typeof document?document:null}function nd(t){return new $u(t,!0)}var rd=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&is("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),id=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new rd(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ts.RESOURCE_EXHAUSTED?(os(e.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ts.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new es(ts.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Ve.mG)(t,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return is("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(is("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),od=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Ve.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:us()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(cs(void 0===e||"string"==typeof e),As.fromBase64String(e||"")):(cs(void 0===e||e instanceof Uint8Array),As.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ts.UNKNOWN:_u(t.code);return new es(e,t.message||"")}(a);n=new Zu(r,i,o,s||null)}else if("documentChange"in e){i=ec(t,(r=e.documentChange).document.name),o=Ku(r.document.updateTime);var a=new Ws({mapValue:{fields:r.document.fields}}),u=(s=ta.newFoundDocument(i,o,a),r.targetIds||[]);n=new qu(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ec(t,(r=e.documentDelete).document),o=r.readTime?Ku(r.readTime):vs.min(),a=ta.newNoDocument(i,o),n=new qu([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ec(t,(r=e.documentRemove).document),n=new qu([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return us();var c=e.filter;i=new yu(r=c.count||0),n=new Fu(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return vs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?vs.min():e.readTime?Ku(e.readTime):vs.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ic(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=oa(r)?{documents:lc(t,r)}:{query:hc(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Qu(t,e.resumeToken):e.snapshotVersion.compareTo(vs.min())>0&&(n.readTime=Ju(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return us()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ic(this.R),e.removeTarget=t,this.cr(e)},e}(id),sd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Ve.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(cs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(cs(void 0!==e),t.map(function(t){return function(t,e){var n=Ku(t.updateTime?t.updateTime:e);return n.isEqual(vs.min())&&(n=Ku(e)),new tu(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ku(t.commitTime);return this.listener.Tr(n,e)}return cs(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ic(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return uc(e.R,t)})};this.cr(n)},e}(id),ad=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Ve.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new es(ts.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ts.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new es(ts.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ts.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new es(ts.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),ud=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(os(e),this.Vr=!1):is("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),cd=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Ve.mG)(o,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return yd(this)?(is("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return(e=ls(t)).Or.add(4),[4,hd(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,ld(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new ud(n,r)};function ld(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:if(!yd(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function hd(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dd(t,e){var n=ls(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),vd(n)?md(n):Rd(n).er()&&pd(n,e))}function fd(t,e){var n=ls(t),r=Rd(n);n.$r.delete(e),r.er()&&gd(n,e),0===n.$r.size&&(r.er()?r.ir():yd(n)&&n.Br.set("Unknown"))}function pd(t,e){t.qr.U(e.targetId),Rd(t).mr(e)}function gd(t,e){t.qr.U(e),Rd(t).yr(e)}function md(t){t.qr=new ju({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Rd(t).start(),t.Br.Sr()}function vd(t){return yd(t)&&!Rd(t).tr()&&t.$r.size>0}function yd(t){return 0===ls(t).Or.size}function bd(t){t.qr=void 0}function _d(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){return t.$r.forEach(function(e,n){pd(t,e)}),[2]})})}function wd(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(n){return bd(t),vd(t)?(t.Br.Nr(e),md(t)):t.Br.set("Unknown"),[2]})})}function Td(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Zu&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),is("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cd(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof qu?t.qr.X(e):e instanceof Fu?t.qr.rt(e):t.qr.et(e),n.isEqual(vs.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,mh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(As.EMPTY_BYTE_STRING,n.snapshotVersion)),gd(t,e);var r=new ul(n.target,e,1,n.sequenceNumber);pd(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return is("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Cd(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Cd(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r=this;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:if(!Xc(e))throw e;return t.Or.add(1),[4,hd(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return mh(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Ve.mG)(r,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return is("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,ld(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Sd(t,e){return e().catch(function(n){return Cd(t,n,e)})}function xd(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:e=ls(t),n=Dd(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return yd(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,bh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Dd(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Cd(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ad(e)&&Id(e),[2]}})})}function Ad(t){return yd(t)&&!Dd(t).tr()&&t.kr.length>0}function Id(t){Dd(t).start()}function Ed(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){return Dd(t).Ar(),[2]})})}function Od(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Ve.Jh)(this,function(i){for(e=Dd(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function kd(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=al.from(r,e,n),[4,Sd(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,xd(t)];case 2:return o.sent(),[2]}})})}function Pd(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e&&Dd(t).pr?[4,function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return bu(r=e.code)&&r!==ts.ABORTED?(n=t.kr.shift(),Dd(t).sr(),[4,Sd(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,xd(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ad(t)&&Id(t),[2]}})})}function Nd(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return n=ls(t),e?(n.Or.delete(2),[4,ld(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,hd(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Rd(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ls(t);return r.br(),new od(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:_d.bind(null,t),Ri:wd.bind(null,t),_r:Td.bind(null,t)}),t.Mr.push(function(n){return(0,Ve.mG)(e,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),vd(t)?md(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),bd(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Dd(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ls(t);return r.br(),new sd(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ed.bind(null,t),Ri:Pd.bind(null,t),Ir:Od.bind(null,t),Tr:kd.bind(null,t)}),t.Mr.push(function(n){return(0,Ve.mG)(e,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,xd(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(is("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Md=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $c,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new es(ts.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ld(t,e){if(os("AsyncQueue",e+": "+t),Xc(t))return new es(ts.UNAVAILABLE,e+": "+t);throw t}var Ud=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Us.comparator(e.key,n.key)}:function(t,e){return Us.comparator(t.key,e.key)},this.keyedMap=Ou(),this.sortedSet=new wu(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qd=function(){function t(){this.Qr=new wu(Us.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):us():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Fd=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Ud.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Na(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Zd=function(){this.Wr=void 0,this.listeners=[]},Vd=function(){this.queries=new Jl(function(t){return Ra(t)},Na),this.onlineState="Unknown",this.Gr=new Set};function jd(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ve.Jh)(this,function(c){switch(c.label){case 0:if(n=ls(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Zd),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ld(a,"Initialization of query '"+Da(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&zd(n),[2]}})})}function Bd(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ve.Jh)(this,function(a){return n=ls(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Gd(t,e){for(var n=ls(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&zd(n)}function Hd(t,e,n){var r=ls(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function zd(t){t.Gr.forEach(function(t){t.next()})}var $d=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Fd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Fd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Jd=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Qd=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ec(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ac(this.R,t.document,!1):ta.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Ku(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Qd(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Ru()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return[4,Ah(this.localStore,new Qd(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ih(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new uh(Object.assign({},this.progress),t))]}})})}}();var Yd=function(t){this.key=t},Kd=function(t){this.key=t},Wd=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ru(),this.mutatedKeys=Ru(),this.lo=La(t),this.fo=new Ud(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new qd,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Sa(this.query)&&i.size===this.query.limit?i.last():null,c=xa(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ma(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Sa(this.query)||xa(this.query))for(;s.size>this.query.limit;){var l=Sa(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return us()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Fd(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qd,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ru(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Kd(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Yd(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ru();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Fd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Xd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tf=function(t){this.key=t,this.bo=!1},ef=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Jl(function(t){return Ra(t)},Na),this.Vo=new Map,this.So=new Set,this.Do=new wu(Us.comparator),this.Co=new Map,this.No=new Oh,this.xo={},this.Fo=new Map,this.ko=Ll.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function nf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:return n=Nf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,_h(n.localStore,ka(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,rf(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&dd(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function rf(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Ve.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Th(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(vf(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Th(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Wd(e,i.Bn),s=o._o(i.documents),a=Uu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),vf(t,n,u.To),c=new Xd(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function of(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return n=ls(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Na(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,wh(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),fd(n.remoteStore,r.targetId),gf(n,r.targetId)}).catch(Vl)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return gf(n,r.targetId),[4,wh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function sf(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:r=Rf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ls(t),i=ms.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ru());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=su(c,n.get(c.key));null!=l&&s.push(new lu(c.key,l,Xs(l.value.mapValue),eu.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new wu(fs)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,_f(r,i.changes)];case 3:return a.sent(),[4,xd(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ld(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function af(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:n=ls(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,vh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(cs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?cs(r.bo):t.removedDocuments.size>0&&(cs(r.bo),r.bo=!1))}),[4,_f(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Vl(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function uf(t,e,n){var r=ls(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ls(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&zd(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cf(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ve.Jh)(this,function(c){switch(c.label){case 0:return(r=ls(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new wu(Us.comparator)).insert(o,ta.newNoDocument(o,vs.min())),a=Ru().add(o),u=new Lu(vs.min(),new Map,new Su(fs),s,a),[4,af(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),bf(r),[3,4];case 2:return[4,wh(r.localStore,e,!1).then(function(){return gf(r,e,n)}).catch(Vl)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function lf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:n=ls(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,gh(n.localStore,e)];case 2:return i=o.sent(),pf(n,r,null),ff(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,_f(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Vl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function hf(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:r=ls(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ls(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return cs(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),pf(r,e,n),ff(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,_f(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Vl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function df(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:yd((n=ls(t)).remoteStore)||is("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ls(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ld(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ff(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function pf(t,e,n){var r=ls(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function gf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||mf(t,e)})}function mf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(fd(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),bf(t))}function vf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yd?(t.No.addReference(o.key,e),yf(t,o)):o instanceof Kd?(is("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||mf(t,o.key)):us()}}function yf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(is("SyncEngine","New document in limbo: "+n),t.So.add(r),bf(t))}function bf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Us(Ts.fromString(e)),r=t.ko.next();t.Co.set(r,new tf(n)),t.Do=t.Do.insert(n,r),dd(t.remoteStore,new ul(ka(Ca(n.path)),r,2,Xo.o))}}function _f(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:return r=ls(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=lh.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Ve.Jh)(this,function(l){switch(l.label){case 0:n=ls(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Jc.forEach(e,function(e){return Jc.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Jc.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Xc(r=l.sent()))throw r;return is("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function wf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return(n=ls(t)).currentUser.isEqual(e)?[3,3]:(is("SyncEngine","User change. New user:",e.toKey()),[4,ph(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new es(ts.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,_f(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Tf(t,e){var n=ls(t),r=n.Co.get(e);if(r&&r.bo)return Ru().add(r.key);var i=Ru(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Cf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return[4,Th((n=ls(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&vf(n,e.targetId,i.To),i)]}})})}function Sf(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){return[2,Sh((e=ls(t)).localStore).then(function(t){return _f(e,t)})]})})}function xf(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ls(t),r=ls(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Jc.resolve(null)})})}((i=ls(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,xd(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pf(i,e,r||null),ff(i,e),function(t,e){ls(ls(t)._n).Gt(e)}(i.localStore,e)):us(),s.label=4;case 4:return[4,_f(i,o)];case 5:return s.sent(),[3,7];case 6:is("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Af(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ve.Jh)(this,function(c){switch(c.label){case 0:return Nf(n=ls(t)),Rf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,If(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Nd(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)dd(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return gf(n,e),wh(n.localStore,e,!0)}),fd(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,If(n,a)];case 5:return c.sent(),function(t){var e=ls(t);e.Co.forEach(function(t,n){fd(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new wu(Us.comparator)}(n),n.$o=!1,[4,Nd(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function If(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return(0,Ve.Jh)(this,function(g){switch(g.label){case 0:n=ls(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,_h(n.localStore,ka(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Cf(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ch(n.localStore,a)];case 8:return p=g.sent(),[4,_h(n.localStore,p)];case 9:return u=g.sent(),[4,rf(n,Ef(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Ef(t){return Ta(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Of(t){var e=ls(t);return ls(ls(e.localStore).persistence).fn()}function kf(t,e,n,r){return(0,Ve.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ve.Jh)(this,function(a){switch(a.label){case 0:return(i=ls(t)).$o?(is("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Sh(i.localStore)];case 3:return o=a.sent(),s=Lu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,_f(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,wh(i.localStore,e,!0)];case 6:return a.sent(),gf(i,e,r),[3,8];case 7:us(),a.label=8;case 8:return[2]}})})}function Pf(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Ve.Jh)(this,function(d){switch(d.label){case 0:if(!(r=Nf(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(is("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ch(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,_h(r.localStore,a)];case 3:return u=d.sent(),[4,rf(r,Ef(a),u.targetId,!1)];case 4:d.sent(),dd(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,wh(r.localStore,t,!1).then(function(){fd(r.remoteStore,t),gf(r,t)}).catch(Vl)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Nf(t){var e=ls(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=af.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cf.bind(null,e),e.vo._r=Gd.bind(null,e.eventManager),e.vo.Mo=Hd.bind(null,e.eventManager),e}function Rf(t){var e=ls(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hf.bind(null,e),e}var Df=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return this.R=nd(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return fh(this.persistence,new hh,t.initialUser,this.R)},t.prototype.qo=function(t){return new Mh(Uh.bs,this.R)},t.prototype.Bo=function(t){return new Jh},t.prototype.terminate=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Ve.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,xh(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Rf(this.Qo.syncEngine)];case 4:return n.sent(),[4,xd(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return fh(this.persistence,new hh,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Gl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=ah(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?El.withCacheSize(this.cacheSizeBytes):El.DEFAULT;return new ih(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,td(),ed(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Jh},e}(Df),Lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Ve.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof $h?(this.sharedClientState.syncEngine={ui:xf.bind(null,n),ai:kf.bind(null,n),hi:Pf.bind(null,n),fn:Of.bind(null,n),ci:Sf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Ve.mG)(r,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return[4,Af(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=td();if(!$h.yt(e))throw new es(ts.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ah(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new $h(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Mf),Uf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n=this;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return uf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=wf.bind(null,this.syncEngine),[4,Nd(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Vd},t.prototype.createDatastore=function(t){var e=nd(t.databaseInfo.databaseId),n=new Xh(t.databaseInfo);return function(t,e,n){return new ad(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return uf(s.syncEngine,t,0)},o=Yh.yt()?new Yh:new Qh,new cd(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new ef(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e=ls(t),is("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,hd(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),qf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ff=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new $c,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Jd(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new es(ts.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ve.Jh)(this,function(u){switch(u.label){case 0:return n=ls(t),r=ic(n.R)+"/documents",i={documents:e.map(function(t){return tc(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){cs(!!e.found);var n=ec(t,e.found.name),r=Ku(e.found.updateTime),i=new Ws({mapValue:{fields:e.found.fields}});return ta.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){cs(!!e.missing),cs(!!e.readTime);var n=ec(t,e.missing),r=Ku(e.readTime);return ta.newNoDocument(n,r)}(t,e):us()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());cs(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new mu(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Us.fromPath(n);e.mutations.push(new vu(r,e.precondition(r)))}),[4,function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return n=ls(t),r=ic(n.R)+"/documents",i={writes:e.map(function(t){return uc(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw us();e=vs.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new es(ts.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?eu.updateTime(e):eu.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(vs.min()))throw new es(ts.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return eu.updateTime(e)}return eu.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Zf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new rd(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Ve.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Ve.Jh)(this,function(r){return t=new Ff(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Ds(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!bu(e)}return!1},t}(),Vf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qh.UNAUTHENTICATED,this.clientId=ds.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Ve.mG)(r,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return is("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new es(ts.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new $c;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ve.mG)(t,void 0,void 0,function(){var t,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ld(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function jf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),is("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Ve.mG)(i,void 0,void 0,function(){return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ph(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Bf(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Gf(t)];case 1:return n=i.sent(),is("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return(n=ls(t)).asyncQueue.verifyOperationInProgress(),is("RemoteStore","RemoteStore received new credentials"),r=yd(n),n.Or.add(3),[4,hd(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,ld(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Gf(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(is("FirestoreClient","Using default OfflineComponentProvider"),[4,jf(t,new Df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Hf(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(is("FirestoreClient","Using default OnlineComponentProvider"),[4,Bf(t,new Uf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function zf(t){return Gf(t).then(function(t){return t.persistence})}function $f(t){return Gf(t).then(function(t){return t.localStore})}function Jf(t){return Hf(t).then(function(t){return t.remoteStore})}function Qf(t){return Hf(t).then(function(t){return t.syncEngine})}function Yf(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return[4,Hf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=nf.bind(null,e.syncEngine),n.onUnlisten=of.bind(null,e.syncEngine),n)]}})})}function Kf(t,e,n){var r=this;void 0===n&&(n={});var i=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(r,void 0,void 0,function(){var r;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new qf({next:function(o){e.enqueueAndForget(function(){return Bd(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new es(ts.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new es(ts.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new $d(Ca(n.path),o,{includeMetadataChanges:!0,so:!0});return jd(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Wf(t,e,n){var r=this;void 0===n&&(n={});var i=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(r,void 0,void 0,function(){var r;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new qf({next:function(n){e.enqueueAndForget(function(){return Bd(t,s)}),n.fromCache&&"server"===r.source?i.reject(new es(ts.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new $d(n,o,{includeMetadataChanges:!0,so:!0});return jd(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Xf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},tp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ep=new Map,np=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},rp=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(qh.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ip=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),op=function(){function t(t){var e=this;this.currentUser=qh.UNAUTHENTICATED,this.oc=new $c,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){is("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(is("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(is("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(cs("string"==typeof n.accessToken),new np(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Ve.mG)(n,void 0,void 0,function(){return(0,Ve.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return cs(null===t||"string"==typeof t),new qh(t)},t}(),sp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=qh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),ap=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new sp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(qh.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function up(t,e,n){if(!n)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function cp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new es(ts.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function lp(t,e,n,r){if(!0===e&&!0===r)throw new es(ts.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function hp(t){if(!Us.isDocumentKey(t))throw new es(ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function dp(t){if(Us.isDocumentKey(t))throw new es(ts.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function fp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":us()}function pp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new es(ts.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fp(t);throw new es(ts.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function gp(t,e){if(e<=0)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var mp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new es(ts.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new es(ts.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),vp=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mp({}),this._settingsFrozen=!1,t instanceof tp?(this._databaseId=t,this._credentials=new rp):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new es(ts.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(t.options.projectId)}(t),this._credentials=new op(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new es(ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new es(ts.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new rp;switch(t.type){case"gapi":var e=t.client;return cs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ap(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new es(ts.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=ep.get(this))&&(is("ComponentProvider","Removing Datastore"),ep.delete(this),t.terminate()),Promise.resolve();var t},t}(),yp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new _p(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),bp=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ca(r))||this)._path=r,i.type="collection",i}return(0,Ve.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new yp(this.firestore,null,new Us(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(bp);function wp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,je.m9)(t),up("collection","path",e),t instanceof vp)return dp(n=Ts.fromString.apply(Ts,(0,Ve.ev)([e],r))),new _p(t,null,n);if(!(t instanceof yp||t instanceof _p))throw new es(ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dp(n=Ts.fromString.apply(Ts,(0,Ve.ev)([t.path],r)).child(Ts.fromString(e))),new _p(t.firestore,null,n)}function Tp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,je.m9)(t),1===arguments.length&&(e=ds.u()),up("doc","path",e),t instanceof vp)return hp(n=Ts.fromString.apply(Ts,(0,Ve.ev)([e],r))),new yp(t,null,new Us(n));if(!(t instanceof yp||t instanceof _p))throw new es(ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return hp(n=t._path.child(Ts.fromString.apply(Ts,(0,Ve.ev)([e],r)))),new yp(t.firestore,t instanceof _p?t.converter:null,new Us(n))}function Cp(t,e){return t=(0,je.m9)(t),e=(0,je.m9)(e),(t instanceof yp||t instanceof _p)&&(e instanceof yp||e instanceof _p)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Sp(t,e){return t=(0,je.m9)(t),e=(0,je.m9)(e),t instanceof bp&&e instanceof bp&&t.firestore===e.firestore&&Na(t._query,e._query)&&t.converter===e.converter}var xp=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new rd(this,"async_queue_retry"),this.Ic=function(){var e=ed();e&&is("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ed();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ed();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new $c;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Xc(t=n.sent()))throw t;return is("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,os("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Md.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&us()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t;return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ap(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new $c,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new xp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Ve.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Op(this),this._firestoreClient.terminate()},e}(vp);function Ep(t){return t._firestoreClient||Op(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Op(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Xf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Vf(t._credentials,t._queue,r)}function kp(t,e,n){var r=this,i=new $c;return t.asyncQueue.enqueue(function(){return(0,Ve.mG)(r,void 0,void 0,function(){var r;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,jf(t,n)];case 1:return o.sent(),[4,Bf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ts.FAILED_PRECONDITION||t.code===ts.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Pp(t){if(t._initialized||t._terminated)throw new es(ts.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Np=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new es(ts.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ss(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Rp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(As.fromBase64String(e))}catch(e){throw new es(ts.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(As.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Dp=function(t){this._methodName=t},Mp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new es(ts.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new es(ts.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return fs(this._lat,t._lat)||fs(this._long,t._long)},t}(),Lp=/^__.*__$/,Up=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new lu(t,this.data,this.fieldMask,e,this.fieldTransforms):new cu(t,this.data,e,this.fieldTransforms)},t}(),qp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new lu(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw us()}}var Zp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return sg(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Fp(this.Nc)&&Lp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Vp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||nd(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Zp({Nc:t,methodName:e,qc:n,path:Ss.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jp(t){var e=t._freezeSettings(),n=nd(t._databaseId);return new Vp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);ng("Data must be an object, but it was:",s,r);var a,u,c=tg(r,s);if(o.merge)a=new xs(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=rg(e,d[h],n);if(!s.contains(f))throw new es(ts.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");ag(l,f)||l.push(f)}a=new xs(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Up(new Ws(c),a,u)}var Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Dp);function Hp(t,e,n){return new Zp({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Xa(t.path,new Ha)},e.prototype.isEqual=function(t){return t instanceof e},e}(Dp),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ve.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Hp(this,t,!0),n=this.Kc.map(function(t){return Xp(t,e)}),r=new za(n);return new Xa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dp),Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ve.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Hp(this,t,!0),n=this.Kc.map(function(t){return Xp(t,e)}),r=new Ja(n);return new Xa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Ve.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ya(t.R,Za(t.R,this.Qc));return new Xa(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Dp);function Yp(t,e,n,r){var i=t.Uc(1,e,n);ng("Data must be an object, but it was:",i,r);var o=[],s=Ws.empty();bs(r,function(t,r){var a=og(e,t,n);r=(0,je.m9)(r);var u=i.Oc(a);if(r instanceof Gp)o.push(a);else{var c=Xp(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new xs(o);return new qp(s,a,i.fieldTransforms)}function Kp(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[rg(e,r,n)],u=[i];if(o.length%2!=0)throw new es(ts.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(rg(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ws.empty(),d=a.length-1;d>=0;--d)if(!ag(l,a[d])){var f=a[d],p=u[d];p=(0,je.m9)(p);var g=s.Oc(f);if(p instanceof Gp)l.push(f);else{var m=Xp(p,g);null!=m&&(l.push(f),h.set(f,m))}}var v=new xs(l);return new qp(h,v,s.fieldTransforms)}function Wp(t,e,n,r){return void 0===r&&(r=!1),Xp(n,t.Uc(r?4:3,e))}function Xp(t,e){if(eg(t=(0,je.m9)(t)))return ng("Unsupported field value:",e,t),tg(t,e);if(t instanceof Dp)return function(t,e){if(!Fp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Xp(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Za(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ms.fromDate(t);return{timestampValue:Ju(e.R,n)}}if(t instanceof ms)return n=new ms(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ju(e.R,n)};if(t instanceof Mp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rp)return{bytesValue:Qu(e.R,t._byteString)};if(t instanceof yp){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+fp(t))}(t,e)}function tg(t,e){var n={};return _s(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,function(t,r){var i=Xp(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function eg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ms||t instanceof Mp||t instanceof Rp||t instanceof yp||t instanceof Dp)}function ng(t,e,n){if(!eg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=fp(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function rg(t,e,n){if((e=(0,je.m9)(e))instanceof Np)return e._internalPath;if("string"==typeof e)return og(t,e);throw sg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ig=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(ig)>=0)throw sg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Np.bind.apply(Np,(0,Ve.ev)([void 0],e.split(".")))))._internalPath}catch(sm){throw sg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function sg(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new es(ts.INVALID_ARGUMENT,(a+=". ")+t+u)}function ag(t,e){return t.some(function(t){return t.isEqual(e)})}var ug=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(lg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ug);function lg(t,e){return"string"==typeof e?og(t,e):e instanceof Np?e._internalPath:e._delegate._internalPath}var hg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),dg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Ve.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new fg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(lg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ug),fg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(dg),pg=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new hg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new fg(n._firestore,n._userDataWriter,r.key,r,new hg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new es(ts.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new fg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new fg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:gg(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function gg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return us()}}function mg(t,e){return t instanceof dg&&e instanceof dg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof pg&&e instanceof pg&&t._firestore===e._firestore&&Sp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function vg(t){if(xa(t)&&0===t.explicitOrderBy.length)throw new es(ts.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yg=function(){};function bg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var _g=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Ve.ZT)(e,t),e.prototype._apply=function(t){var e=jp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ig(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ag(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ag(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ig(s,o),a=Wp(n,"where",s,"in"===o||"not-in"===o);var h=sa.create(i,o,a);return function(t,e){if(e.g()){var n=Ia(t);if(null!==n&&!n.isEqual(e.field))throw new es(ts.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Aa(t);null!==r&&Eg(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new es(ts.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new bp(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(yg),wg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,Ve.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new va(e,n);return function(t,e){if(null===Aa(t)){var n=Ia(t);null!==n&&Eg(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new bp(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new wa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(yg),Tg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Ve.ZT)(e,t),e.prototype._apply=function(t){return new bp(t.firestore,t.converter,Pa(t._query,this.Hc,this.Jc))},e}(yg),Cg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ve.ZT)(e,t),e.prototype._apply=function(t){var e=xg(t,this.type,this.Yc,this.Xc);return new bp(t.firestore,t.converter,function(t,e){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(yg),Sg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ve.ZT)(e,t),e.prototype._apply=function(t){var e=xg(t,this.type,this.Yc,this.Xc);return new bp(t.firestore,t.converter,function(t,e){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(yg);function xg(t,e,n,r){if(n[0]=(0,je.m9)(n[0]),n[0]instanceof ug)return function(t,e,n,r,i){if(!r)throw new es(ts.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Oa(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Hs(e,r.key));else{var c=r.data.field(u.field);if(Ps(c))throw new es(ts.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new es(ts.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ga(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jp(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new es(ts.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new es(ts.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ea(t)&&-1!==c.indexOf("/"))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ts.fromString(c));if(!Us.isDocumentKey(l))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Us(l);a.push(Hs(e,h))}else{var d=Wp(n,r,c);a.push(d)}}return new ga(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ag(t,e,n){if("string"==typeof(n=(0,je.m9)(n))){if(""===n)throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ea(e)&&-1!==n.indexOf("/"))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ts.fromString(n));if(!Us.isDocumentKey(r))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Hs(t,new Us(r))}if(n instanceof yp)return Hs(t,n._key);throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+fp(n)+".")}function Ig(t,e){if(!Array.isArray(t)||0===t.length)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Eg(t,e,n){if(!n.isEqual(e))throw new es(ts.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Og=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),qs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Os(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ks(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw us()}},t.prototype.convertObject=function(t,e){var n=this,r={};return bs(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Mp(Os(t.latitude),Os(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ns(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Rs(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Es(t);return new ms(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ts.fromString(t);cs(Cc(n));var r=new tp(n.get(1),n.get(3)),i=new Us(n.popFirst(5));return r.isEqual(e)||os("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function kg(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Pg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ve.ZT)(e,t),e.prototype.convertBytes=function(t){return new Rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Og),Ng=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Rg(t,this._firestore),i=kg(r.converter,e,n),o=Bp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,eu.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Rg(t,this._firestore);return o="string"==typeof(e=(0,je.m9)(e))||e instanceof Np?Kp(this._dataReader,"WriteBatch.update",s._key,e,n,r):Yp(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,eu.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Rg(t,this._firestore);return this._mutations=this._mutations.concat(new mu(e._key,eu.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new es(ts.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Rg(t,e){if((t=(0,je.m9)(t)).firestore!==e)throw new es(ts.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Dg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ve.ZT)(e,t),e.prototype.convertBytes=function(t){return new Rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yp(this.firestore,null,e)},e}(Og);function Mg(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=pp(t,yp);var o=pp(t.firestore,Ip),s=jp(o);return Ug(o,[("string"==typeof(e=(0,je.m9)(e))||e instanceof Np?Kp(s,"updateDoc",t._key,e,n,r):Yp(s,"updateDoc",t._key,e)).toMutation(t._key,eu.exists(!0))])}function Lg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,je.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ap(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Ap(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof yp)c=pp(t.firestore,Ip),l=Ca(t._key.path),u={next:function(e){i[a]&&i[a](qg(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=pp(t,bp);c=pp(f.firestore,Ip),l=f._query;var p=new Dg(c);u={next:function(t){i[a]&&i[a](new pg(c,p,f,t))},error:i[a+1],complete:i[a+2]},vg(t._query)}return function(t,e,n,r){var i=this,o=new qf(r),s=new $d(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(i,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e=jd,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(i,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e=Bd,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Ep(c),l,h,u)}function Ug(t,e){return function(t,e){var n=this,r=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return n=sf,[4,Qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Ep(t),e)}function qg(t,e,n){var r=n.docs.get(e._key),i=new Dg(t);return new dg(t,i,e._key,r,new hg(n.hasPendingWrites,n.fromCache),e.converter)}var Fg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Ve.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Rg(e,this._firestore),i=new Dg(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new dg(n._firestore,i,r._key,t._document,new hg(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jp(t)}return t.prototype.get=function(t){var e=this,n=Rg(t,this._firestore),r=new Pg(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return us();var i=t[0];if(i.isFoundDocument())return new ug(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ug(e._firestore,r,n._key,null,n.converter);throw us()})},t.prototype.set=function(t,e,n){var r=Rg(t,this._firestore),i=kg(r.converter,e,n),o=Bp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Rg(t,this._firestore);return o="string"==typeof(e=(0,je.m9)(e))||e instanceof Np?Kp(this._dataReader,"Transaction.update",s._key,e,n,r):Yp(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Rg(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Zg(){if("undefined"==typeof Uint8Array)throw new es(ts.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Vg(){if("undefined"==typeof atob)throw new es(ts.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var jg=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Vg(),new t(Rp.fromBase64String(e))},t.fromUint8Array=function(e){return Zg(),new t(Rp.fromUint8Array(e))},t.prototype.toBase64=function(){return Vg(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Zg(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Bg=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Pp(t=pp(t,Ip));var n=Ep(t),r=t._freezeSettings(),i=new Uf;return kp(n,i,new Mf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Pp(t=pp(t,Ip));var e=Ep(t),n=t._freezeSettings(),r=new Uf;return kp(e,r,new Lf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new es(ts.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new $c;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ve.mG)(e,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Ve.mG)(this,void 0,void 0,function(){return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return Yc.yt()?[4,Yc.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ah(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Gg=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof tp||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||ss("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=pp(t,vp))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&ss("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,je.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new es(ts.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ip(new np(o,new qh(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ve.mG)(e,void 0,void 0,function(){var e,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return[4,zf(t)];case 1:return e=r.sent(),[4,Jf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ls(t);return e.Or.delete(0),ld(e)}(n))]}})})})}(Ep(pp(this._delegate,Ip)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ve.mG)(e,void 0,void 0,function(){var e,n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return[4,zf(t)];case 1:return e=r.sent(),[4,Jf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return(e=ls(t)).Or.add(0),[4,hd(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Ep(pp(this._delegate,Ip)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&lp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(e,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return e=df,[4,Qf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Ep(pp(this._delegate,Ip)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new qf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ls(t).Gr.add(e),e.next()},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ls(t).Gr.delete(e)},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Ep(t=pp(t,Ip)),Ap(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new es(ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new im(this,wp(this._delegate,t))}catch(t){throw Yg(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Qg(this,Tp(this._delegate,t))}catch(t){throw Yg(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new em(this,function(t,e){if(t=pp(t,vp),up("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new es(ts.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new bp(t,null,function(t){return new wa(Ts.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Yg(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Hf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Zf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Ep(t),function(n){return e(new Fg(t,n))})}(this._delegate,function(n){return t(new zg(e,n))})},t.prototype.batch=function(){var t=this;return Ep(this._delegate),new $g(new Ng(this._delegate,function(e){return Ug(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new es(ts.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new es(ts.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Hg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ve.ZT)(e,t),e.prototype.convertBytes=function(t){return new jg(new Rp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Qg.eu(e,this.firestore,null)},e}(Og),zg=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.prototype.get=function(t){var e=this,n=om(t);return this._delegate.get(n).then(function(t){return new Xg(e._firestore,new dg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=om(t);return n?(cp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=om(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ve.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=om(t);return this._delegate.delete(e),this},t}(),$g=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=om(t);return n?(cp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=om(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ve.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=om(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Jg=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new fg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new tm(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Hg(e),n),i.set(n,o)),o},t}();Jg.su=new WeakMap;var Qg=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new es(ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new yp(n._delegate,r,new Us(e)))},t.eu=function(e,n,r){return new t(n,new yp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new im(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new im(this.firestore,wp(this._delegate,t))}catch(t){throw Yg(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,je.m9)(t))instanceof yp&&Cp(this._delegate,t)},t.prototype.set=function(t,e){e=cp("DocumentReference.set",e);try{return function(t,e,n){t=pp(t,yp);var r=pp(t.firestore,Ip),i=kg(t.converter,e,n);return Ug(r,[Bp(jp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,eu.none())])}(this._delegate,t,e)}catch(t){throw Yg(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Mg(this._delegate,t):Mg.apply(void 0,(0,Ve.ev)([this._delegate,t,e],n))}catch(t){throw Yg(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ug(pp((t=this._delegate).firestore,Ip),[new mu(t._key,eu.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Kg(e),i=Wg(e,function(e){return new Xg(t.firestore,new dg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Lg(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pp(t,yp);var e=pp(t.firestore,Ip),n=Ep(e),r=new Dg(e);return function(t,e){var n=this,r=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i;return(0,Ve.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ls(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new es(ts.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ld(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new dg(e,r,t._key,n,new hg(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=pp(t,yp);var e=pp(t.firestore,Ip);return Kf(Ep(e),t._key,{source:"server"}).then(function(n){return qg(e,t,n)})}(this._delegate):function(t){t=pp(t,yp);var e=pp(t.firestore,Ip);return Kf(Ep(e),t._key).then(function(n){return qg(e,t,n)})}(this._delegate)).then(function(t){return new Xg(e.firestore,new dg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Jg.nu(this.firestore,e):null))},t}();function Yg(t,e,n){return t.message=t.message.replace(e,n),t}function Kg(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ap(r))return r}return{}}function Wg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ap(t[0])?t[0]:Ap(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Xg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Qg(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return mg(this._delegate,t._delegate)},t}(),tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ve.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Xg),em=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,bg(this._delegate,function(t,e,n){var r=e,i=lg("where",t);return new _g(i,r,n)}(e,n,r)))}catch(e){throw Yg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,bg(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=lg("orderBy",t);return new wg(r,n)}(e,n)))}catch(e){throw Yg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,bg(this._delegate,function(t){return gp("limit",t),new Tg("limit",t,"F")}(e)))}catch(e){throw Yg(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,bg(this._delegate,function(t){return gp("limitToLast",t),new Tg("limitToLast",t,"L")}(e)))}catch(e){throw Yg(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cg("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Yg(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cg("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Yg(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Yg(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Yg(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Sp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=pp(t,bp);var e=pp(t.firestore,Ip),n=Ep(e),r=new Dg(e);return function(t,e){var n=this,r=new $c;return t.asyncQueue.enqueueAndForget(function(){return(0,Ve.mG)(n,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ve.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Th(t,e,!0)];case 1:return a=u.sent(),r=new Wd(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ld(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new pg(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=pp(t,bp);var e=pp(t.firestore,Ip),n=Ep(e),r=new Dg(e);return Wf(n,t._query,{source:"server"}).then(function(n){return new pg(e,r,t,n)})}(this._delegate):function(t){t=pp(t,bp);var e=pp(t.firestore,Ip),n=Ep(e),r=new Dg(e);return vg(t._query),Wf(n,t._query).then(function(n){return new pg(e,r,t,n)})}(this._delegate)).then(function(t){return new rm(e.firestore,new pg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Kg(e),i=Wg(e,function(e){return new rm(t.firestore,new pg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Lg(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Jg.nu(this.firestore,e):null))},t}(),nm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new tm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),rm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new em(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new tm(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new nm(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new tm(n._firestore,r))})},t.prototype.isEqual=function(t){return mg(this._delegate,t._delegate)},t}(),im=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Ve.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Qg(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Qg(this.firestore,void 0===t?Tp(this._delegate):Tp(this._delegate,t))}catch(t){throw Yg(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=pp(t.firestore,Ip),r=Tp(t),i=kg(t.converter,e);return Ug(n,[Bp(jp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,eu.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Qg(e.firestore,t)})},e.prototype.isEqual=function(t){return Cp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Jg.nu(this.firestore,t):null))},e}(em);function om(t){return pp(t,yp)}var sm,am=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Np.bind.apply(Np,(0,Ve.ev)([void 0],t)))}return t.documentId=function(){return new t(Ss.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,je.m9)(t))instanceof Np&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),um=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new zp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Gp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Qp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),cm=n(6034),lm={Firestore:Gg,GeoPoint:Mp,Timestamp:ms,Blob:jg,Transaction:zg,WriteBatch:$g,DocumentReference:Qg,DocumentSnapshot:Xg,Query:em,QueryDocumentSnapshot:tm,QuerySnapshot:rm,CollectionReference:im,FieldPath:am,FieldValue:um,setLogLevel:function(t){ns.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function hm(t,e){return function(t,e=Ae.z){return new Mt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function dm(t,e){return hm(t,e).pipe((0,Ft.U)(t=>({payload:t,type:"query"})))}function fm(t,e){return dm(t,e).pipe(ke(void 0),Pe(),(0,Ft.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function pm(t,e,n){return fm(t,n).pipe(De((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return gm(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return gm(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gm(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Ue(void 0,void 0)),(0,Ft.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function gm(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function mm(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new cm.wA("firestore",function(t){return function(t,e){return new Gg(t,new Ip(t,e),new Bg)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},lm)))})(sm=Ze.Z),sm.registerVersion("@firebase/firestore","2.3.10");class vm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=fm(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ft.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ke(void 0),Pe(),Xt(([t,e])=>e.length>0||!t),(0,Ft.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=mm(t);return pm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return dm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Lt.D)(this.query.get(t)).pipe((0,qt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new ym(this.ref.doc(t),this.afs)}}class ym{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Sm(n,e);return new vm(r,i,this.afs)}snapshotChanges(){return function(t,e){return hm(t,e).pipe(ke(void 0),Pe(),(0,Ft.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ft.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Lt.D)(this.ref.get(t)).pipe((0,qt.QV)(this.afs.schedulers.insideAngular))}}class bm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?fm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):fm(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(De((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=mm(t);return pm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return dm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Lt.D)(this.query.get(t)).pipe((0,qt.QV)(this.afs.schedulers.insideAngular))}}const _m=new r.OlP("angularfire2.enableFirestorePersistence"),wm=new r.OlP("angularfire2.firestore.persistenceSettings"),Tm=new r.OlP("angularfire2.firestore.settings"),Cm=new r.OlP("angularfire2.firestore.use-emulator");function Sm(t,e=(t=>t)){return{query:e(t),ref:t}}let xm=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Nt.HU(o),this.keepUnstableUntilFirst=(0,Nt.ss)(this.schedulers);const c=(0,Nt.on)(t,o,e);!Fe.Z.auth&&u&&(0,Nt.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Nt.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!K(i)){const e=()=>{try{return(0,Lt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(sm){return"undefined"!=typeof console&&console.warn(sm),(0,Dt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,Dt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Sm(n,e),o=this.schedulers.ngZone.run(()=>r);return new vm(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new bm(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new ym(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(_m,8),r.LFG(Tm,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(wm,8),r.LFG(Cm,8),r.LFG(ye,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(_m,8),r.LFG(Tm,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(wm,8),r.LFG(Cm,8),r.LFG(ye,8))},token:t,providedIn:"any"}),t})(),Am=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:_m,useValue:!0},{provide:wm,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[xm]}),t})();class Im{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Em(t,this.dueTime,this.scheduler))}}class Em extends Wt.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Om,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Om(t){t.debouncedNext()}var km="firebasestorage.googleapis.com",Pm=function(t){function e(n,r){var i=t.call(this,Nm(n),"Firebase Storage: "+r+" ("+Nm(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Ve.ZT)(e,t),e.prototype._codeEquals=function(t){return Nm(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(je.ZR);function Nm(t){return"storage/"+t}function Rm(){return new Pm("unknown","An unknown error occurred, please check the error payload for server response.")}function Dm(){return new Pm("canceled","User canceled the upload/download.")}function Mm(){return new Pm("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lm(t){return new Pm("invalid-argument",t)}function Um(){return new Pm("app-deleted","The Firebase app was deleted.")}function qm(t){return new Pm("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fm(t,e){return new Pm("invalid-format","String does not match format '"+t+"': "+e)}function Zm(t){throw new Pm("internal-error","Internal error: "+t)}var Vm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},jm=function(t,e){this.data=t,this.contentType=e||null};function Bm(t,e){switch(t){case Vm.RAW:return new jm(Gm(e));case Vm.BASE64:case Vm.BASE64URL:return new jm(Hm(t,e));case Vm.DATA_URL:return new jm((n=new zm(e)).base64?Hm(Vm.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(sm){throw Fm(Vm.DATA_URL,"Malformed data URL.")}return Gm(e)}(n.rest),new zm(e).contentType)}var n;throw Rm()}function Gm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Hm(t,e){switch(t){case Vm.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Fm(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Vm.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Fm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(sm){throw Fm(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var zm=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Fm(Vm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},$m={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jm(t){switch(t){case"running":case"pausing":case"canceling":return $m.RUNNING;case"paused":return $m.PAUSED;case"success":return $m.SUCCESS;case"canceled":return $m.CANCELED;case"error":default:return $m.ERROR}}var Qm=(()=>(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Qm||(Qm={})),Qm))(),Ym=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Qm.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Qm.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Qm.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Zm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Zm("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Zm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(sm){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Zm("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Km=function(){function t(){}return t.prototype.createConnection=function(){return new Ym},t}(),Wm=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(sm){return new t(e,"")}if(""===r.path)return r;throw new Pm("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===km?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new Pm("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Xm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function tv(t){return"string"==typeof t||t instanceof String}function ev(t){return nv()&&t instanceof Blob}function nv(){return"undefined"!=typeof Blob}function rv(t,e,n,r){if(r<e)throw Lm("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Lm("Invalid value for '"+t+"'. Expected "+n+" or less.")}function iv(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function ov(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var sv=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(sm){o(sm)}else null!==s?((r=Rm()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Um():Dm():new Pm("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new av(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new av(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===Qm.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new av(s,r))}else{var a=r.getErrorCode()===Qm.ABORT;e(!1,new av(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Ve.ev)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Ve.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),av=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function uv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=uv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(nv())return new Blob(t);throw new Pm("unsupported-environment","This browser doesn't seem to support creating Blobs")}var lv=function(){function t(t,e){var n=0,r="";ev(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ev(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(nv()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(cv.apply(null,r))}var i=e.map(function(t){return tv(t)?Bm(Vm.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function hv(t){var e;try{e=JSON.parse(t)}catch(sm){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function dv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function fv(t,e){return e}var pv=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||fv},gv=null;function mv(){if(gv)return gv;var t=[];t.push(new pv("bucket")),t.push(new pv("generation")),t.push(new pv("metageneration")),t.push(new pv("name","fullPath",!0));var e=new pv("name");e.xform=function(t,e){return function(t){return!tv(t)||t.length<2?t:dv(t)}(e)},t.push(e);var n=new pv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new pv("timeCreated")),t.push(new pv("updated")),t.push(new pv("md5Hash",null,!0)),t.push(new pv("cacheControl",null,!0)),t.push(new pv("contentDisposition",null,!0)),t.push(new pv("contentEncoding",null,!0)),t.push(new pv("contentLanguage",null,!0)),t.push(new pv("contentType",null,!0)),t.push(new pv("metadata","customMetadata",!0)),gv=t}function vv(t,e,n){var r=hv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Wm(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function yv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var bv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function _v(t){if(!t)throw Rm()}function wv(t,e){return function(n,r){var i=vv(t,r,e);return _v(null!==i),i}}function Tv(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Pm("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Pm("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Pm("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Pm("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Cv(t){var e=Tv(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Pm("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Sv(t,e,n){var r=iv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new bv(r,"GET",wv(t,n),i);return o.errorHandler=Cv(e),o}function xv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Av=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Iv(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(sm){_v(!1)}return _v(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ev=262144,Ov=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function kv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Pv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=mv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=xv(e,r,i),a={name:s.fullPath},u=iv(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=yv(s,n),h=new bv(u,"POST",function(t){var e;Iv(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(sm){_v(!1)}return _v(tv(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Tv(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new bv(n,"POST",function(t){var e=Iv(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(sm){_v(!1)}n||_v(!1);var i=Number(n);return _v(!isNaN(i)),new Av(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Tv(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=Ev*this._chunkMultiplier,n=new Av(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new Av(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Pm("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},f=r.slice(h,h+l);if(null===f)throw Mm();var p=new bv(n,"POST",function(t,n){var i,s=Iv(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?wv(e,o)(t,n):null,new Av(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=Tv(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(sm){return t._error=sm,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){Ev*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Sv(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=xv(e,r,i),c=yv(u,n),l=lv.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Mm();var h={name:u.fullPath},d=iv(o,t.host),f=t.maxUploadRetryTime,p=new bv(d,"POST",wv(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Tv(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Dm(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Jm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Ov(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Jm(this._state)){case $m.SUCCESS:kv(this._resolve.bind(null,this.snapshot))();break;case $m.CANCELED:case $m.ERROR:kv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Jm(this._state)){case $m.RUNNING:case $m.PAUSED:t.next&&kv(t.next.bind(t,this.snapshot))();break;case $m.SUCCESS:t.complete&&kv(t.complete.bind(t))();break;case $m.CANCELED:case $m.ERROR:t.error&&kv(t.error.bind(t,this._error))();break;default:t.error&&kv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Nv=function(){function t(t,e){this._service=t,this._location=e instanceof Wm?e:Wm.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Wm(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return dv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Wm(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw qm(t)},t}();function Rv(t){var e={prefixes:[],items:[]};return Dv(t,e).then(function(){return e})}function Dv(t,e,n){return(0,Ve.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Ve.Jh)(this,function(s){switch(s.label){case 0:return[4,Mv(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Dv(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function Mv(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n,r;return(0,Ve.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&rv("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=iv(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new bv(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=hv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Wm(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Wm(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return _v(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Tv(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function Lv(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Wm(t._location.bucket,n);return new Nv(t.storage,r)}function Uv(t){return/^[A-Za-z]+:\/\//.test(t)}function qv(t,e){if(t instanceof Vv){var n=t;if(null==n._bucket)throw new Pm("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Nv(n,n._bucket);return null!=e?qv(r,e):r}if(void 0!==e){if(e.includes(".."))throw Lm('`path` param cannot contain ".."');return Lv(t,e)}return t}function Fv(t,e){if(e&&Uv(e)){if(t instanceof Vv)return new Nv(t,e);throw Lm("To use ref(service, url), the first argument must be a Storage instance.")}return qv(t,e)}function Zv(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Wm.makeFromBucketSpec(n,t)}var Vv=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=km,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Wm.makeFromBucketSpec(i,this._host):Zv(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Wm.makeFromBucketSpec(this._url,t):Zv(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){rv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){rv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t,e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Ve.mG)(this,void 0,void 0,function(){var t;return(0,Ve.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Nv(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Xm(Um());var i=function(t,e,n,r,i,o){var s=ov(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new sv(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function jv(t,e){return Fv(t=(0,je.m9)(t),e)}var Bv,Gv,Hv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),zv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Hv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new Hv(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Hv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Hv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),$v=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new Jv(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new Jv(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Jv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Lv(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new zv(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Pv(t,new lv(e),n)}(t=(0,je.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Vm.RAW),this._throwIfRoot("putString");var r=Bm(e,t),i=(0,Ve.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zv(new Pv(this._delegate,new lv(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Rv(t=(0,je.m9)(t))}(this._delegate).then(function(e){return new $v(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return Mv(t=(0,je.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new $v(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Sv(t.storage,t._location,mv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,je.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Ve.mG)(this,void 0,void 0,function(){var n;return(0,Ve.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=iv(e.fullServerUrl(),t.host),o=yv(n,r),s=t.maxOperationRetryTime,a=new bv(i,"PATCH",wv(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Cv(e),a}(t.storage,t._location,e,mv()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,je.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=iv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new bv(r,"GET",function(t,e){return function(n,r){var i=vv(t,r,e);return _v(null!==i),function(t,e,n){var r=hv(e);if(null===r)return null;if(!tv(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return iv("/b/"+o(t.bucket)+"/o/"+o(r),n)+ov({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Cv(e),o}(t.storage,t._location,mv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new Pm("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,je.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Ve.mG)(this,void 0,void 0,function(){var e;return(0,Ve.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=iv(e.fullServerUrl(),t.host),r=new bv(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Cv(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,je.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw qm(t)},t}(),Qv=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Uv(t))throw Lm("ref() expected a child path but got a URL, use refFromURL instead.");return new Jv(jv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Uv(t))throw Lm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wm.makeFromUrl(t,this._delegate.host)}catch(sm){throw Lm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jv(jv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){!function(t,e,n){t.host="http://"+e+":"+n}(t,e,n)}(this._delegate,t,e)},t}();function Yv(t){const e=function(t){return new Mt.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Ae.P){return n=>n.lift(new Im(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ft.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Kv(t,e,n){return{getDownloadURL:()=>(0,Dt.of)(void 0).pipe((0,qt.QV)(e.outsideAngular),Vt(()=>t.getDownloadURL()),n),getMetadata:()=>(0,Dt.of)(void 0).pipe((0,qt.QV)(e.outsideAngular),Vt(()=>t.getMetadata()),n),delete:()=>(0,Lt.D)(t.delete()),child:r=>Kv(t.child(r),e,n),updateMetadata:e=>(0,Lt.D)(t.updateMetadata(e)),put:(e,n)=>Yv(t.put(e,n)),putString:(e,n,r)=>Yv(t.putString(e,n,r)),listAll:()=>(0,Lt.D)(t.listAll())}}Gv={TaskState:$m,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Vm,Storage:Vv,Reference:Jv},(Bv=Ze.Z).INTERNAL.registerComponent(new cm.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Qv(r,new Vv(r,i,o,new Km,n,Ze.Z.SDK_VERSION))},"PUBLIC").setServiceProps(Gv).setMultipleInstances(!0)),Bv.registerVersion("@firebase/storage","0.6.1");const Wv=new r.OlP("angularfire2.storageBucket"),Xv=new r.OlP("angularfire2.storage.maxUploadRetryTime"),ty=new r.OlP("angularfire2.storage.maxOperationRetryTime");let ey=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Nt.HU(i),this.keepUnstableUntilFirst=(0,Nt.ss)(this.schedulers);const a=(0,Nt.on)(t,i,e);this.storage=(0,Nt.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return Kv(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Kv(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Kv(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(Wv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Xv,8),r.LFG(ty,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Nt.Dh),r.LFG(Nt.xv,8),r.LFG(Wv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Xv,8),r.LFG(ty,8))},token:t,providedIn:"any"}),t})(),ny=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),ry=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[ey],imports:[ny]}),t})();function iy(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var oy=n(6561);function sy(t=0,e,n){let r=-1;return(0,oy.k)(e)?r=Number(e)<1?1:Number(e):(0,Oe.K)(e)&&(n=e),(0,Oe.K)(n)||(n=Ae.P),new Mt.y(e=>{const i=(0,oy.k)(t)?t:+t-n.now();return n.schedule(ay,i,{index:0,period:r,subscriber:e})})}function ay(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var uy=n(9796);class cy extends Wt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ly extends Wt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var hy=n(7444);function dy(t,e,n,r,i=new ly(t,n,r)){if(!i.closed)return e instanceof Mt.y?e.subscribe(i):(0,hy.s)(e)(i)}var fy=n(6693);const py={};function gy(...t){let e,n;return(0,Oe.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,uy.k)(t[0])&&(t=t[0]),(0,fy.n)(t,n).lift(new my(e))}class my{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new vy(t,this.resultSelector))}}class vy extends cy{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(py),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(dy(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===py?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var yy=n(3342);function by(t,e){if(1&t&&(r.TgZ(0,"div",3),r._UZ(1,"div",4),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Udp("width",t.diameter)("height",t.diameter)}}function _y(t,e){if(1&t&&r._UZ(0,"div",5),2&t){const t=r.oxw().ngIf,e=r.oxw();r.Udp("background",e.color)("height",e.height)("width",t+"%")}}function wy(t,e){if(1&t&&(r.ynx(0),r.YNc(1,by,2,4,"div",1),r.YNc(2,_y,1,6,"div",2),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.includeSpinner),r.xp6(1),r.Q6J("ngIf",t.includeBar)}}class Ty{constructor(t={}){this.config=t,this.state={action:null,value:0,initialValue:0},this.requests=null,this.disabled=!1,this.stream$=new Rt.xQ,this._value$=null,this.timer$=t=>{let e=(0,Dt.of)(t);switch(t.action){case"start":case"increment":case"set":"start"===t.action&&0===this.config.latencyThreshold&&0===t.value&&(t.value=t.initialValue),this.requests>0&&(e=sy(this.config.latencyThreshold,250).pipe((0,Ft.U)(e=>Object.assign(Object.assign({},t),{value:0===e?this.state.value||t.initialValue:this._increment()}))));break;case"complete":case"stop":e=0===t.value?(0,Dt.of)(Object.assign({},t)):sy(0,500).pipe(ie(2),(0,Ft.U)(t=>({value:0===t?100:0})))}return e.pipe((0,Ft.U)(t=>Object.assign(Object.assign({},t),{action:"set"})),(0,yy.b)(t=>this.next(t,!1)))},this.config=Object.assign({latencyThreshold:0},t)}get value$(){return this._value$?this._value$:this._value$=this.stream$.asObservable().pipe(ke(this.state),Vt(t=>this.timer$(t)),Yt(),(0,Ft.U)(t=>t.value))}start(t=2){this.disabled||this.next({action:"start",initialValue:t})}stop(){this.next({action:"stop"})}complete(){this.next({action:"complete"})}disable(){this.disabled=!0}set(t){this.next({action:"set",value:t})}increment(t=0){this.next({action:"increment",value:t})}next(t,e=!0){switch(t.action){case"start":this.requests=(this.requests||0)+1;break;case"complete":if(this.requests=(this.requests||1)-1,this.requests>0)return;break;case"stop":this.requests=0;break;case"increment":t.value=this._increment(t.value)}this.state=Object.assign(Object.assign(Object.assign({},this.state),{action:null}),t),e&&this.stream$.next(this.state)}_increment(t=0){const e=this.state.value;return e>=99&&(t=0),0===t&&(t=e>=0&&e<25?3*Math.random()+3:e>=25&&e<65?3*Math.random():e>=65&&e<90?2*Math.random():e>=90&&e<99?.5:0),t+e}}const Cy=new r.OlP("LOADING_BAR_CONFIG");let Sy=(()=>{let t=class{constructor(t,e={},n){this.platformId=t,this.config=e,this.zone=n,this.refs={},this.streams$=new Rt.xQ,this.value$=this.streams$.asObservable().pipe(ke(null),Vt(()=>gy(...Object.keys(this.refs).map(t=>this.refs[t].value$))),function(t){return t?e=>new Mt.y(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete()))):t=>t}(this.zone),(0,Ft.U)(t=>Math.max(0,...t)))}get progress$(){return this.value$}start(t=2){this.useRef().start(t)}set(t){this.useRef().set(t)}increment(t){this.useRef().increment(t)}complete(){this.useRef().complete()}stop(){this.useRef().stop()}useRef(t="default"){return this.refs[t]||(this.refs[t]=new Ty(this.config),this.streams$.next(),"browser"!==this.platformId&&this.refs[t].disable()),this.refs[t]}};return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi),r.LFG(Cy,8),r.LFG(r.R0b,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(r.Lbi),(0,r.LFG)(Cy,8),(0,r.LFG)(r.R0b,8))},token:t,providedIn:"root"}),t=(0,Ve.gn)([(0,Ve.fM)(0,(0,r.tBr)(r.Lbi)),(0,Ve.fM)(1,(0,r.FiY)()),(0,Ve.fM)(1,(0,r.tBr)(Cy)),(0,Ve.fM)(2,(0,r.FiY)()),(0,Ve.w6)("design:paramtypes",[Object,Object,r.R0b])],t),t})(),xy=(()=>{let t=class{constructor(t){this.loader=t,this.includeSpinner=!0,this.includeBar=!0,this.fixed=!0,this.color="#29d"}get value$(){return this.ref?this.loader.useRef(this.ref).value$:this.loader.value$}};return t.\u0275fac=function(e){return new(e||t)(r.Y36(Sy))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngx-loading-bar"]],hostVars:3,hostBindings:function(t,e){2&t&&(r.uIk("fixed",e.fixed),r.Udp("color",e.color))},inputs:{includeSpinner:"includeSpinner",includeBar:"includeBar",fixed:"fixed",color:"color",value:"value",ref:"ref",height:"height",diameter:"diameter"},decls:2,vars:3,consts:[[4,"ngIf"],["class","ngx-spinner",4,"ngIf"],["class","ngx-bar",3,"background","height","width",4,"ngIf"],[1,"ngx-spinner"],[1,"ngx-spinner-icon"],[1,"ngx-bar"]],template:function(t,e){1&t&&(r.YNc(0,wy,3,2,"ng-container",0),r.ALo(1,"async")),2&t&&r.Q6J("ngIf",null!=e.value?e.value:r.lcZ(1,1,e.value$))},directives:[Z],pipes:[J],styles:["[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:350ms linear;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;-webkit-animation:.4s linear infinite loading-bar-spinner;animation:.4s linear infinite loading-bar-spinner}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width 350ms;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@-webkit-keyframes loading-bar-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes loading-bar-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}"],changeDetection:0}),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",Object)],t.prototype,"includeSpinner",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",Object)],t.prototype,"includeBar",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",Object)],t.prototype,"fixed",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",Object)],t.prototype,"color",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",Number)],t.prototype,"value",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",String)],t.prototype,"ref",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",String)],t.prototype,"height",void 0),(0,Ve.gn)([(0,r.IIB)(),(0,Ve.w6)("design:type",String)],t.prototype,"diameter",void 0),t=(0,Ve.gn)([(0,Ve.w6)("design:paramtypes",[Sy])],t),t})(),Ay=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Y]]}),t})();var Iy=n(9773);function Ey(t,e){return(0,Iy.zg)(t,e,1)}class Oy{}class ky{}class Py{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Py?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Py;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Py?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Ny{encodeKey(t){return Ry(t)}encodeValue(t){return Ry(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ry(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Dy(t){return`${t}`}class My{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ny,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new My({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Dy(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Dy(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Ly{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Uy(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function qy(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Fy(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Zy{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Py),this.context||(this.context=new Ly),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new My,this.urlWithParams=e}serializeBody(){return null===this.body?null:Uy(this.body)||qy(this.body)||Fy(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof My?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fy(this.body)?null:qy(this.body)?this.body.type||null:Uy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof My?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Zy(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var Vy=(()=>((Vy=Vy||{})[Vy.Sent=0]="Sent",Vy[Vy.UploadProgress=1]="UploadProgress",Vy[Vy.ResponseHeader=2]="ResponseHeader",Vy[Vy.DownloadProgress=3]="DownloadProgress",Vy[Vy.Response=4]="Response",Vy[Vy.User=5]="User",Vy))();class jy{constructor(t,e=200,n="OK"){this.headers=t.headers||new Py,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class By extends jy{constructor(t={}){super(t),this.type=Vy.ResponseHeader}clone(t={}){return new By({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Gy extends jy{constructor(t={}){super(t),this.type=Vy.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Gy({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Hy extends jy{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function zy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let $y=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Zy)r=t;else{let i,o;i=n.headers instanceof Py?n.headers:new Py(n.headers),n.params&&(o=n.params instanceof My?n.params:new My({fromObject:n.params})),r=new Zy(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Dt.of)(r).pipe(Ey(t=>this.handler.handle(t)));if(t instanceof Zy||"events"===n.observe)return i;const o=i.pipe(Xt(t=>t instanceof Gy));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,Ft.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe((0,Ft.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe((0,Ft.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe((0,Ft.U)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new My).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,zy(n,e))}post(t,e,n={}){return this.request("POST",t,zy(n,e))}put(t,e,n={}){return this.request("PUT",t,zy(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Oy))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Jy{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Qy=new r.OlP("HTTP_INTERCEPTORS");let Yy=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ky=/^\)\]\}',?\n/;let Wy=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mt.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Py(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new By({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Ky,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Gy({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Hy({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Hy({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Vy.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Vy.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Vy.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(et))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Xy=new r.OlP("XSRF_COOKIE_NAME"),tb=new r.OlP("XSRF_HEADER_NAME");class eb{}let nb=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=L(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(r.Lbi),r.LFG(Xy))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),rb=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(eb),r.LFG(tb))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ib=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Qy,[]);this.chain=t.reduceRight((t,e)=>new Jy(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ky),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ob=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:rb,useClass:Yy}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Xy,useValue:e.cookieName}:[],e.headerName?{provide:tb,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[rb,{provide:Qy,useExisting:rb,multi:!0},{provide:eb,useClass:nb},{provide:Xy,useValue:"XSRF-TOKEN"},{provide:tb,useValue:"X-XSRF-TOKEN"}]}),t})(),sb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[$y,{provide:Oy,useClass:ib},Wy,{provide:ky,useExisting:Wy}],imports:[[ob.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();function ab(t){return e=>e.lift(new ub(t))}class ub{constructor(t){this.callback=t}call(t,e){return e.subscribe(new cb(t,this.callback))}}class cb extends Wt.L{constructor(t,e){super(t),this.add(new Ht.w(e))}}let lb=(()=>{let t=class{constructor(t){this.loader=t}intercept(t,e){if(t.headers.has("ignoreLoadingBar"))return e.handle(t.clone({headers:t.headers.delete("ignoreLoadingBar")}));let n=!1;const r=this.loader.useRef("http");return e.handle(t).pipe((0,yy.b)(()=>{n||(r.start(),n=!0)}),ab(()=>n&&r.complete()))}};return t.\u0275fac=function(e){return new(e||t)(r.LFG(Sy))},t.\u0275prov=r.Yz7({token:t,factory:function(e){return t.\u0275fac(e)}}),t=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([iy("design:paramtypes",[Sy])],t),t})(),hb=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:Qy,useClass:lb,multi:!0}],imports:[[sb,Ay],sb,Ay]}),t})(),db=(()=>{class t{constructor(t){this.afAuth=t,this.user=this.afAuth.user,this.afAuth.user.subscribe(t=>{this.userID=null==t?void 0:t.uid})}register(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e)}login(t,e){return this.afAuth.signInWithEmailAndPassword(t,e)}logout(){return this.afAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Se))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class fb extends Rt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new zt.N;return this._value}next(t){super.next(this._value=t)}}function pb(t){return new Mt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Lt.D)(n):(0,re.c)()).subscribe(e)})}var gb=n(2441);function mb(t){return function(e){const n=new vb(t),r=e.lift(n);return n.caught=r}}class vb{constructor(t){this.selector=t}call(t,e){return e.subscribe(new yb(t,this.selector,this.caught))}}class yb extends Zt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Zt.IY(this);this.add(r);const i=(0,Zt.ft)(n,r);i!==r&&this.add(i)}}}function bb(t){return function(e){return 0===t?(0,re.c)():e.lift(new _b(t))}}class _b{constructor(t){if(this.total=t,this.total<0)throw new ne}call(t,e){return e.subscribe(new wb(t,this.total))}}class wb extends Wt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Tb=n(1307);class Cb{constructor(t,e){this.id=t,this.url=e}}class Sb extends Cb{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xb extends Cb{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ab extends Cb{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ib extends Cb{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Eb extends Cb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ob extends Cb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kb extends Cb{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pb extends Cb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nb extends Cb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rb{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Db{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mb{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lb{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ub{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qb{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fb{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zb="primary";class Vb{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function jb(t){return new Vb(t)}function Bb(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Gb(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Hb(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!zb(t[i],e[i]))return!1;return!0}function zb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function $b(t){return Array.prototype.concat.apply([],t)}function Jb(t){return t.length>0?t[t.length-1]:null}function Qb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Yb(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Lt.D)(Promise.resolve(t)):(0,Dt.of)(t)}const Kb={exact:function t(e,n,r){if(!s_(e.segments,n.segments))return!1;if(!n_(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:t_},Wb={exact:function(t,e){return Hb(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>zb(t[n],e[n]))},ignored:()=>!0};function Xb(t,e,n){return Kb[n.paths](t.root,e.root,n.matrixParams)&&Wb[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function t_(t,e,n){return e_(t,e,e.segments,n)}function e_(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!s_(i,n)&&!e.hasChildren()&&!!n_(i,n,r)}if(t.segments.length===n.length){if(!s_(t.segments,n))return!1;if(!n_(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!t_(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!s_(t.segments,i)&&!!n_(t.segments,i,r)&&!!t.children.primary&&e_(t.children.primary,e,o,r)}}function n_(t,e,n){return e.every((e,r)=>Wb[n](t[r].parameters,e.parameters))}class r_{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jb(this.queryParams)),this._queryParamMap}toString(){return c_.serialize(this)}}class i_{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Qb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return l_(this)}}class o_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=jb(this.parameters)),this._parameterMap}toString(){return v_(this)}}function s_(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class a_{}class u_{parse(t){const e=new T_(t);return new r_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${h_(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${f_(e)}=${f_(t)}`).join("&"):`${f_(e)}=${f_(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const c_=new u_;function l_(t){return t.segments.map(t=>v_(t)).join("/")}function h_(t,e){if(!t.hasChildren())return l_(t);if(e){const e=t.children.primary?h_(t.children.primary,!1):"",n=[];return Qb(t.children,(t,e)=>{e!==Zb&&n.push(`${e}:${h_(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Qb(t.children,(t,r)=>{r===Zb&&(n=n.concat(e(t,r)))}),Qb(t.children,(t,r)=>{r!==Zb&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Zb?[h_(t.children.primary,!1)]:[`${n}:${h_(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${l_(t)}/${e[0]}`:`${l_(t)}/(${e.join("//")})`}}function d_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function f_(t){return d_(t).replace(/%3B/gi,";")}function p_(t){return d_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g_(t){return decodeURIComponent(t)}function m_(t){return g_(t.replace(/\+/g,"%20"))}function v_(t){return`${p_(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${p_(t)}=${p_(e[t])}`).join("")}`;var e}const y_=/^[^\/()?;=#]+/;function b_(t){const e=t.match(y_);return e?e[0]:""}const __=/^[^=?&#]+/,w_=/^[^?&#]+/;class T_{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new i_([],{}):new i_([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new i_(t,e)),n}parseSegment(){const t=b_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new o_(g_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=b_(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=b_(this.remaining);t&&(n=t,this.capture(n))}t[g_(e)]=g_(n)}parseQueryParam(t){const e=function(t){const e=t.match(__);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(w_);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=m_(e),i=m_(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=b_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Zb);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new i_([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class C_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=S_(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=S_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=x_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return x_(t,this._root).map(t=>t.value)}}function S_(t,e){if(t===e.value)return e;for(const n of e.children){const e=S_(t,n);if(e)return e}return null}function x_(t,e){if(t===e.value)return[e];for(const n of e.children){const r=x_(t,n);if(r.length)return r.unshift(e),r}return[]}class A_{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function I_(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class E_ extends C_{constructor(t,e){super(t),this.snapshot=e,D_(this,t)}toString(){return this.snapshot.toString()}}function O_(t,e){const n=function(t,e){const n=new N_([],{},{},"",{},Zb,e,null,t.root,-1,{});return new R_("",new A_(n,[]))}(t,e),r=new fb([new o_("",{})]),i=new fb({}),o=new fb({}),s=new fb({}),a=new fb(""),u=new k_(r,i,s,a,o,Zb,e,n.root);return u.snapshot=n.root,new E_(new A_(u,[]),n)}class k_{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ft.U)(t=>jb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ft.U)(t=>jb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P_(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class N_{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class R_ extends C_{constructor(t,e){super(e),this.url=t,D_(this,e)}toString(){return M_(this._root)}}function D_(t,e){e.value._routerState=t,e.children.forEach(e=>D_(t,e))}function M_(t){const e=t.children.length>0?` { ${t.children.map(M_).join(", ")} } `:"";return`${t.value}${e}`}function L_(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hb(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Hb(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hb(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Hb(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function U_(t,e){return Hb(t.params,e.params)&&function(t,e){return s_(t,e)&&t.every((t,n)=>Hb(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||U_(t.parent,e.parent))}function q_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return q_(t,e,r);return q_(t,e)})}(t,e,n);return new A_(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return F_(e,t),t}}const n=new k_(new fb((r=e.value).url),new fb(r.params),new fb(r.queryParams),new fb(r.fragment),new fb(r.data),r.outlet,r.component,r),i=e.children.map(e=>q_(t,e));return new A_(n,i)}var r}function F_(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)F_(t.children[n],e.children[n])}function Z_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function V_(t){return"object"==typeof t&&null!=t&&t.outlets}function j_(t,e,n,r,i){let o={};return r&&Qb(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new r_(n.root===t?e:B_(n.root,t,e),o,i)}function B_(t,e,n){const r={};return Qb(t.children,(t,i)=>{r[i]=t===e?n:B_(t,e,n)}),new i_(t.segments,r)}class G_{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Z_(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(V_);if(r&&r!==Jb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class H_{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function z_(t,e,n){if(t||(t=new i_([],{})),0===t.segments.length&&t.hasChildren())return $_(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(V_(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!K_(a,u,e))return o;r+=2}else{if(!K_(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new i_(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new i_(t.segments.slice(r.pathIndex),t.children),$_(e,0,i)}return r.match&&0===i.length?new i_(t.segments,{}):r.match&&!t.hasChildren()?J_(t,e,n):r.match?$_(t,0,i):J_(t,e,n)}function $_(t,e,n){if(0===n.length)return new i_(t.segments,{});{const r=function(t){return V_(t[0])?t[0].outlets:{[Zb]:t}}(n),i={};return Qb(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=z_(t.children[r],e,n))}),Qb(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new i_(t.segments,i)}}function J_(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(V_(o)){const t=Q_(o.outlets);return new i_(r,t)}if(0===i&&Z_(n[0])){r.push(new o_(t.segments[e].path,Y_(n[0]))),i++;continue}const s=V_(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Z_(a)?(r.push(new o_(s,Y_(a))),i+=2):(r.push(new o_(s,{})),i++)}return new i_(r,{})}function Q_(t){const e={};return Qb(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=J_(new i_([],{}),0,t))}),e}function Y_(t){const e={};return Qb(t,(t,n)=>e[n]=`${t}`),e}function K_(t,e,n){return t==n.path&&Hb(e,n.parameters)}class W_{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),L_(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=I_(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Qb(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=I_(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=I_(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new qb(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Lb(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(L_(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),X_(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function X_(t){L_(t.value),t.children.forEach(X_)}class tw{constructor(t,e){this.routes=t,this.module=e}}function ew(t){return"function"==typeof t}function nw(t){return t instanceof r_}const rw=Symbol("INITIAL_VALUE");function iw(){return Vt(t=>gy(t.map(t=>t.pipe(ie(1),ke(rw)))).pipe(De((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==rw)return t;if(r===rw&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||nw(r))return r}return t},t)},rw),Xt(t=>t!==rw),(0,Ft.U)(t=>nw(t)?t:!0===t),ie(1)))}let ow=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[eT]},encapsulation:2}),t})();function sw(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];aw(r,uw(e,r))}}function aw(t,e){t.children&&sw(t.children,e)}function uw(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function cw(t){const e=t.children&&t.children.map(cw),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Zb&&(n.component=ow),n}function lw(t){return t.outlet||Zb}function hw(t,e){const n=t.filter(t=>lw(t)===e);return n.push(...t.filter(t=>lw(t)!==e)),n}const dw={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fw(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},dw):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Gb)(n,t,e);if(!i)return Object.assign({},dw);const o={};Qb(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pw(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>gw(t,e,n)&&lw(n)!==Zb)}(t,n,r)){const i=new i_(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&lw(o)!==Zb){const n=new i_([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lw(o)]=n}return i}(t,e,r,new i_(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>gw(t,e,n))}(t,n,r)){const o=new i_(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(gw(t,n,a)&&!i[lw(a)]){const n=new i_([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[lw(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new i_(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function gw(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function mw(t,e,n,r){return!!(lw(t)===r||r!==Zb&&gw(e,n,t))&&("**"===t.path||fw(e,t,n).matched)}function vw(t,e,n){return 0===e.length&&!t.children[n]}class yw{constructor(t){this.segmentGroup=t||null}}class bw{constructor(t){this.urlTree=t}}function _w(t){return new Mt.y(e=>e.error(new yw(t)))}function ww(t){return new Mt.y(e=>e.error(new bw(t)))}function Tw(t){return new Mt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Cw{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=pw(this.urlTree.root,[],[],this.config).segmentGroup,e=new i_(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Zb).pipe((0,Ft.U)(t=>this.createUrlTree(Sw(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mb(t=>{if(t instanceof bw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof yw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Zb).pipe((0,Ft.U)(e=>this.createUrlTree(Sw(e),t.queryParams,t.fragment))).pipe(mb(t=>{if(t instanceof yw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new i_([],{[Zb]:t}):t;return new r_(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ft.U)(t=>new i_([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Lt.D)(r).pipe(Ey(r=>{const i=n.children[r],o=hw(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Ft.U)(t=>({segment:t,outlet:r})))}),De((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):pe.y,bb(1),n?ae(e):le(()=>new Kt))}())}expandSegment(t,e,n,r,i,o){return(0,Lt.D)(n).pipe(Ey(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(mb(t=>{if(t instanceof yw)return(0,Dt.of)(null);throw t}))),ge(t=>!!t),mb((t,n)=>{if(t instanceof Kt||"EmptyError"===t.name){if(vw(e,r,i))return(0,Dt.of)(new i_([],{}));throw new yw(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return mw(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):_w(e):_w(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ww(i):this.lineralizeSegments(n,i).pipe((0,Iy.zg)(n=>{const i=new i_(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fw(e,r,i);if(!s)return _w(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ww(l):this.lineralizeSegments(r,l).pipe((0,Iy.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Dt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ft.U)(t=>(n._loadedConfig=t,new i_(r,{})))):(0,Dt.of)(new i_(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fw(e,n,r);if(!o)return _w(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Iy.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=pw(e,s,u,o),l=new i_(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Ft.U)(t=>new i_(s,t)));if(0===o.length&&0===c.length)return(0,Dt.of)(new i_(s,{}));const h=lw(n)===i;return this.expandSegment(r,l,o,c,h?Zb:i,!0).pipe((0,Ft.U)(t=>new i_(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Dt.of)(new tw(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Iy.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Ft.U)(t=>(e._loadedConfig=t,t))):function(t){return new Mt.y(e=>e.error(Bb(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Dt.of)(new tw([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Dt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ew(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ew(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Yb(o)});return(0,Dt.of)(i).pipe(iw(),(0,yy.b)(t=>{if(!nw(t))return;const e=Bb(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Ft.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Dt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Tw(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new r_(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Qb(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Qb(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new i_(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Sw(t){const e={};for(const n of Object.keys(t.children)){const r=Sw(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new i_(t.segments.concat(e.segments),e.children)}return t}(new i_(t.segments,e))}class xw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Aw{constructor(t,e){this.component=t,this.route=e}}function Iw(t,e,n){const r=t._root;return Ow(r,e?e._root:null,n,[r.value])}function Ew(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ow(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=I_(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!s_(t.url,e.url);case"pathParamsOrQueryParamsChange":return!s_(t.url,e.url)||!Hb(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!U_(t,e)||!Hb(t.queryParams,e.queryParams);case"paramsChange":default:return!U_(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new xw(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ow(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Aw(a.outlet.component,s))}else s&&kw(e,a,i),i.canActivateChecks.push(new xw(r)),Ow(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Qb(o,(t,e)=>kw(t,n.getContext(e),i)),i}function kw(t,e,n){const r=I_(t),i=t.value;Qb(r,(t,r)=>{kw(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Aw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Pw{}function Nw(t){return new Mt.y(e=>e.error(t))}class Rw{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=pw(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Zb);if(null===e)return null;const n=new N_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zb,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new A_(n,e),i=new R_(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=P_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=hw(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Mw(n);return r.sort((t,e)=>t.value.outlet===Zb?-1:e.value.outlet===Zb?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return vw(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!mw(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Jb(n).parameters:{};i=new N_(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qw(t),lw(t),t.component,t,Lw(e),Uw(e)+n.length,Fw(t))}else{const r=fw(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new N_(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qw(t),lw(t),t.component,t,Lw(e),Uw(e)+o.length,Fw(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=pw(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new A_(i,t)]}if(0===a.length&&0===c.length)return[new A_(i,[])];const l=lw(t)===r,h=this.processSegment(a,u,c,l?Zb:r);return null===h?null:[new A_(i,h)]}}function Dw(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Mw(t){const e=[],n=new Set;for(const r of t){if(!Dw(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Mw(r.children);e.push(new A_(r.value,t))}return e.filter(t=>!n.has(t))}function Lw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Uw(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qw(t){return t.data||{}}function Fw(t){return t.resolve||{}}function Zw(t){return Vt(e=>{const n=t(e);return n?(0,Lt.D)(n).pipe((0,Ft.U)(()=>e)):(0,Dt.of)(e)})}class Vw extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const jw=new r.OlP("ROUTES");class Bw{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Ft.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new tw($b(i.injector.get(jw,void 0,r.XFs.Self|r.XFs.Optional)).map(cw),i)}),mb(t=>{throw e._loader$=void 0,t}));return e._loader$=new gb.c(n,()=>new Rt.xQ).pipe((0,Tb.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Lt.D)(this.loader.load(t)):Yb(t()).pipe((0,Iy.zg)(t=>t instanceof r.YKP?(0,Dt.of)(t):(0,Lt.D)(this.compiler.compileModuleAsync(t))))}}class Gw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hw,this.attachRef=null}}class Hw{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Gw,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class zw{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function $w(t){throw t}function Jw(t,e,n){return e.parse("/")}function Qw(t,e){return(0,Dt.of)(null)}const Yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ww=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Rt.xQ,this.errorHandler=$w,this.malformedUriErrorHandler=Jw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qw,afterPreactivation:Qw},this.urlHandlingStrategy=new zw,this.routeReuseStrategy=new Vw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new r_(new i_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Bw(s,a,t=>this.triggerEvent(new Rb(t)),t=>this.triggerEvent(new Db(t))),this.routerState=O_(this.currentUrlTree,this.rootComponentType),this.transitions=new fb({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(Xt(t=>0!==t.id),(0,Ft.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Vt(t=>{let n=!1,r=!1;return(0,Dt.of)(t).pipe((0,yy.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Dt.of)(t).pipe(Vt(t=>{const n=this.transitions.getValue();return e.next(new Sb(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?re.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Vt(t=>function(t,e,n,r,i){return new Cw(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Ft.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,yy.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Iy.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Rw(t,e,n,r,i,o).recognize();return null===s?Nw(new Pw):(0,Dt.of)(s)}catch(sm){return Nw(sm)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Ft.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yy.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Eb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Sb(n,this.serializeUrl(r),i,o);e.next(a);const u=O_(r,this.rootComponentType).snapshot;return(0,Dt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),re.E}),Zw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,yy.b)(t=>{const e=new Ob(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Ft.U)(t=>Object.assign(Object.assign({},t),{guards:Iw(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Iy.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,Dt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Lt.D)(t).pipe((0,Iy.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Dt.of)(!0);const s=o.map(o=>{const s=Ew(o,e,i);let a;if(function(t){return t&&ew(t.canDeactivate)}(s))a=Yb(s.canDeactivate(t,e,n,r));else{if(!ew(s))throw new Error("Invalid CanDeactivate guard");a=Yb(s(t,e,n,r))}return a.pipe(ge())});return(0,Dt.of)(s).pipe(iw())}(t.component,t.route,n,e,r)),ge(t=>!0!==t,!0))}(s,r,i,t).pipe((0,Iy.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Lt.D)(e).pipe(Ey(e=>Ee(function(t,e){return null!==t&&e&&e(new Mb(t)),(0,Dt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ub(t)),(0,Dt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>pb(()=>{const i=e.guards.map(i=>{const o=Ew(i,e.node,n);let s;if(function(t){return t&&ew(t.canActivateChild)}(o))s=Yb(o.canActivateChild(r,t));else{if(!ew(o))throw new Error("Invalid CanActivateChild guard");s=Yb(o(r,t))}return s.pipe(ge())});return(0,Dt.of)(i).pipe(iw())}));return(0,Dt.of)(i).pipe(iw())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Dt.of)(!0);const i=r.map(r=>pb(()=>{const i=Ew(r,e,n);let o;if(function(t){return t&&ew(t.canActivate)}(i))o=Yb(i.canActivate(e,t));else{if(!ew(i))throw new Error("Invalid CanActivate guard");o=Yb(i(e,t))}return o.pipe(ge())}));return(0,Dt.of)(i).pipe(iw())}(t,e.route,n))),ge(t=>!0!==t,!0))}(r,o,t,e):(0,Dt.of)(n)),(0,Ft.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,yy.b)(t=>{if(nw(t.guardsResult)){const e=Bb(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new kb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Xt(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),Zw(t=>{if(t.guards.canActivateChecks.length)return(0,Dt.of)(t).pipe((0,yy.b)(t=>{const e=new Pb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Vt(t=>{let e=!1;return(0,Dt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Iy.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Dt.of)(t);let o=0;return(0,Lt.D)(i).pipe(Ey(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Dt.of)({});const o={};return(0,Lt.D)(i).pipe((0,Iy.zg)(i=>function(t,e,n,r){const i=Ew(t,e,r);return Yb(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,yy.b)(t=>{o[i]=t}))),bb(1),(0,Iy.zg)(()=>Object.keys(o).length===i.length?(0,Dt.of)(o):re.E))}(t._resolve,t,e,r).pipe((0,Ft.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),P_(t,n).resolve),null)))}(t.route,e,n,r)),(0,yy.b)(()=>o++),bb(1),(0,Iy.zg)(e=>o===i.length?(0,Dt.of)(t):re.E))})),(0,yy.b)({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,yy.b)(t=>{const e=new Nb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Zw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Ft.U)(t=>{const e=function(t,e,n){const r=q_(t,e._root,n?n._root:void 0);return new E_(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,yy.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),(0,Ft.U)(t=>(new W_(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),(0,yy.b)({next(){n=!0},complete(){n=!0}}),ab(()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}this.currentNavigation=null}),mb(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nw(n.url);r||(this.navigated=!0,this.restoreHistory(t,!0));const i=new Ab(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const r=new Ib(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Oa){t.reject(Oa)}}var i;return re.E}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sw(t),this.config=t.map(cw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return j_(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new G_(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Qb(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new G_(n,e,r)}(n);if(o.toRoot())return j_(e.root,new i_([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new H_(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new H_(t,t===e.root,0)}const r=Z_(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new H_(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?$_(s.segmentGroup,s.index,o.commands):z_(s.segmentGroup,s.index,o.commands);return j_(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=nw(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(sm){e=this.malformedUriErrorHandler(sm,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Yw):!1===e?Object.assign({},Kw):e,nw(t))return Xb(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Xb(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var o,s;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((t,e)=>{l=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(s=this.browserPageId)&&void 0!==s?s:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(t,e=!1){var n,r;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new Ab(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(a_),r.LFG(Hw),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Xw=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Rt.xQ,this.subscription=t.events.subscribe(t=>{t instanceof xb&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:tT(this.skipLocationChange),replaceUrl:tT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:tT(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ww),r.Y36(k_),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function tT(t){return""===t||!!t}let eT=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Zb,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new nT(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Hw),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class nT{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===k_?this.route:t===Hw?this.childContexts:this.parent.get(t,e)}}class rT{}class iT{preload(t,e){return(0,Dt.of)(null)}}let oT=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Bw(e,n,e=>t.triggerEvent(new Rb(e)),e=>t.triggerEvent(new Db(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof xb),Ey(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Lt.D)(n).pipe((0,Ie.J)(),(0,Ft.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Iy.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ww),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(rT))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),sT=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xb&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Fb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Fb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ww),r.LFG(W),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const aT=new r.OlP("ROUTER_CONFIGURATION"),uT=new r.OlP("ROUTER_FORROOT_GUARD"),cT=[w,{provide:a_,useClass:u_},{provide:Ww,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new Ww(null,t,e,n,r,i,o,$b(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[a_,Hw,w,r.zs3,r.v3s,r.Sil,jw,aT,[class{},new r.FiY],[class{},new r.FiY]]},Hw,{provide:k_,useFactory:function(t){return t.routerState.root},deps:[Ww]},{provide:r.v3s,useClass:r.EAV},oT,iT,class{preload(t,e){return e().pipe(mb(()=>(0,Dt.of)(null)))}},{provide:aT,useValue:{enableTracing:!1}}];function lT(){return new r.PXZ("Router",Ww)}let hT=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[cT,gT(e),{provide:uT,useFactory:pT,deps:[[Ww,new r.FiY,new r.tp0]]},{provide:aT,useValue:n||{}},{provide:m,useFactory:fT,deps:[a,[new r.tBr(y),new r.FiY],aT]},{provide:sT,useFactory:dT,deps:[Ww,W,aT]},{provide:rT,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:iT},{provide:r.PXZ,multi:!0,useFactory:lT},[mT,{provide:r.ip1,multi:!0,useFactory:vT,deps:[mT]},{provide:bT,useFactory:yT,deps:[mT]},{provide:r.tb,multi:!0,useExisting:bT}]]}}static forChild(e){return{ngModule:t,providers:[gT(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(uT,8),r.LFG(Ww,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function dT(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new sT(t,e,n)}function fT(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function pT(t){return"guarded"}function gT(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:jw,multi:!0,useValue:t}]}let mT=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Rt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ww),r=this.injector.get(aT);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Dt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(aT),n=this.injector.get(oT),i=this.injector.get(sT),o=this.injector.get(Ww),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function vT(t){return t.appInitializer.bind(t)}function yT(t){return t.bootstrapListener.bind(t)}const bT=new r.OlP("Router Initializer");var _T=n(1555);function wT(t,e){return new Mt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,Lt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let TT=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),CT=(()=>{class t extends TT{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const ST=new r.OlP("NgValueAccessor"),xT={provide:ST,useExisting:(0,r.Gpc)(()=>IT),multi:!0},AT=new r.OlP("CompositionEventMode");let IT=(()=>{class t extends TT{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(AT,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([xT]),r.qOj]}),t})();function ET(t){return null==t||0===t.length}const OT=new r.OlP("NgValidators"),kT=new r.OlP("NgAsyncValidators");function PT(t){return null}function NT(t){return null!=t}function RT(t){const e=(0,r.QGY)(t)?(0,Lt.D)(t):t;return(0,r.CqO)(e),e}function DT(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function MT(t,e){return e.map(e=>e(t))}function LT(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function UT(t){return null!=t?function(t){if(!t)return null;const e=t.filter(NT);return 0==e.length?null:function(t){return DT(MT(t,e))}}(LT(t)):null}function qT(t){return null!=t?function(t){if(!t)return null;const e=t.filter(NT);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,uy.k)(e))return wT(e,null);if((0,_T.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return wT(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return wT(t=1===t.length&&(0,uy.k)(t[0])?t[0]:t,null).pipe((0,Ft.U)(t=>e(...t)))}return wT(t,null)}(MT(t,e).map(RT)).pipe((0,Ft.U)(DT))}}(LT(t)):null}function FT(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let ZT=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=UT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),VT=(()=>{class t extends ZT{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class jT extends ZT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class BT{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let GT=(()=>{class t extends BT{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jT,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),HT=(()=>{class t extends BT{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(VT,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[r.qOj]}),t})();function zT(t,e){JT(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&QT(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&QT(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function $T(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JT(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(FT(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(FT(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();$T(e._rawValidators,i),$T(e._rawAsyncValidators,i)}function QT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function YT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const KT="VALID",WT="INVALID",XT="PENDING",tC="DISABLED";function eC(t){return(oC(t)?t.validators:t)||null}function nC(t){return Array.isArray(t)?UT(t):t||null}function rC(t,e){return(oC(e)?e.asyncValidators:t)||null}function iC(t){return Array.isArray(t)?qT(t):t||null}function oC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class sC{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=nC(this._rawValidators),this._composedAsyncValidatorFn=iC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===KT}get invalid(){return this.status===WT}get pending(){return this.status==XT}get disabled(){return this.status===tC}get enabled(){return this.status!==tC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=nC(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=iC(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=XT,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=tC,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=KT,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==KT&&this.status!==XT||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tC:KT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=XT,this._hasOwnPendingAsyncValidator=!0;const e=RT(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof uC?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof cC&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?tC:this.errors?WT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(XT)?XT:this._anyControlsHaveStatus(WT)?WT:KT}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){oC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class aC extends sC{constructor(t=null,e,n){super(eC(e),rC(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){YT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){YT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class uC extends sC{constructor(t,e,n){super(eC(e),rC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof aC?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class cC extends sC{constructor(t,e,n){super(eC(e),rC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof aC?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const lC={provide:VT,useExisting:(0,r.Gpc)(()=>dC)},hC=(()=>Promise.resolve(null))();let dC=(()=>{class t extends VT{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new uC({},UT(t),qT(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){hC.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),zT(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){hC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),YT(this._directives,t)})}addFormGroup(t){hC.then(()=>{const e=this._findContainer(t.path),n=new uC({});(function(t,e){JT(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){hC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){hC.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(OT,10),r.Y36(kT,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([lC]),r.qOj]}),t})();const fC={provide:jT,useExisting:(0,r.Gpc)(()=>gC)},pC=(()=>Promise.resolve(null))();let gC=(()=>{class t extends jT{constructor(t,e,n,i){super(),this.control=new aC,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===IT?n=t:Object.getPrototypeOf(t.constructor)===CT?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zT(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;pC.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(VT,9),r.Y36(OT,10),r.Y36(kT,10),r.Y36(ST,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([fC]),r.qOj,r.TTD]}),t})(),mC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const vC={provide:ST,useExisting:(0,r.Gpc)(()=>yC),multi:!0};let yC=(()=>{class t extends CT{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([vC]),r.qOj]}),t})(),bC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const _C={provide:ST,useExisting:(0,r.Gpc)(()=>TC),multi:!0};function wC(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let TC=(()=>{class t extends CT{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=wC(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([_C]),r.qOj]}),t})(),CC=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(wC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(TC,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const SC={provide:ST,useExisting:(0,r.Gpc)(()=>AC),multi:!0};function xC(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let AC=(()=>{class t extends CT{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([SC]),r.qOj]}),t})(),IC=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(xC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(AC,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const EC={provide:OT,useExisting:(0,r.Gpc)(()=>OC),multi:!0};let OC=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return ET(t.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[r._Bn([EC])]}),t})();const kC={provide:OT,useExisting:(0,r.Gpc)(()=>PC),multi:!0};let PC=(()=>{class t{constructor(){this._validator=PT}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){var t;this._validator=(t="number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10),e=>{return ET(e.value)||null==(n=e.value)||"number"!=typeof n.length?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null;var n})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[r._Bn([kC]),r.TTD]}),t})(),NC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[bC]]}),t})(),RC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[NC]}),t})();function DC(t,e){1&t&&(r.TgZ(0,"p",17),r._uU(1,"Name Is Required"),r.qZA())}function MC(t,e){1&t&&(r.TgZ(0,"p",17),r._uU(1,"Email Is Required"),r.qZA())}function LC(t,e){1&t&&(r.TgZ(0,"p",17),r._uU(1,"Your input dosen't match email format"),r.qZA())}function UC(t,e){1&t&&(r.TgZ(0,"p",17),r._uU(1,"Password Is Required"),r.qZA())}function qC(t,e){1&t&&(r.TgZ(0,"p",17),r._uU(1,"Password Length must be +6 characters"),r.qZA())}function FC(t,e){1&t&&(r.TgZ(0,"div",17),r._uU(1,"Image Is Required"),r.qZA())}let ZC=(()=>{class t{constructor(t,e,n,r){this.authServ=t,this.afStore=e,this.router=n,this.afStorage=r,this.imgUrl=""}ngOnInit(){}uploadImage(t){const e=Math.random().toString(36).substr(2,9);this.ref=this.afStorage.ref(e+"_"+t.target.files[0].name),this.task=this.ref.put(t.target.files[0]),this.task.then(t=>{t.ref.getDownloadURL().then(t=>{this.imgUrl=t})})}register(t){let e=t.value;this.authServ.register(e.email,e.password).then(t=>{var n,r,i;localStorage.setItem("userID",JSON.stringify(null===(n=t.user)||void 0===n?void 0:n.uid)),this.afStore.collection("users").doc(null===(r=t.user)||void 0===r?void 0:r.uid).set({Name:e.name,Email:e.email,uid:null===(i=t.user)||void 0===i?void 0:i.uid,Image:this.imgUrl}).then(()=>{this.router.navigate(["/"])})}).catch(t=>{console.log("error !",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(xm),r.Y36(Ww),r.Y36(ey))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-register"]],decls:29,vars:6,consts:[[1,"power-form","text-center"],["src","./assets/images/logo.png"],[1,"text-center"],[1,"form",3,"ngSubmit"],["f","ngForm"],[1,"from-group"],["type","text","placeholder","Name","name","name","ngModel","","required","",1,"form-control"],["name","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","text","placeholder","Email","name","email","ngModel","","required","",1,"form-control"],["email","ngModel"],[1,"form-group"],["type","password","placeholder","Password","name","password","ngModel","","required","","minlength","6",1,"form-control"],["password","ngModel"],["type","file","accept",".jpg, .png","name","image","ngModel","","required","",1,"form-control",3,"change"],["image","ngModel"],[1,"btn","btn-primary"],[1,"alert","alert-danger"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r._UZ(1,"img",1),r.TgZ(2,"h2",2),r._uU(3,"Welcome To Power"),r.qZA(),r.TgZ(4,"form",3,4),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(5);return e.register(n)}),r.TgZ(6,"h2",2),r._uU(7,"Signup"),r.qZA(),r.TgZ(8,"div",5),r._UZ(9,"input",6,7),r.YNc(11,DC,2,0,"p",8),r.qZA(),r.TgZ(12,"div",5),r._UZ(13,"input",9,10),r.YNc(15,MC,2,0,"p",8),r.YNc(16,LC,2,0,"p",8),r.qZA(),r.TgZ(17,"div",11),r._UZ(18,"input",12,13),r.YNc(20,UC,2,0,"p",8),r.YNc(21,qC,2,0,"p",8),r.qZA(),r.TgZ(22,"div",11),r.TgZ(23,"input",14,15),r.NdJ("change",function(t){return e.uploadImage(t)}),r.qZA(),r._UZ(25,"br"),r.YNc(26,FC,2,0,"div",8),r.qZA(),r.TgZ(27,"button",16),r._uU(28,"Register"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(10),e=r.MAs(14),n=r.MAs(19),i=r.MAs(24);r.xp6(11),r.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),r.xp6(4),r.Q6J("ngIf",(null==e.errors?null:e.errors.required)&&e.touched),r.xp6(1),r.Q6J("ngIf",(null==e.errors?null:e.errors.email)&&e.touched),r.xp6(4),r.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),r.xp6(1),r.Q6J("ngIf",(null==n.errors?null:n.errors.minlength)&&n.touched),r.xp6(5),r.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&i.touched)}},directives:[mC,HT,dC,IT,GT,gC,OC,Z,PC],styles:[""]}),t})(),VC=(()=>{class t{constructor(t){this.afStore=t}getAllProducts(){return this.afStore.collection("products").snapshotChanges()}getProduct(t){return this.afStore.collection("products").ref.doc(t).get()}deleteProduct(t){return this.afStore.collection("products").doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xm))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jC=(()=>{class t{constructor(t){this.afStore=t}getAllCategories(){return this.afStore.collection("catgeories").valueChanges()}getCategory(t){return this.afStore.collection("catgeories").ref.doc(t).get()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xm))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),BC=(()=>{class t{constructor(t,e){this.afStroe=t,this.authServ=e}addToCart(t){return this.afStroe.collection(`users/${this.authServ.userID}/cart`).add(t)}getCart(){return this.afStroe.collection(`users/${this.authServ.userID}/cart`).snapshotChanges()}delete(t){return this.afStroe.doc(`users/${this.authServ.userID}/cart/${t}`).delete()}save(t,e){return this.afStroe.doc(`users/${this.authServ.userID}/cart/${t}`).update({amount:e})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xm),r.LFG(db))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function GC(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.Name)}}function HC(t,e){if(1&t&&(r.ynx(0),r.YNc(1,GC,2,1,"span",13),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.product.catID==t.catID)}}function zC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(2).index;return r.oxw().addToCart(e)}),r._uU(1,"Add"),r.qZA()}}function $C(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r._UZ(1,"input",16,17),r.TgZ(3,"button",18),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(2);return r.oxw(3).buy(e.value)}),r._uU(4,"Add To Cart"),r.qZA(),r.qZA()}}function JC(t,e){if(1&t&&(r.ynx(0),r.YNc(1,zC,2,0,"button",14),r.YNc(2,$C,5,0,"div",13),r.BQk()),2&t){const t=r.oxw(),e=t.$implicit,n=t.index,i=r.oxw();r.xp6(1),r.Q6J("ngIf",e.userID!=i.userID&&i.isUser&&i.add!==n),r.xp6(1),r.Q6J("ngIf",i.add===n)}}function QC(t,e){if(1&t&&(r.ynx(0),r.YNc(1,JC,3,2,"ng-container",13),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",t.proID==n.product.proID)}}function YC(t,e){if(1&t&&(r.TgZ(0,"span",28),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.Name)}}function KC(t,e){if(1&t&&(r.ynx(0),r.YNc(1,YC,2,1,"span",27),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(3);r.xp6(1),r.Q6J("ngIf",n.product.catID==t.catID)}}function WC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",15),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(2).index;return r.oxw().addToCart(e)}),r._uU(1,"Add"),r.qZA()}}function XC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r._UZ(1,"input",16,17),r.TgZ(3,"button",18),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(2);return r.oxw(3).buy(e.value)}),r._uU(4,"Add To Cart"),r.qZA(),r.qZA()}}const tS=function(t,e){return["/product",t,e]};function eS(t,e){if(1&t&&(r.TgZ(0,"div",20),r.TgZ(1,"div",21),r.TgZ(2,"div",22),r.TgZ(3,"a",23),r.TgZ(4,"div",24),r._UZ(5,"img",25),r.qZA(),r.qZA(),r.TgZ(6,"div",8),r.YNc(7,KC,2,1,"ng-container",9),r.TgZ(8,"h5",26),r._uU(9),r.qZA(),r.TgZ(10,"p",11),r._uU(11),r.qZA(),r.YNc(12,WC,2,0,"button",14),r.YNc(13,XC,5,0,"div",13),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw(),e=t.$implicit,n=t.index,i=r.oxw();r.xp6(3),r.Q6J("routerLink",r.WLB(7,tS,e.Name,e.proID)),r.xp6(2),r.Q6J("src",e.Image,r.LSH),r.xp6(2),r.Q6J("ngForOf",i.allCategories),r.xp6(2),r.Oqu(e.Name),r.xp6(2),r.hij("",e.Price," EGP"),r.xp6(1),r.Q6J("ngIf",e.userID!=i.userID&&i.isUser&&i.add!==n),r.xp6(1),r.Q6J("ngIf",i.add===n)}}function nS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,eS,14,10,"div",19),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.product.catID==t.catID&&n.product.proID!=t.proID)}}let rS=(()=>{class t{constructor(t,e,n,r,i){this.proServ=t,this.route=e,this.catServ=n,this.authServ=r,this.cartServ=i,this.product=[],this.allCategories=[],this.allProducts=[],this.userID="",this.isUser=!1,this.add=-1,this.authServ.user.subscribe(t=>{t?(this.isUser=!0,this.userID=JSON.parse(localStorage.getItem("userID"))):this.isUser=!1})}ngOnInit(){this.getProID=this.route.paramMap.subscribe(t=>{this.proID=t.get("id"),this.proServ.getProduct(this.proID).then(t=>{this.product=t.data()})}),this.getCategories=this.catServ.getAllCategories().subscribe(t=>{this.allCategories=t}),this.getAllProducts=this.proServ.getAllProducts().subscribe(t=>{this.allProducts=t.map(t=>t.payload.doc.data())})}addToCart(t){this.add=+t}buy(t){let e=this.allProducts[this.add];this.cartServ.addToCart({name:e.Name,amount:t,price:e.Price}).then(()=>this.add=-1)}ngOnDestroy(){var t,e,n;null===(t=this.getProID)||void 0===t||t.unsubscribe(),null===(e=this.getCategories)||void 0===e||e.unsubscribe(),null===(n=this.getAllProducts)||void 0===n||n.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(VC),r.Y36(k_),r.Y36(jC),r.Y36(db),r.Y36(BC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-product"]],decls:23,vars:7,consts:[[1,"product-details"],[1,"container"],[1,"details"],[1,"row"],[1,"col-lg-4","col-md-6"],[1,"product-image"],["alt","product-image",3,"src"],[1,"col-lg-8","col-md-6"],[1,"content"],[4,"ngFor","ngForOf"],[1,"desc"],[1,"price"],[1,"related-products","products"],[4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"click"],["type","number","placeholder","Amount",1,"form-control"],["amount",""],[1,"btn","btn-primary",3,"click"],["class","col-lg-3 col-md-4 col-sm-6 col-xs-12",4,"ngIf"],[1,"col-lg-3","col-md-4","col-sm-6","col-xs-12"],[1,"product"],[1,"card"],[3,"routerLink"],[1,"card-image"],["alt","product image",3,"src"],[1,"product-name"],["class","catgeory-name",4,"ngIf"],[1,"catgeory-name"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r._UZ(6,"img",6),r.qZA(),r.qZA(),r.TgZ(7,"div",7),r.TgZ(8,"div",8),r.TgZ(9,"h5"),r._uU(10),r.qZA(),r.YNc(11,HC,2,1,"ng-container",9),r.TgZ(12,"p",10),r._uU(13),r.qZA(),r.TgZ(14,"p",11),r._uU(15),r.qZA(),r.YNc(16,QC,2,1,"ng-container",9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",12),r.TgZ(18,"h6"),r._uU(19,"Related Products"),r.qZA(),r.TgZ(20,"div",1),r.TgZ(21,"div",3),r.YNc(22,nS,2,1,"ng-container",9),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(6),r.Q6J("src",e.product.Image,r.LSH),r.xp6(4),r.Oqu(e.product.Name),r.xp6(1),r.Q6J("ngForOf",e.allCategories),r.xp6(2),r.Oqu(e.product.Bio),r.xp6(2),r.hij("",e.product.Price," EGP"),r.xp6(1),r.Q6J("ngForOf",e.allProducts),r.xp6(6),r.Q6J("ngForOf",e.allProducts))},directives:[q,Z,Xw],styles:[".details[_ngcontent-%COMP%], .related-products[_ngcontent-%COMP%]{background-color:#fff;padding:15px 25px;margin-top:30px;margin-bottom:50px;border:1px solid #ddd;border-radius:5px;box-shadow:1px 2px 4px #ddd}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;border:1px solid #f3eaea;padding:35px;border-radius:5px}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;display:block;margin:0 auto}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#524545;margin:0}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#af9494;display:block;margin-top:2px}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{line-height:1.8;color:#4e4646}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-top:30px;font-size:40px;font-weight:700;color:#524545}.product-details[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f08804;border:none;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;padding:.436rem 3rem;margin-top:15px;font-weight:700}.product-details[_ngcontent-%COMP%]   .related-products[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#524545;border-bottom:1px solid #f5f2f2;padding-bottom:10px;margin:0 0 15px}"]}),t})();const iS=function(t,e){return["/category",t,e]};function oS(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"li"),r.TgZ(2,"a",17),r.TgZ(3,"span",18),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.WLB(2,iS,t.Name,t.catID)),r.xp6(2),r.Oqu(t.Name)}}const sS=function(t,e){return["/product",t,e]};function aS(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"li"),r.TgZ(2,"a",17),r.TgZ(3,"div",19),r._UZ(4,"img",20),r.qZA(),r.TgZ(5,"div",21),r.TgZ(6,"h6"),r._uU(7),r.qZA(),r.TgZ(8,"p"),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.WLB(4,sS,t.Name,t.proID)),r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(3),r.Oqu(t.Name),r.xp6(2),r.hij("",t.Price," EGP")}}function uS(t,e){if(1&t&&(r.TgZ(0,"span",33),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.Name)}}function cS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,uS,2,1,"span",32),r.BQk()),2&t){const t=e.$implicit,n=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",n.catID==t.catID)}}function lS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",34),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().index;return r.oxw().addToCart(e)}),r._uU(1,"Add"),r.qZA()}}function hS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r._UZ(1,"input",35,36),r.TgZ(3,"button",37),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(2);return r.oxw(2).buy(e.value)}),r._uU(4,"Add To Cart"),r.qZA(),r.qZA()}}function dS(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",22),r.TgZ(2,"div",23),r.TgZ(3,"div",24),r.TgZ(4,"a",17),r.TgZ(5,"div",25),r._UZ(6,"img",26),r.qZA(),r.qZA(),r.TgZ(7,"div",27),r.YNc(8,cS,2,1,"ng-container",6),r.TgZ(9,"h5",28),r._uU(10),r.qZA(),r.TgZ(11,"p",29),r._uU(12),r.qZA(),r.YNc(13,lS,2,0,"button",30),r.YNc(14,hS,5,0,"div",31),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit,n=e.index,i=r.oxw();r.xp6(4),r.Q6J("routerLink",r.WLB(7,sS,t.Name,t.proID)),r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(2),r.Q6J("ngForOf",i.allCategories),r.xp6(2),r.Oqu(t.Name),r.xp6(2),r.Oqu(t.Price),r.xp6(1),r.Q6J("ngIf",t.userID!=i.userID&&i.isUser&&i.add!==n),r.xp6(1),r.Q6J("ngIf",i.add===n)}}let fS=(()=>{class t{constructor(t,e,n,r,i){this.catServ=t,this.proServ=e,this.route=n,this.authServ=r,this.cartServ=i,this.allCategories=[],this.topProducts=[],this.allProducts=[],this.userID="",this.isUser=!1,this.add=-1,this.authServ.user.subscribe(t=>{t?(this.isUser=!0,this.userID=JSON.parse(localStorage.getItem("userID"))):this.isUser=!1})}ngOnInit(){this.getCategories=this.catServ.getAllCategories().subscribe(t=>{this.allCategories=t}),this.getTopProducts=this.proServ.getAllProducts().subscribe(t=>{t.map(e=>{this.topProducts.length<4&&this.topProducts.push(e.payload.doc.data()),this.allProducts=t.map(t=>t.payload.doc.data())})})}addToCart(t){this.add=+t}buy(t){let e=this.allProducts[this.add];this.cartServ.addToCart({name:e.Name,amount:t,price:e.Price}).then(()=>this.add=-1)}ngOnDestroy(){var t,e;null===(t=this.getCategories)||void 0===t||t.unsubscribe(),null===(e=this.getTopProducts)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jC),r.Y36(VC),r.Y36(k_),r.Y36(db),r.Y36(BC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-shop"]],decls:30,vars:3,consts:[[1,"shop"],[1,"container-fluid"],[1,"row"],[1,"col-md-3"],[1,"sidebar"],[1,"group","product-categories"],[4,"ngFor","ngForOf"],[1,"featured-products"],[1,"featured"],[1,"col-md-9"],[1,"all-products"],[1,"result"],[1,"form-control"],["value","1"],["value","2"],["value","3"],[1,"products"],[3,"routerLink"],[1,"cat"],[1,"img"],["alt","product-img",3,"src"],[1,"details"],[1,"col-lg-4","col-md-6","col-sm-12","col-xs-12"],[1,"product"],[1,"card"],[1,"card-image"],["alt","product image",3,"src"],[1,"content"],[1,"product-name"],[1,"price"],["class","btn btn-warning",3,"click",4,"ngIf"],[4,"ngIf"],["class","catgeory-name",4,"ngIf"],[1,"catgeory-name"],[1,"btn","btn-warning",3,"click"],["type","number","placeholder","Amount",1,"form-control"],["amount",""],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r.TgZ(6,"h5"),r._uU(7,"Product Categories"),r.qZA(),r.TgZ(8,"ul"),r.YNc(9,oS,5,5,"ng-container",6),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r.TgZ(11,"h5"),r._uU(12,"Featured Products"),r.qZA(),r.TgZ(13,"ul",8),r.YNc(14,aS,10,7,"ng-container",6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",9),r.TgZ(16,"div",10),r.TgZ(17,"div",11),r.TgZ(18,"h5"),r._uU(19,"All Products"),r.qZA(),r.TgZ(20,"select",12),r.TgZ(21,"option",13),r._uU(22,"Default Soritng"),r.qZA(),r.TgZ(23,"option",14),r._uU(24,"Ascending Soritng"),r.qZA(),r.TgZ(25,"option",15),r._uU(26,"Descinding Soritng"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"div",16),r.TgZ(28,"div",2),r.YNc(29,dS,15,10,"ng-container",6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(9),r.Q6J("ngForOf",e.allCategories),r.xp6(5),r.Q6J("ngForOf",e.topProducts),r.xp6(15),r.Q6J("ngForOf",e.allProducts))},directives:[q,CC,IC,Xw,Z],styles:[""]}),t})();const pS=function(t,e){return["/category",t,e]};function gS(t,e){if(1&t&&(r.TgZ(0,"div",5),r.TgZ(1,"div",6),r._UZ(2,"img",7),r.TgZ(3,"div",8),r.TgZ(4,"div",9),r.TgZ(5,"h4"),r._uU(6),r.qZA(),r.TgZ(7,"p"),r._uU(8),r.qZA(),r.TgZ(9,"a",10),r._uU(10,"Shop Now"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(4),r.Oqu(t.Name),r.xp6(2),r.Oqu(t.Bio),r.xp6(1),r.Q6J("routerLink",r.WLB(4,pS,t.Name,t.catID))}}let mS=(()=>{class t{constructor(t){this.catServ=t,this.topCats=[]}ngOnInit(){this.getTopCats=this.catServ.getAllCategories().subscribe(t=>{t.forEach(t=>{this.topCats.length<2&&this.topCats.push(t)})})}ngOnDestroy(){var t;null===(t=this.getTopCats)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-top-categories"]],decls:6,vars:1,consts:[[1,"top-categories"],[1,"container"],[1,"title"],[1,"row"],["class","col col-lg-6",4,"ngFor","ngForOf"],[1,"col","col-lg-6"],[1,"category-box"],[3,"src"],[1,"overlay"],[1,"content"],[1,"btn","btn-warning",3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h4",2),r._uU(3,"Top Categories"),r.qZA(),r.TgZ(4,"div",3),r.YNc(5,gS,11,7,"div",4),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("ngForOf",e.topCats))},directives:[q,Xw],styles:[""]}),t})();function vS(t,e){if(1&t&&(r.TgZ(0,"span",18),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.Name)}}function yS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,vS,2,1,"span",17),r.BQk()),2&t){const t=e.$implicit,n=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",n.catID==t.catID)}}function bS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",19),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().index;return r.oxw().addToCart(e)}),r._uU(1,"Add"),r.qZA()}}function _S(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r._UZ(1,"input",20,21),r.TgZ(3,"button",22),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(2);return r.oxw(2).buy(e.value)}),r._uU(4,"Add To Cart"),r.qZA(),r.qZA()}}const wS=function(t,e){return["/product",t,e]};function TS(t,e){if(1&t&&(r.TgZ(0,"div",5),r.TgZ(1,"div",6),r.TgZ(2,"div",7),r.TgZ(3,"a",8),r.TgZ(4,"div",9),r._UZ(5,"img",10),r.qZA(),r.qZA(),r.TgZ(6,"div",11),r.YNc(7,yS,2,1,"ng-container",12),r.TgZ(8,"h5",13),r._uU(9),r.qZA(),r.TgZ(10,"p",14),r._uU(11),r.qZA(),r.YNc(12,bS,2,0,"button",15),r.YNc(13,_S,5,0,"div",16),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=e.index,i=r.oxw();r.xp6(3),r.Q6J("routerLink",r.WLB(7,wS,t.Name,t.proID)),r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(2),r.Q6J("ngForOf",i.categories),r.xp6(2),r.Oqu(t.Name),r.xp6(2),r.hij("",t.Price," EGP"),r.xp6(1),r.Q6J("ngIf",t.userID!=i.userID&&i.isUser&&i.add!==n),r.xp6(1),r.Q6J("ngIf",i.add===n)}}let CS=(()=>{class t{constructor(t,e,n,r){this.proServ=t,this.catServ=e,this.authServ=n,this.cartServ=r,this.topProducts=[],this.categories=[],this.userID="",this.isUser=!1,this.add=-1,this.authServ.user.subscribe(t=>{t?(this.isUser=!0,this.userID=JSON.parse(localStorage.getItem("userID"))):this.isUser=!1})}ngOnInit(){this.getTopProducts=this.proServ.getAllProducts().subscribe(t=>{t.map(t=>{this.topProducts.length<4&&this.topProducts.push(t.payload.doc.data())})}),this.getCategories=this.catServ.getAllCategories().subscribe(t=>{this.categories=t})}addToCart(t){this.add=+t}buy(t){let e=this.topProducts[this.add];this.cartServ.addToCart({name:e.Name,amount:t,price:e.Price}).then(()=>this.add=-1)}ngOnDestroy(){var t,e;null===(t=this.getTopProducts)||void 0===t||t.unsubscribe(),null===(e=this.getCategories)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(VC),r.Y36(jC),r.Y36(db),r.Y36(BC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-top-products"]],decls:6,vars:1,consts:[[1,"products","recommended"],[1,"container"],[1,"title"],[1,"row"],["class","col-lg-3 col-md-4 col-sm-6 col-xs-12",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6","col-xs-12"],[1,"product"],[1,"card"],[3,"routerLink"],[1,"card-image"],["alt","product image",3,"src"],[1,"content"],[4,"ngFor","ngForOf"],[1,"product-name"],[1,"price"],["class","btn btn-warning",3,"click",4,"ngIf"],[4,"ngIf"],["class","catgeory-name",4,"ngIf"],[1,"catgeory-name"],[1,"btn","btn-warning",3,"click"],["type","number","placeholder","Amount",1,"form-control"],["amount",""],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h4",2),r._uU(3,"Top product this month"),r.qZA(),r.TgZ(4,"div",3),r.YNc(5,TS,14,10,"div",4),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("ngForOf",e.topProducts))},directives:[q,Xw,Z],styles:[""]}),t})(),SS=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:13,vars:0,consts:[[1,"slider"],[1,"overlay"],[1,"content","text-center"],["routerLink","/shop",1,"btn","btn-warning"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1"),r._uU(4,"Welcome To "),r.TgZ(5,"span"),r._uU(6,"Power"),r.qZA(),r.qZA(),r.TgZ(7,"p"),r._uU(8,"Everything you want to buy"),r.qZA(),r.TgZ(9,"a",3),r._uU(10,"Shop Now"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(11,"app-top-categories"),r._UZ(12,"app-top-products"))},directives:[Xw,mS,CS],styles:[".slider[_ngcontent-%COMP%]{position:relative;background:#2c3e50;background-image:url(https://firebasestorage.googleapis.com/v0/b/power-43380.appspot.com/o/slider.jpg?alt=media&token=7dbe8a86-079a-4650-af92-47b6431900f2);background-size:cover;height:70vh}.slider[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;background-color:#40343480;min-height:100%;z-index:1}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:45px;margin:0}@media screen and (max-width: 792px){.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px}}@media screen and (max-width: 575px){.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f08804}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#dedcdc;margin:6px 0 12px}.slider[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f08804;color:#fff;border:none}"]}),t})();const xS=function(t,e){return["/category",t,e]};function AS(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"li"),r.TgZ(2,"a",17),r.TgZ(3,"span",18),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.WLB(2,xS,t.Name,t.catID)),r.xp6(2),r.Oqu(t.Name)}}const IS=function(t,e){return["/product",t,e]};function ES(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"li"),r.TgZ(2,"a",17),r.TgZ(3,"div",19),r._UZ(4,"img",20),r.qZA(),r.TgZ(5,"div",21),r.TgZ(6,"h6"),r._uU(7),r.qZA(),r.TgZ(8,"p"),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(2),r.Q6J("routerLink",r.WLB(4,IS,t.Name,t.proID)),r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(3),r.Oqu(t.Name),r.xp6(2),r.hij("",t.Price," EGP")}}function OS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",33),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(2).index;return r.oxw().addToCart(e)}),r._uU(1,"Add"),r.qZA()}}function kS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r._UZ(1,"input",34,35),r.TgZ(3,"button",36),r.NdJ("click",function(){r.CHM(t);const e=r.MAs(2);return r.oxw(3).buy(e.value)}),r._uU(4,"Add To Cart"),r.qZA(),r.qZA()}}function PS(t,e){if(1&t&&(r.TgZ(0,"div",23),r.TgZ(1,"div",24),r.TgZ(2,"div",25),r.TgZ(3,"a",17),r.TgZ(4,"div",26),r._UZ(5,"img",27),r.qZA(),r.qZA(),r.TgZ(6,"div",28),r.TgZ(7,"h5",29),r._uU(8),r.qZA(),r.TgZ(9,"p",30),r._uU(10),r.qZA(),r.YNc(11,OS,2,0,"button",31),r.YNc(12,kS,5,0,"div",32),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw(),e=t.$implicit,n=t.index,i=r.oxw();r.xp6(3),r.Q6J("routerLink",r.WLB(6,IS,e.Name,e.proID)),r.xp6(2),r.Q6J("src",e.Image,r.LSH),r.xp6(3),r.Oqu(e.Name),r.xp6(2),r.Oqu(e.Price),r.xp6(1),r.Q6J("ngIf",e.userID!=i.userID&&i.isUser&&i.add!==n),r.xp6(1),r.Q6J("ngIf",i.add===n)}}function NS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,PS,13,9,"div",22),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",t.catID==n.categoryID)}}let RS=(()=>{class t{constructor(t,e,n,r,i){this.catServ=t,this.proServ=e,this.route=n,this.authServ=r,this.cartServ=i,this.allCategories=[],this.topProducts=[],this.allProducts=[],this.userID="",this.isUser=!1,this.add=-1,this.authServ.user.subscribe(t=>{t?(this.isUser=!0,this.userID=JSON.parse(localStorage.getItem("userID"))):this.isUser=!1})}ngOnInit(){this.getCategoryName=this.route.paramMap.subscribe(t=>{this.categoryName=t.get("name")}),this.getCategoryID=this.route.paramMap.subscribe(t=>{this.categoryID=t.get("id")}),this.getCategories=this.catServ.getAllCategories().subscribe(t=>{this.allCategories=t}),this.getTopProducts=this.proServ.getAllProducts().subscribe(t=>{t.map(e=>{this.topProducts.length<4&&this.topProducts.push(e.payload.doc.data()),this.allProducts=t.map(t=>t.payload.doc.data())})})}addToCart(t){this.add=+t}buy(t){let e=this.allProducts[this.add];this.cartServ.addToCart({name:e.Name,amount:t,price:e.Price}).then(()=>this.add=-1)}ngOnDestroy(){var t,e,n,r;null===(t=this.getCategories)||void 0===t||t.unsubscribe(),null===(e=this.getCategoryName)||void 0===e||e.unsubscribe(),null===(n=this.getCategoryID)||void 0===n||n.unsubscribe(),null===(r=this.getTopProducts)||void 0===r||r.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jC),r.Y36(VC),r.Y36(k_),r.Y36(db),r.Y36(BC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-category"]],decls:30,vars:4,consts:[[1,"shop"],[1,"container-fluid"],[1,"row"],[1,"col-md-3"],[1,"sidebar"],[1,"group","product-categories"],[4,"ngFor","ngForOf"],[1,"featured-products"],[1,"featured"],[1,"col-md-9"],[1,"all-products"],[1,"result"],[1,"form-control"],["value","1"],["value","2"],["value","3"],[1,"products"],[3,"routerLink"],[1,"cat"],[1,"img"],["alt","product-img",3,"src"],[1,"details"],["class","col-lg-4 col-md-6 col-sm-12 col-xs-12",4,"ngIf"],[1,"col-lg-4","col-md-6","col-sm-12","col-xs-12"],[1,"product"],[1,"card"],[1,"card-image"],["alt","product image",3,"src"],[1,"content"],[1,"product-name"],[1,"price"],["class","btn btn-warning",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-warning",3,"click"],["type","number","placeholder","Amount",1,"form-control"],["amount",""],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r.TgZ(6,"h5"),r._uU(7,"Product Categories"),r.qZA(),r.TgZ(8,"ul"),r.YNc(9,AS,5,5,"ng-container",6),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r.TgZ(11,"h5"),r._uU(12,"Featured Products"),r.qZA(),r.TgZ(13,"ul",8),r.YNc(14,ES,10,7,"ng-container",6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",9),r.TgZ(16,"div",10),r.TgZ(17,"div",11),r.TgZ(18,"h5"),r._uU(19),r.qZA(),r.TgZ(20,"select",12),r.TgZ(21,"option",13),r._uU(22,"Default Soritng"),r.qZA(),r.TgZ(23,"option",14),r._uU(24,"Ascending Soritng"),r.qZA(),r.TgZ(25,"option",15),r._uU(26,"Descinding Soritng"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"div",16),r.TgZ(28,"div",2),r.YNc(29,NS,2,1,"ng-container",6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(9),r.Q6J("ngForOf",e.allCategories),r.xp6(5),r.Q6J("ngForOf",e.topProducts),r.xp6(5),r.hij("",e.categoryName," Category"),r.xp6(10),r.Q6J("ngForOf",e.allProducts))},directives:[q,CC,IC,Xw,Z],styles:[""]}),t})();function DS(t,e){if(1&t&&(r.TgZ(0,"p",13),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.msgError)}}function MS(t,e){1&t&&(r.TgZ(0,"p",13),r._uU(1,"Email Is Required"),r.qZA())}function LS(t,e){1&t&&(r.TgZ(0,"p",13),r._uU(1,"Password Is Required"),r.qZA())}let US=(()=>{class t{constructor(t,e){this.authServ=t,this.router=e,this.msgError=""}ngOnInit(){}login(t){let e=t.value;this.authServ.login(e.email,e.password).then(t=>{var e;this.router.navigate(["/"]),localStorage.setItem("userID",JSON.stringify(null===(e=t.user)||void 0===e?void 0:e.uid))}).catch(()=>{this.msgError="Incorrect Email or Password"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(Ww))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"power-form","text-center"],["src","./assets/images/logo.png"],[1,"text-center"],[1,"form",3,"ngSubmit"],["f","ngForm"],["class","alert alert-danger",4,"ngIf"],[1,"from-group"],["type","text","placeholder","Email","name","email","ngModel","","required","",1,"form-control"],["email","ngModel"],[1,"form-group"],["type","password","placeholder","Password","name","password","ngModel","","required","",1,"uk-input","form-control"],["password","ngModel"],[1,"btn","btn-primary"],[1,"alert","alert-danger"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r._UZ(1,"img",1),r.TgZ(2,"h2",2),r._uU(3,"Welcome To Power"),r.qZA(),r.TgZ(4,"form",3,4),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(5);return e.login(n)}),r.TgZ(6,"h2",2),r._uU(7,"Login"),r.qZA(),r.YNc(8,DS,2,1,"p",5),r.TgZ(9,"div",6),r._UZ(10,"input",7,8),r.YNc(12,MS,2,0,"p",5),r.qZA(),r.TgZ(13,"div",9),r._UZ(14,"input",10,11),r.YNc(16,LS,2,0,"p",5),r.qZA(),r.TgZ(17,"button",12),r._uU(18,"Login"),r.qZA(),r._uU(19," email: a@a.com pass: 123456 "),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(11),n=r.MAs(15);r.xp6(8),r.Q6J("ngIf",e.msgError),r.xp6(4),r.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),r.xp6(4),r.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched)}},directives:[mC,HT,dC,Z,IT,GT,gC,OC],styles:[""]}),t})();const qS=["closeButton"],FS=["closeProButton"],ZS=["closeUpButton"];function VS(t,e){if(1&t&&(r.TgZ(0,"span",80),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.Name)}}function jS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,VS,2,1,"span",79),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngIf",n.catID==t.catID)}}const BS=function(t,e){return["/product",t,e]};function GS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",69),r.TgZ(1,"div",70),r.TgZ(2,"div",2),r.TgZ(3,"a",71),r.TgZ(4,"div",72),r._UZ(5,"img",73),r.qZA(),r.qZA(),r.TgZ(6,"div",74),r.YNc(7,jS,2,1,"ng-container",16),r.TgZ(8,"h5",75),r._uU(9),r.qZA(),r.TgZ(10,"p",76),r._uU(11),r.qZA(),r.TgZ(12,"button",77),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw().selectProduct(e.proID)}),r._uU(13,"Update"),r.qZA(),r.TgZ(14,"button",78),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw().deleteProduct(e.proID)}),r._uU(15,"Delete"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw();r.xp6(3),r.Q6J("routerLink",r.WLB(5,BS,t.Name,t.proID)),r.xp6(2),r.Q6J("src",t.Image,r.LSH),r.xp6(2),r.Q6J("ngForOf",e.allCategories),r.xp6(2),r.Oqu(t.Name),r.xp6(2),r.Oqu(t.Price)}}function HS(t,e){if(1&t&&(r.ynx(0),r.YNc(1,GS,16,8,"div",68),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",t.userID==n.dataProfile.uid)}}function zS(t,e){1&t&&(r.TgZ(0,"p",81),r._uU(1,"Name Is Required"),r.qZA())}function $S(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Image Is Required"),r.qZA())}function JS(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Name Is Required"),r.qZA())}function QS(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Bio Is Required"),r.qZA())}function YS(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Price Is Required"),r.qZA())}function KS(t,e){if(1&t&&(r.TgZ(0,"div",82),r.TgZ(1,"progress",83),r.TgZ(2,"span"),r._uU(3,"100%"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(1),r.Udp("width",t,"%"),r.Q6J("value",t)}}function WS(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Image Is Required"),r.qZA())}function XS(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"option",84),r._uU(2),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("value",t.catID),r.xp6(1),r.Oqu(t.Name)}}function tx(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"category name Is Required"),r.qZA())}function ex(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Name Is Required"),r.qZA())}function nx(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Bio Is Required"),r.qZA())}function rx(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"Price Is Required"),r.qZA())}function ix(t,e){if(1&t&&(r.TgZ(0,"div",82),r.TgZ(1,"progress",83),r.TgZ(2,"span"),r._uU(3,"100%"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(1),r.Udp("width",t,"%"),r.Q6J("value",t)}}function ox(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"option",84),r._uU(2),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("value",t.catID),r.xp6(1),r.Oqu(t.Name)}}function sx(t,e){1&t&&(r.TgZ(0,"div",81),r._uU(1,"category name Is Required"),r.qZA())}let ax=(()=>{class t{constructor(t,e,n,r,i,o){this.authServ=t,this.afStore=e,this.afStorage=n,this.proServ=r,this.catServ=i,this.router=o,this.userID="",this.dataProfile={Name:"",Bio:"",uid:"",Email:"",Image:""},this.updatedSuccessfully="",this.ID="",this.allProducts=[],this.allCategories=[],this.imgUrl="",this.successMsg="",this.product=[],this.ID=JSON.parse(localStorage.getItem("userID"))}ngOnInit(){this.afStore.collection("users").ref.doc(this.ID).get().then(t=>{this.dataProfile=t.data()}),this.getAllProducts=this.proServ.getAllProducts().subscribe(t=>{this.allProducts=t.map(t=>t.payload.doc.data())}),this.getCategories=this.catServ.getAllCategories().subscribe(t=>{this.allCategories=t})}update(){this.afStore.collection("users").doc(this.dataProfile.uid).update({Name:this.dataProfile.Name}).then(()=>{this.updatedSuccessfully="Your Profile Updated Successfully",this.closeButton.nativeElement.click(),window.location.reload()})}uploadUserImage(t){this.afStore.collection("users").ref.doc(this.dataProfile.uid).get().then(t=>{t.data()});const e=Math.random().toString(36).substr(2,9);this.ref=this.afStorage.ref(e+"_"+t.target.files[0].name),this.task=this.ref.put(t.target.files[0]),this.percentage=this.task.percentageChanges(),this.task.then(t=>{t.ref.getDownloadURL().then(t=>{this.afStore.collection("users").doc(this.dataProfile.uid).update({Image:t})})})}selectProduct(t){this.proServ.getProduct(t).then(t=>{this.product=t.data()})}uploadImage(t){const e=Math.random().toString(36).substr(2,9);this.ref=this.afStorage.ref(e+"_"+t.target.files[0].name),this.task=this.ref.put(t.target.files[0]),this.percentage=this.task.percentageChanges(),this.task.then(t=>{t.ref.getDownloadURL().then(t=>{this.imgUrl=t})})}addNewProduct(t){let e=t.value;this.afStore.collection("products").add({Name:e.Name,Bio:e.Bio,Price:e.Price,userID:this.dataProfile.uid,catID:e.categoryId,Image:this.imgUrl,proID:Math.random().toString(36).substr(2,9)}).then(()=>{this.router.navigate(["/products"]),t.reset(),this.closeProButton.nativeElement.click(),this.successMsg="Product is Added Successfully"}),this.getProducts=this.proServ.getAllProducts().subscribe(t=>{t.map(t=>{this.afStore.collection("products").doc(t.payload.doc.id).update({proID:t.payload.doc.id})})})}updateProduct(t){let e=t.value;console.log(e),""!=e.Image&&this.afStore.collection("products").doc(e.ID).update({Image:this.imgUrl}),this.afStore.collection("products").doc(e.ID).update({Name:e.Name,Bio:e.Bio,Price:e.Price,catID:e.categoryId}).then(()=>{this.closeUpButton.nativeElement.click(),this.successMsg="Product is Updated Successfully"})}deleteProduct(t){this.proServ.deleteProduct(t).then(()=>{this.successMsg="Product Deleted Successfully"})}ngOnDestroy(){var t,e,n,r;null===(t=this.getUserId)||void 0===t||t.unsubscribe(),null===(e=this.getAllProducts)||void 0===e||e.unsubscribe(),null===(n=this.getCategories)||void 0===n||n.unsubscribe(),null===(r=this.getProducts)||void 0===r||r.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(xm),r.Y36(ey),r.Y36(VC),r.Y36(jC),r.Y36(Ww))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-profile"]],viewQuery:function(t,e){if(1&t&&(r.Gf(qS,5),r.Gf(FS,5),r.Gf(ZS,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.closeButton=t.first),r.iGM(t=r.CRH())&&(e.closeProButton=t.first),r.iGM(t=r.CRH())&&(e.closeUpButton=t.first)}},decls:146,vars:32,consts:[[1,"profile"],[1,"container"],[1,"card"],[1,"card-body"],[1,"image"],["width","80","height","80","alt","",3,"src"],[1,"info"],[1,"card-title"],[1,"card-text"],[1,"controls"],["data-toggle","modal","data-target","#updatePrfileModal",1,"btn","btn-primary"],["data-toggle","modal","data-target","#addProductModal",1,"btn","btn-info"],[1,"user-products"],[1,"text-center"],[1,"products"],[1,"row"],[4,"ngFor","ngForOf"],["id","updatePrfileModal","tabindex","-1","aria-labelledby","updatePrfileModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","updatePrfileModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButton",""],["aria-hidden","true"],[1,"modal-body"],["type","text","name","Name","placeholder","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["Name","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["type","file","accept",".jpg, .png","name","image","ngModel","","required","",1,"form-control",3,"change"],["image","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["id","addProductModal","tabindex","-1","aria-labelledby","addProductModalLabel","aria-hidden","true",1,"modal","fade"],["id","addProductModalLabel",1,"modal-title"],["closeProButton",""],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","exampleInputName",1,"form-label"],["type","text","id","exampleInputName","name","Name","ngModel","","required","",1,"form-control"],["for","exampleInputBio",1,"form-label"],["type","text","id","exampleInputBio","name","Bio","ngModel","","required","",1,"form-control"],["Bio","ngModel"],["for","exampleInputPrice",1,"form-label"],["type","number","id","exampleInputPrice","name","Price","ngModel","","required","",1,"form-control"],["Price","ngModel"],["for","exampleInputImage",1,"form-label"],["type","file","accept",".jpg, .png","name","Image","ngModel","","required","",1,"form-control",3,"change"],["Image","ngModel"],["class","progress",4,"ngIf"],[1,"input-group","mb-3"],["for","category",1,"input-group-text"],["id","category","name","categoryId","ngModel","","required","",1,"form-select","form-control"],["categoryId","ngModel"],["type","button","type","submit",1,"btn","btn-primary",3,"disabled"],["id","updateProductModal","tabindex","-1","aria-labelledby","updateProductModalLabel","aria-hidden","true",1,"modal","fade"],["id","updateProductModalLabel",1,"modal-title"],["closeUpButton",""],["updateF","ngForm"],["type","hidden","name","ID",3,"ngModel","ngModelChange"],["ID","ngModel"],["type","text","id","exampleInputName","name","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","exampleInputBio","name","Bio","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","exampleInputPrice","name","Price","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","file","accept",".jpg, .png","name","Image","ngModel","",1,"form-control",3,"change"],["id","category","name","categoryId","required","",1,"form-select","form-control",3,"ngModel","ngModelChange"],["class","col-lg-4 col-md-6 col-sm-12 col-xs-12",4,"ngIf"],[1,"col-lg-4","col-md-6","col-sm-12","col-xs-12"],[1,"product"],[3,"routerLink"],[1,"card-image"],["alt","product image",3,"src"],[1,"content"],[1,"product-name"],[1,"price"],["data-toggle","modal","data-target","#updateProductModal",1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],["class","catgeory-name",4,"ngIf"],[1,"catgeory-name"],[1,"alert","alert-danger"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"value"],[3,"value"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r._UZ(5,"img",5),r.qZA(),r.TgZ(6,"div",6),r.TgZ(7,"h5",7),r._uU(8),r.qZA(),r.TgZ(9,"p",8),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",9),r.TgZ(12,"button",10),r._uU(13,"Update Profile"),r.qZA(),r.TgZ(14,"button",11),r._uU(15,"Add Product"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",12),r.TgZ(17,"h2",13),r._uU(18,"My Products"),r.qZA(),r.TgZ(19,"div",14),r.TgZ(20,"div",15),r.YNc(21,HS,2,1,"ng-container",16),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"div",17),r.TgZ(23,"div",18),r.TgZ(24,"div",19),r.TgZ(25,"div",20),r.TgZ(26,"h5",21),r._uU(27,"Update Profile Info"),r.qZA(),r.TgZ(28,"button",22,23),r.TgZ(30,"span",24),r._uU(31,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(32,"div",25),r.TgZ(33,"form"),r.TgZ(34,"input",26,27),r.NdJ("ngModelChange",function(t){return e.dataProfile.Name=t}),r.qZA(),r.YNc(36,zS,2,0,"p",28),r.TgZ(37,"div",29),r.TgZ(38,"input",30,31),r.NdJ("change",function(t){return e.uploadUserImage(t)}),r.qZA(),r._UZ(40,"br"),r.YNc(41,$S,2,0,"div",28),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"div",32),r.TgZ(43,"button",33),r.NdJ("click",function(){return e.update()}),r._uU(44,"Save changes"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(45,"div",34),r.TgZ(46,"div",18),r.TgZ(47,"div",19),r.TgZ(48,"div",20),r.TgZ(49,"h5",35),r._uU(50,"Add New Product"),r.qZA(),r.TgZ(51,"button",22,36),r.TgZ(53,"span",24),r._uU(54,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(55,"div",25),r.TgZ(56,"form",37,38),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(57);return e.addNewProduct(n)}),r.TgZ(58,"div",39),r.TgZ(59,"label",40),r._uU(60,"Name"),r.qZA(),r._UZ(61,"input",41,27),r.qZA(),r.YNc(63,JS,2,0,"div",28),r.TgZ(64,"div",39),r.TgZ(65,"label",42),r._uU(66,"Bio"),r.qZA(),r._UZ(67,"input",43,44),r.qZA(),r.YNc(69,QS,2,0,"div",28),r.TgZ(70,"div",39),r.TgZ(71,"label",45),r._uU(72,"Price"),r.qZA(),r._UZ(73,"input",46,47),r.qZA(),r.YNc(75,YS,2,0,"div",28),r.TgZ(76,"div",39),r.TgZ(77,"label",48),r._uU(78,"Image"),r.qZA(),r.TgZ(79,"input",49,50),r.NdJ("change",function(t){return e.uploadImage(t)}),r.qZA(),r._UZ(81,"br"),r.YNc(82,KS,4,3,"div",51),r.ALo(83,"async"),r.qZA(),r.YNc(84,WS,2,0,"div",28),r.TgZ(85,"div",52),r.TgZ(86,"label",53),r._uU(87,"Categories"),r.qZA(),r.TgZ(88,"select",54,55),r.YNc(90,XS,3,2,"ng-container",16),r.qZA(),r.qZA(),r.YNc(91,tx,2,0,"div",28),r.TgZ(92,"div",32),r.TgZ(93,"button",56),r._uU(94,"Add"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(95,"div",57),r.TgZ(96,"div",18),r.TgZ(97,"div",19),r.TgZ(98,"div",20),r.TgZ(99,"h5",58),r._uU(100),r.qZA(),r.TgZ(101,"button",22,59),r.TgZ(103,"span",24),r._uU(104,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(105,"div",25),r.TgZ(106,"form",37,60),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(107);return e.updateProduct(n)}),r.TgZ(108,"input",61,62),r.NdJ("ngModelChange",function(t){return e.product.proID=t}),r.qZA(),r.TgZ(110,"div",39),r.TgZ(111,"label",40),r._uU(112,"Name"),r.qZA(),r.TgZ(113,"input",63,27),r.NdJ("ngModelChange",function(t){return e.product.Name=t}),r.qZA(),r.qZA(),r.YNc(115,ex,2,0,"div",28),r.TgZ(116,"div",39),r.TgZ(117,"label",42),r._uU(118,"Bio"),r.qZA(),r.TgZ(119,"input",64,44),r.NdJ("ngModelChange",function(t){return e.product.Bio=t}),r.qZA(),r.qZA(),r.YNc(121,nx,2,0,"div",28),r.TgZ(122,"div",39),r.TgZ(123,"label",45),r._uU(124,"Price"),r.qZA(),r.TgZ(125,"input",65,47),r.NdJ("ngModelChange",function(t){return e.product.Price=t}),r.qZA(),r.qZA(),r.YNc(127,rx,2,0,"div",28),r.TgZ(128,"div",39),r.TgZ(129,"label",48),r._uU(130,"Image"),r.qZA(),r.TgZ(131,"input",66,50),r.NdJ("change",function(t){return e.uploadImage(t)}),r.qZA(),r._UZ(133,"br"),r.YNc(134,ix,4,3,"div",51),r.ALo(135,"async"),r.qZA(),r.TgZ(136,"div",52),r.TgZ(137,"label",53),r._uU(138,"Categories"),r.qZA(),r.TgZ(139,"select",67,55),r.NdJ("ngModelChange",function(t){return e.product.catID=t}),r.YNc(141,ox,3,2,"ng-container",16),r.qZA(),r.qZA(),r.YNc(142,sx,2,0,"div",28),r.TgZ(143,"div",32),r.TgZ(144,"button",56),r._uU(145,"Save"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(35),n=r.MAs(39),i=r.MAs(57),o=r.MAs(68),s=r.MAs(74),a=r.MAs(80),u=r.MAs(89),c=r.MAs(107);r.xp6(5),r.Q6J("src",e.dataProfile.Image,r.LSH),r.xp6(3),r.Oqu(e.dataProfile.Name),r.xp6(2),r.hij("Email: ",e.dataProfile.Email,""),r.xp6(11),r.Q6J("ngForOf",e.allProducts),r.xp6(13),r.Q6J("ngModel",e.dataProfile.Name),r.xp6(2),r.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),r.xp6(5),r.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),r.xp6(22),r.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),r.xp6(6),r.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),r.xp6(6),r.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),r.xp6(7),r.Q6J("ngIf",r.lcZ(83,28,e.percentage)),r.xp6(2),r.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched),r.xp6(6),r.Q6J("ngForOf",e.allCategories),r.xp6(1),r.Q6J("ngIf",(null==u.errors?null:u.errors.required)&&u.touched),r.xp6(2),r.Q6J("disabled",i.invalid),r.xp6(7),r.hij("Update ",e.product.Name," Product"),r.xp6(8),r.Q6J("ngModel",e.product.proID),r.xp6(5),r.Q6J("ngModel",e.product.Name),r.xp6(2),r.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),r.xp6(4),r.Q6J("ngModel",e.product.Bio),r.xp6(2),r.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),r.xp6(4),r.Q6J("ngModel",e.product.Price),r.xp6(2),r.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),r.xp6(7),r.Q6J("ngIf",r.lcZ(135,30,e.percentage)),r.xp6(5),r.Q6J("ngModel",e.product.catID),r.xp6(2),r.Q6J("ngForOf",e.allCategories),r.xp6(1),r.Q6J("ngIf",(null==u.errors?null:u.errors.required)&&u.touched),r.xp6(2),r.Q6J("disabled",c.invalid)}},directives:[q,mC,HT,dC,IT,OC,GT,gC,Z,yC,TC,Xw,CC,IC],pipes:[J],styles:[".profile[_ngcontent-%COMP%]{min-height:56.4vh}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:40px 0;border:1px solid #ddd;box-shadow:2px 4px 8px #eee}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:10px;margin-top:12px}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{padding:1.25rem}.profile[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.profile[_ngcontent-%COMP%]   .user-products[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;margin:0 5px}.profile[_ngcontent-%COMP%]   .user-products[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545}input[_ngcontent-%COMP%]{margin:10px auto}.progress[_ngcontent-%COMP%]{height:1.5rem;margin-top:10px}progress[_ngcontent-%COMP%]{padding:13px}"]}),t})(),ux=(()=>{class t{constructor(t,e){this.authServ=t,this.router=e}canActivate(t,e){return new Promise(t=>{this.authServ.user.subscribe(e=>{e?t(!0):(this.router.navigate(["/login"]),t(!1))})})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(db),r.LFG(Ww))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cx=(()=>{class t{constructor(t,e){this.authServ=t,this.router=e}canActivate(t,e){return new Promise(t=>{this.authServ.user.subscribe(e=>{e?(this.router.navigate(["/"]),t(!1)):t(!0)})})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(db),r.LFG(Ww))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"th",7),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.ALo(7,"currency"),r.qZA(),r.TgZ(8,"td"),r.TgZ(9,"input",8),r.NdJ("ngModelChange",function(e){return r.CHM(t).$implicit.amount=e}),r.qZA(),r.qZA(),r.TgZ(10,"td"),r._uU(11),r.ALo(12,"currency"),r.qZA(),r.TgZ(13,"td"),r.TgZ(14,"button",6),r.NdJ("click",function(){const e=r.CHM(t).index;return r.oxw().save(e)}),r._uU(15,"Save"),r.qZA(),r.TgZ(16,"button",9),r.NdJ("click",function(){const e=r.CHM(t).index;return r.oxw().delete(e)}),r._uU(17,"Delete"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=e.index;r.xp6(2),r.Oqu(n+1),r.xp6(2),r.Oqu(t.name),r.xp6(2),r.Oqu(r.xi3(7,5,t.price,"EGP")),r.xp6(3),r.Q6J("ngModel",t.amount),r.xp6(2),r.Oqu(r.xi3(12,8,t.price*t.amount," EGP "))}}function hx(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"tr"),r.TgZ(2,"td"),r._uU(3),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.ALo(6,"currency"),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(3),r.Oqu(t.name),r.xp6(2),r.Oqu(r.xi3(6,2,t.price*t.amount," EGP "))}}const dx=[{path:"",component:SS},{path:"category/:name/:id",component:RS},{path:"shop",component:fS},{path:"product/:name/:id",component:rS},{path:"login",component:US,canActivate:[cx]},{path:"register",component:ZC,canActivate:[cx]},{path:"profile",component:ax,canActivate:[ux]},{path:"cart",component:(()=>{class t{constructor(t,e,n){this.cartServ=t,this.afStore=e,this.router=n,this.cart=[],this.userID="",this.user=[],this.successMsg="",this.userID=JSON.parse(localStorage.getItem("userID")),this.afStore.collection("users").ref.doc(this.userID).get().then(t=>{this.user=t.data()})}ngOnInit(){this.cartServ.getCart().subscribe(t=>{this.cart=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}delete(t){this.cartServ.delete(this.cart[t].id)}save(t){this.cartServ.save(this.cart[t].id,this.cart[t].amount)}getTotal(){let t=0;for(let n=0;n<this.cart.length;n++){var e=this.cart[n];t+=e.price*e.amount}return t}done(){this.router.navigate(["/done"]),this.successMsg="We request your order and we will dliever it to you as soon as possible"}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(BC),r.Y36(xm),r.Y36(Ww))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-cart"]],decls:49,vars:8,consts:[[1,"cart"],[1,"container"],[1,"text-center"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],["scope","row"],["type","number","placeholder","Amount",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h2",2),r._uU(3,"Cart Products"),r.qZA(),r.TgZ(4,"table",3),r.TgZ(5,"thead"),r.TgZ(6,"tr"),r.TgZ(7,"th",4),r._uU(8,"#"),r.qZA(),r.TgZ(9,"th",4),r._uU(10,"Name"),r.qZA(),r.TgZ(11,"th",4),r._uU(12,"Price"),r.qZA(),r.TgZ(13,"th",4),r._uU(14,"Amount"),r.qZA(),r.TgZ(15,"th",4),r._uU(16,"Total"),r.qZA(),r.TgZ(17,"th",4),r._uU(18,"Controls"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"tbody"),r.YNc(20,lx,18,11,"tr",5),r.qZA(),r.qZA(),r.TgZ(21,"h2",2),r._uU(22,"Order Details"),r.qZA(),r.TgZ(23,"table",3),r.TgZ(24,"thead"),r.TgZ(25,"tr"),r.TgZ(26,"th",4),r._uU(27,"Username"),r.qZA(),r.TgZ(28,"th",4),r._uU(29,"Email"),r.qZA(),r.TgZ(30,"th",4),r._uU(31,"Product"),r.qZA(),r.TgZ(32,"th",4),r._uU(33,"Total"),r.qZA(),r.TgZ(34,"th",4),r._uU(35,"Controls"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"tbody"),r.TgZ(37,"tr"),r.TgZ(38,"td"),r._uU(39),r.qZA(),r.TgZ(40,"td"),r._uU(41),r.qZA(),r.YNc(42,hx,7,5,"ng-container",5),r.TgZ(43,"td"),r._uU(44),r.ALo(45,"currency"),r.qZA(),r.TgZ(46,"td"),r.TgZ(47,"button",6),r.NdJ("click",function(){return e.done()}),r._uU(48,"Buy"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(20),r.Q6J("ngForOf",e.cart),r.xp6(19),r.Oqu(e.user.Name),r.xp6(2),r.Oqu(e.user.Email),r.xp6(1),r.Q6J("ngForOf",e.cart),r.xp6(2),r.Oqu(r.xi3(45,5,e.getTotal()," EGP ")))},directives:[q,yC,IT,GT,gC],pipes:[Q],styles:[".cart[_ngcontent-%COMP%]{min-height:61.3vh}.cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px 0}.cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{max-width:900px;margin:10px auto 60px}@media screen and (max-width: 575px){.cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px;font-size:8px}}.cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:3px}@media screen and (max-width: 575px){.cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:8px}}"]}),t})(),canActivate:[ux]},{path:"done",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-order-done"]],decls:7,vars:0,consts:[[1,"done"],[1,"container"],[1,"alert","alert-success","text-center"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"br"),r._UZ(3,"br"),r.TgZ(4,"div",2),r.TgZ(5,"h1"),r._uU(6,"We request your order and we will dliever it to you as soon as possible"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},styles:[".done[_ngcontent-%COMP%]{min-height:63vh}"]}),t})(),canActivate:[ux]}];let fx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[hT.forRoot(dx)],hT]}),t})(),px=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-header"]],decls:17,vars:0,consts:[[1,"header"],[1,"container","top-header"],[1,"row"],[1,"col-md-4","col-sm-6"],[1,"brand"],["src","./assets/images/logo.png"],[1,"info"],[1,"col-md-8","col-sm-6"],[1,"search"],[1,"form-inline","my-2","my-lg-9"],["type","search","placeholder","What are you looking for?","aria-label","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"],[1,"fas","fa-search"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r._UZ(5,"img",5),r.TgZ(6,"div",6),r.TgZ(7,"h3"),r._uU(8,"Power"),r.qZA(),r.TgZ(9,"p"),r._uU(10,"Let's Buy Electronic things"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",7),r.TgZ(12,"div",8),r.TgZ(13,"form",9),r._UZ(14,"input",10),r.TgZ(15,"button",11),r._UZ(16,"i",12),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[mC,HT,dC],styles:[".header[_ngcontent-%COMP%]{background-color:#212f3d;color:#fff;padding:15px 30px}.header[_ngcontent-%COMP%]   .top-header[_ngcontent-%COMP%]{max-width:1300px}.header[_ngcontent-%COMP%]   .top-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 575px){.header[_ngcontent-%COMP%]   .top-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{justify-content:center}}.header[_ngcontent-%COMP%]   .top-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px}.header[_ngcontent-%COMP%]   .top-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:8px}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f08804;margin:0}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-top:20px}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-bottom-right-radius:0;border-top-right-radius:0;width:100%}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;background-color:#f08804;border-color:#f08804;position:absolute;bottom:0;right:0}@media screen and (max-width: 575px){.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:-8px}}.header[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff}"]}),t})();function gx(t,e){1&t&&(r.TgZ(0,"div",17),r.TgZ(1,"a",18),r._uU(2,"Login"),r.qZA(),r._uU(3," / "),r.TgZ(4,"a",19),r._uU(5,"Signup"),r.qZA(),r.qZA())}function mx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",20),r.TgZ(1,"button",21),r._UZ(2,"img",22),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.qZA(),r.TgZ(5,"div",23),r.TgZ(6,"a",24),r._uU(7,"My Profile"),r.qZA(),r._UZ(8,"div",25),r.TgZ(9,"button",26),r.NdJ("click",function(){return r.CHM(t),r.oxw().logout()}),r._uU(10,"Logout"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(2),r.Q6J("src",t.dataProfile.Image,r.LSH),r.xp6(2),r.Oqu(t.dataProfile.Name)}}const vx=function(t,e){return["/category",t,e]};function yx(t,e){if(1&t&&(r.TgZ(0,"a",27),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("routerLink",r.WLB(2,vx,t.Name,t.catID)),r.xp6(1),r.Oqu(t.Name)}}function bx(t,e){if(1&t&&(r.TgZ(0,"ul",28),r.TgZ(1,"li"),r.TgZ(2,"a",29),r._UZ(3,"i",30),r.qZA(),r.TgZ(4,"p"),r._uU(5),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(5),r.Oqu(t.cart.length)}}let _x=(()=>{class t{constructor(t,e,n,r,i){this.catServ=t,this.afStore=e,this.authServ=n,this.router=r,this.cartServ=i,this.allCats=[],this.userID="",this.dataProfile=[],this.isUser=!1,this.cart=[],this.authServ.user.subscribe(t=>{t?(this.isUser=!0,this.userID=JSON.parse(localStorage.getItem("userID")),this.afStore.collection("users").ref.doc(this.userID).get().then(t=>{this.dataProfile=t.data()}),this.cartServ.getCart().subscribe(t=>{this.cart=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})):this.isUser=!1})}ngOnInit(){this.getCats=this.catServ.getAllCategories().subscribe(t=>{this.allCats=t})}logout(){this.authServ.logout().then(()=>{this.router.navigate(["/login"]),localStorage.removeItem("userID")}).catch(()=>{console.log("error !")})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(jC),r.Y36(xm),r.Y36(db),r.Y36(Ww),r.Y36(BC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-navbar"]],decls:21,vars:4,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],["class","login",4,"ngIf"],["class","dropdown user",4,"ngIf"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","/",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],["routerLink","/shop",1,"nav-link"],[1,"nav-item","dropdown"],["id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item",3,"routerLink",4,"ngFor","ngForOf"],["class","shopping-cart",4,"ngIf"],[1,"login"],["routerLink","/login"],["routerLink","/register"],[1,"dropdown","user"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[3,"src"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],["routerLink","/profile",1,"dropdown-item"],[1,"dropdown-divider"],[1,"btn","btn-danger","logout",3,"click"],[1,"dropdown-item",3,"routerLink"],[1,"shopping-cart"],["routerLink","/cart"],[1,"fas","fa-shopping-cart"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"button",1),r._UZ(2,"span",2),r.qZA(),r.TgZ(3,"div",3),r.YNc(4,gx,6,0,"div",4),r.YNc(5,mx,11,2,"div",5),r.TgZ(6,"ul",6),r.TgZ(7,"li",7),r.TgZ(8,"a",8),r._uU(9,"Home "),r.TgZ(10,"span",9),r._uU(11,"(current)"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"li",10),r.TgZ(13,"a",11),r._uU(14,"Shop"),r.qZA(),r.qZA(),r.TgZ(15,"li",12),r.TgZ(16,"a",13),r._uU(17," Categories "),r.qZA(),r.TgZ(18,"div",14),r.YNc(19,yx,2,5,"a",15),r.qZA(),r.qZA(),r.qZA(),r.YNc(20,bx,6,1,"ul",16),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Q6J("ngIf",!e.isUser),r.xp6(1),r.Q6J("ngIf",e.isUser),r.xp6(14),r.Q6J("ngForOf",e.allCats),r.xp6(1),r.Q6J("ngIf",e.isUser))},directives:[Z,Xw,q],styles:[".bg-light[_ngcontent-%COMP%]{background-color:#283848!important}@media screen and (max-width: 991px){.navbar[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{margin-left:10px;margin-top:10px}}.navbar[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}@media screen and (max-width: 991px){.navbar[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{margin-top:10px}}.navbar[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{background-color:initial;border:none}.navbar[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:60px;background-color:var(--font-color);padding:10px;border-radius:5px;height:60px}.navbar[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{width:85%;display:block;margin:5px auto}.navbar[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#fff;vertical-align:middle;margin-left:4px}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{margin-left:27%}@media screen and (max-width: 991px){.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{margin:10px}}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{color:#fff;transition:.3s;cursor:pointer}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover{color:fontColor}.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{list-style:none;margin:0}.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#f08804;font-size:25px;margin-right:6px;cursor:pointer}@media screen and (max-width: 991px){.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:10px;margin-top:10px}}.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;color:#f08804;top:-22px;left:9px;text-align:center;font-weight:900;font-size:19px}@media screen and (max-width: 991px){.navbar[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{top:-13px;left:20px}}"]}),t})(),wx=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-footer"]],decls:3,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"footer"),r.TgZ(1,"p"),r._uU(2,"All Right Reserved \xa9 Ahmed Elmasry 2021"),r.qZA(),r.qZA())},styles:["footer[_ngcontent-%COMP%]{background-color:#212f3d;color:#f08804;text-align:center;padding:15px 0}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}"]}),t})(),Tx=(()=>{class t{constructor(){this.title="Power"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:5,vars:2,consts:[[3,"includeSpinner","color"]],template:function(t,e){1&t&&(r._UZ(0,"ngx-loading-bar",0),r._UZ(1,"app-header"),r._UZ(2,"app-navbar"),r._UZ(3,"router-outlet"),r._UZ(4,"app-footer")),2&t&&r.Q6J("includeSpinner",!1)("color","#ffffff")},directives:[xy,px,_x,eT,wx],styles:[""]}),t})();const Cx={apiKey:"AIzaSyAgj-jrYpOGhzIh7_iuj0OhRCly5ZcXXZc",authDomain:"power-43380.firebaseapp.com",projectId:"power-43380",storageBucket:"power-43380.appspot.com",messagingSenderId:"767069489673",appId:"1:767069489673:web:99aaf061d2c96d72d6c6d8",measurementId:"G-5T1W5BDBLJ"};let Sx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Tx]}),t.\u0275inj=r.cJS({providers:[],imports:[[Pt,fx,Nt.hO.initializeApp(Cx),Am,xe,ry,RC,hb]]}),t})();(0,r.G48)(),Ot().bootstrapModule(Sx).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,gn:()=>s,fM:()=>a,w6:()=>u,mG:()=>c,Jh:()=>l,XA:()=>h,CR:()=>d,ev:()=>f});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function f(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=8264)}]);